'use strict';

const test = require('ava');
const {Duration} = require('luxon');

const viziaFormat = require('../src');

const getMs = (duration) => Duration.fromObject(duration).as('milliseconds');

/**
 * Duration default behaviour
 */

test('Duration defaults: milliseconds', (t) => {
    t.is(
        viziaFormat(0, {format: 'duration'}),
        '0ms',
        'renders as milliseconds'
    );
    t.is(
        viziaFormat(getMs({milliseconds: 1}), {format: 'duration'}),
        '1ms',
        'renders as milliseconds'
    );
});

test('Duration defaults: seconds', (t) => {
    t.is(
        viziaFormat(getMs({seconds: 1}), {format: 'duration'}),
        '1s',
        'renders as seconds'
    );
    t.is(
        viziaFormat(getMs({seconds: 1, milliseconds: 1}), {format: 'duration'}),
        '1s 1ms',
        'renders as seconds and milliseconds'
    );
});

test('Duration defaults: minutes', (t) => {
    t.is(
        viziaFormat(getMs({minutes: 1}), {format: 'duration'}),
        '1m',
        'renders as minutes'
    );
    t.is(
        viziaFormat(getMs({minutes: 1, seconds: 1}), {format: 'duration'}),
        '1m 1s',
        'renders as minutes and seconds'
    );
});

test('Duration defaults: hours', (t) => {
    t.is(
        viziaFormat(getMs({hours: 1}), {format: 'duration'}),
        '1h',
        'renders as minutes'
    );
    t.is(
        viziaFormat(getMs({hours: 1, minutes: 1}), {format: 'duration'}),
        '1h 1m',
        'renders as minutes and seconds'
    );
});

test('Duration defaults: days', (t) => {
    t.is(
        viziaFormat(getMs({days: 1}), {format: 'duration'}),
        '1d',
        'renders as days'
    );
    t.is(
        viziaFormat(getMs({days: 1, hours: 1}), {format: 'duration'}),
        '1d 1h',
        'renders as days and hours'
    );
});

test('Duration defaults: weeks', (t) => {
    t.is(
        viziaFormat(getMs({weeks: 1}), {format: 'duration'}),
        '1w',
        'renders as weeks'
    );
    t.is(
        viziaFormat(getMs({weeks: 1, days: 1}), {format: 'duration'}),
        '1w 1d',
        'renders as weeks and days'
    );
});

test('Duration defaults: months', (t) => {
    t.is(
        viziaFormat(getMs({months: 1}), {format: 'duration'}),
        '1m',
        'renders as months'
    );
    t.is(
        viziaFormat(getMs({months: 1, days: 1}), {format: 'duration'}),
        '1m 1d',
        'renders as months and days'
    );
});

test('Duration defaults: years', (t) => {
    t.is(
        viziaFormat(getMs({years: 1}), {format: 'duration'}),
        '1y',
        'renders as years'
    );
    t.is(
        viziaFormat(getMs({years: 1, months: 1, days: 25}), {format: 'duration'}),
        '1y 2m',
        'renders as years and months'
    );
});
