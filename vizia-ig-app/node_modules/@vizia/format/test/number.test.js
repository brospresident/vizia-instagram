'use strict';

const test = require('ava');

const viziaFormat = require('../src');

/**
 * Number default behaviour
 */

test('Number defaults: Int', (t) => {
    t.is(
        viziaFormat(1234),
        '1,234',
        'renders as positive number with no decimal point'
    );
});

test('Number defaults: Float with 1 decimal point', (t) => {
    t.is(
        viziaFormat(1234.1),
        '1,234.1',
        'renders as positive number with 1 decimal point'
    );
});

test('Number defaults: Float with more than 1 decimal point', (t) => {
    t.is(
        viziaFormat(1234.1234),
        '1,234.12',
        'renders as positive number with 2 decimal points'
    );
});

test('Number defaults: Negative float', (t) => {
    t.is(
        viziaFormat(-1234.1234),
        '−1,234.12',
        'renders as negative number with 2 decimal points'
    );
});

test('Number defaults: Large positive float', (t) => {
    t.is(
        viziaFormat(12341.234),
        '12.34K',
        'renders as positive abbreviated number with 2 decimal points'
    );
});

test('Number defaults: Large negative float', (t) => {
    t.is(
        viziaFormat(-12341.234),
        '−12.34K',
        'renders as negative abbreviated number with 2 decimal points'
    );
});

test('Number defaults: Float equal to the default abbreviated threshold', (t) => {
    t.is(
        viziaFormat(9999.5),
        '10K',
        'renders as abbreviated number'
    );
});

/**
 * Number overrides
 */

test('Number: Using custom mantissa', (t) => {
    t.is(
        viziaFormat(1234.1234, {mantissa: 3}),
        '1,234.123',
        'renders with 3 decimal points'
    );
});

test('Number: Setting trimMantissa=false', (t) => {
    t.is(
        viziaFormat(1234.1, {trimMantissa: false}),
        '1,234.10',
        'renders with 2 decimal points'
    );
});

test('Number: Setting abbr=false', (t) => {
    t.is(
        viziaFormat(12345.1234, {abbr: false}),
        '12,345.12',
        'renders as unabbreviated number'
    );
});

test('Number: Using custom abbrThreshold', (t) => {
    t.is(
        viziaFormat(999, {abbrThreshold: 1000}),
        '999',
        'renders as unabbreviated number'
    );
    t.is(
        viziaFormat(1000, {abbrThreshold: 1000}),
        '1K',
        'renders as abbreviated number'
    );
});
