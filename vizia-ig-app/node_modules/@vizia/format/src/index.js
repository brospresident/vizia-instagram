'use strict';

require('./polyfill/intl');

const parseValue = require('./lib/parse-value');
const getFormatParts = require('./lib/get-format-parts');
const render = require('./lib/render');
const resolveProps = require('./lib/resolve-props');

/**
 * Package interface.
 */
const viziaFormat = (value, props = {}) => {
    const resolvedProps = resolveProps(props);

    return [
        // Parse initial value
        parseValue,
        // Get format parts
        getFormatParts,
        // Render output
        render
    ]
        .reduce((result, processor) => processor(result, resolvedProps), value);
};

module.exports = viziaFormat;
