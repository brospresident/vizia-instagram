# Enhancements over the original V4D library

* No 'engines'. When `start` is called we build a pipeline, and then execute it.
The pipeline is a stream, which will remain open until one of the following conditions
is satisfied:

  1. The `source` function calls `v4d.done()`
  2. The `destination` received `n` items, as specified by `bundle.take(n)`

If a pipeline stops, it will not restart unless `bundle.setThrottle(ms)` has been
set, and (at least) the specified number of milliseconds passed to `setThrottle` has elapsed.

This allows for a very flexible design. It's possible to have 'one shot' bundles by not using
`bundle.setThrottle()` and conversely it's possible to have bundles that continually process
new data by using a source that never calls `v4d.done()` inside a bundle that does not use
`bundle.take()`.

* `Bundle` is now an `EventEmitter` that emits the following events:
  1. `start` this is called once `Bundle.start()` is invoked
  2. `stopRequested` is called if `Bundle.stop()` is invoked
  3. `error` is called when the pipeline stops due to an error
  4. `end` is called whenever the pipeline stops, whether due to an error or not
  5. `data` is called whenever an item reaches the destination, but before it is written to the destination stream

* Everything is async. Even though it should be transparent to the user, we ensure that items
pushed down the stream are done so asynchronously. This allows for more flexibility and predictability
in interrupting/closing streams

* More consistent error handling. Great care has been taken to ensure that we catch the end of
pipeline execution

## Breaking Changes

* No support for `segment` at the time of writing
* For most of the sources used in Vizia today, we'll want to add calls to `v4d.done()`
