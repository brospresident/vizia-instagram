'use strict';

const MetaBundle = require('./MetaBundle');

module.exports = (...bundles) => (pipeline) => {
    const metaBundle = new MetaBundle(...bundles);

    metaBundle.on('error', e => {
        pipeline.error(e);
    });

    metaBundle.on('data', data => {
        pipeline.push(data);
        pipeline.done();
    });

    metaBundle.load(pipeline.config).then(() => metaBundle.start());
};
