{"remainingRequest":"/Users/pantu/.npm/_npx/64608/lib/node_modules/@vizia/app-emulator/node_modules/babel-loader/lib/index.js??ref--4-1!/Users/pantu/work2/vizia-ig-app/node_modules/@vizia/destination-key-metric/src/components/key-metric.js","dependencies":[{"path":"/Users/pantu/work2/vizia-ig-app/node_modules/@vizia/destination-key-metric/src/components/key-metric.js","mtime":1664781785152},{"path":"/Users/pantu/.npm/_npx/64608/lib/node_modules/@vizia/app-emulator/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/pantu/.npm/_npx/64608/lib/node_modules/@vizia/app-emulator/node_modules/babel-loader/lib/index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:J3VzZSBzdHJpY3QnOwoKY29uc3Qgdml6aWFGb3JtYXQgPSByZXF1aXJlKCdAdml6aWEvZm9ybWF0Jyk7CmNvbnN0IHsKICBpY29ucwp9ID0gcmVxdWlyZSgnQGJyYW5kd2F0Y2gvYXhpb20tbWF0ZXJpYWxzJyk7CmNvbnN0IGdldE1vZGlmaWVycyA9IHJlcXVpcmUoJy4uL2xpYi9nZXQtbW9kaWZpZXJzJyk7CmZ1bmN0aW9uIGdldFByb2dyZXNzVmFsdWUodmFsdWUsIGNvbXBhcmlzb25WYWx1ZSkgewogIHJldHVybiBNYXRoLmFicygodmFsdWUgLSBjb21wYXJpc29uVmFsdWUpIC8gY29tcGFyaXNvblZhbHVlKTsKfQpmdW5jdGlvbiBnZXRQcm9ncmVzc1NlbnRpbWVudE1vZGlmaWVyKHZhbHVlLCBjb21wYXJpc29uVmFsdWUsIGludmVydFNlbnRpbWVudCkgewogIGNvbnN0IGEgPSBpbnZlcnRTZW50aW1lbnQgPyBjb21wYXJpc29uVmFsdWUgOiB2YWx1ZTsKICBjb25zdCBiID0gaW52ZXJ0U2VudGltZW50ID8gdmFsdWUgOiBjb21wYXJpc29uVmFsdWU7CiAgaWYgKGEgPCBiKSB7CiAgICByZXR1cm4gJ25lZ2F0aXZlJzsKICB9IGVsc2UgaWYgKGEgPiBiKSB7CiAgICByZXR1cm4gJ3Bvc2l0aXZlJzsKICB9CiAgcmV0dXJuICdlcXVhbCc7Cn0KZnVuY3Rpb24gZ2V0UHJvZ3Jlc3NDaGFuZ2VJY29uKHZhbHVlLCBjb21wYXJpc29uVmFsdWUpIHsKICBjb25zdCBhID0gdmFsdWU7CiAgY29uc3QgYiA9IGNvbXBhcmlzb25WYWx1ZTsKICBpZiAoYSA8IGIpIHsKICAgIHJldHVybiBpY29uc1snYXJyb3ctZG93bi1yaWdodCddOwogIH0gZWxzZSBpZiAoYSA+IGIpIHsKICAgIHJldHVybiBpY29uc1snYXJyb3ctdXAtcmlnaHQnXTsKICB9CiAgcmV0dXJuIGljb25zWydjaGV2cm9uLXJpZ2h0J107Cn0KZnVuY3Rpb24gaWNvblRlbXBsYXRlKGljb24pIHsKICByZXR1cm4gYDxzdmcgY2xhc3M9Imljb24iIHZpZXdCb3g9IiR7aWNvbi52aWV3Qm94fSI+JHtpY29uLmJvZHl9PC9zdmc+YDsKfQpmdW5jdGlvbiBrZXlNZXRyaWNMYWJlbFRlbXBsYXRlKHByb3BzKSB7CiAgY29uc3QgewogICAgZGF0YQogIH0gPSBwcm9wczsKICByZXR1cm4gYDxkaXYgY2xhc3M9ImtleS1tZXRyaWNfX2xhYmVsIj4ke2RhdGEubGFiZWx9PC9kaXY+YDsKfQpmdW5jdGlvbiBrZXlNZXRyaWNQcm9ncmVzc1RlbXBsYXRlKHByb3BzKSB7CiAgY29uc3QgewogICAgZGF0YSwKICAgIGNvbmZpZwogIH0gPSBwcm9wczsKICBjb25zdCB7CiAgICBsb2NhbGUKICB9ID0gY29uZmlnOwogIGNvbnN0IHByb2dyZXNzQ2hhbmdlSWNvbiA9IGdldFByb2dyZXNzQ2hhbmdlSWNvbihkYXRhLnZhbHVlLCBkYXRhLmNvbXBhcmlzb25WYWx1ZSk7CiAgY29uc3QgZm9ybWF0dGVkUHJvZ3Jlc3MgPSB2aXppYUZvcm1hdChnZXRQcm9ncmVzc1ZhbHVlKGRhdGEudmFsdWUsIGRhdGEuY29tcGFyaXNvblZhbHVlKSwgewogICAgZm9ybWF0OiAncGVyY2VudCcsCiAgICBtYW50aXNzYTogMCwKICAgIGxvY2FsZSwKICAgIG91dHB1dDogJ2h0bWwnCiAgfSk7CiAgY29uc3QgbW9kaWZpZXJzID0gW2dldFByb2dyZXNzU2VudGltZW50TW9kaWZpZXIoZGF0YS52YWx1ZSwgZGF0YS5jb21wYXJpc29uVmFsdWUsIGRhdGEuaW52ZXJ0U2VudGltZW50KV0uZmlsdGVyKG1vZGlmaWVyID0+IG1vZGlmaWVyKS5tYXAobW9kaWZpZXIgPT4gYHByb2dyZXNzLS0ke21vZGlmaWVyfWApLmpvaW4oJyAnKTsKICByZXR1cm4gYAogICAgICAgIDxkaXYgY2xhc3M9ImtleS1tZXRyaWNfX3Byb2dyZXNzIj4KICAgICAgICAgICAgPHNwYW4gY2xhc3M9InByb2dyZXNzICR7bW9kaWZpZXJzfSI+CiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0icHJvZ3Jlc3NfX2ljb24iPiR7aWNvblRlbXBsYXRlKHByb2dyZXNzQ2hhbmdlSWNvbil9PC9zcGFuPgogICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9InByb2dyZXNzX192YWx1ZSI+JHtmb3JtYXR0ZWRQcm9ncmVzc308L3NwYW4+CiAgICAgICAgICAgIDwvc3Bhbj4KICAgICAgICA8L2Rpdj4KICAgIGAudHJpbSgpOwp9CmZ1bmN0aW9uIGtleU1ldHJpY0hlYWRlclRlbXBsYXRlKHByb3BzKSB7CiAgY29uc3QgewogICAgZGF0YQogIH0gPSBwcm9wczsKICBpZiAoIWRhdGEubGFiZWwgJiYgZGF0YS5jb21wYXJpc29uVmFsdWUgPT09IHVuZGVmaW5lZCkgewogICAgcmV0dXJuICcnOwogIH0KICByZXR1cm4gYAogICAgICAgIDxkaXYgY2xhc3M9ImtleS1tZXRyaWNfX2hlYWRlciI+CiAgICAgICAgICAgICR7ZGF0YS5sYWJlbCA/IGtleU1ldHJpY0xhYmVsVGVtcGxhdGUocHJvcHMpIDogJyd9CiAgICAgICAgICAgICR7ZGF0YS5jb21wYXJpc29uVmFsdWUgIT09IHVuZGVmaW5lZCAmJiBwcm9wcy5mb3JtYXQgIT09ICd0ZXh0JyA/IGtleU1ldHJpY1Byb2dyZXNzVGVtcGxhdGUocHJvcHMpIDogJyd9CiAgICAgICAgPC9kaXY+CiAgICBgLnRyaW0oKTsKfQpmdW5jdGlvbiBrZXlNZXRyaWNWYWx1ZVRlbXBsYXRlKHByb3BzKSB7CiAgY29uc3QgewogICAgZGF0YSwKICAgIGNvbmZpZwogIH0gPSBwcm9wczsKICBjb25zdCB7CiAgICBsb2NhbGUKICB9ID0gY29uZmlnOwogIGNvbnN0IGZvcm1hdHRlZFZhbHVlID0gZGF0YS5mb3JtYXQgPT09ICd0ZXh0JyA/IGRhdGEudmFsdWUgOiB2aXppYUZvcm1hdChkYXRhLnZhbHVlLCB7CiAgICBmb3JtYXQ6IGRhdGEuZm9ybWF0LAogICAgY3VycmVuY3k6IGRhdGEuY3VycmVuY3ksCiAgICBjdXJyZW5jeVN5bWJvbDogZGF0YS5jdXJyZW5jeVN5bWJvbCwKICAgIGxvY2FsZSwKICAgIG91dHB1dDogJ2h0bWwnCiAgfSk7CiAgY29uc3QgbW9kaWZpZXJzID0gZ2V0TW9kaWZpZXJzKCdrZXktbWV0cmljX192YWx1ZScsIHsKICAgIGxvbmc6IGRhdGEuZm9ybWF0ID09PSAndGV4dCcgfHwgYCR7Zm9ybWF0dGVkVmFsdWV9YC5yZXBsYWNlKC88W14+XSs+L2csICcnKS5sZW5ndGggPj0gMTAKICB9KTsKICByZXR1cm4gYDxkaXYgY2xhc3M9ImtleS1tZXRyaWNfX3ZhbHVlICR7bW9kaWZpZXJzfSI+JHtmb3JtYXR0ZWRWYWx1ZX08L2Rpdj5gOwp9CmZ1bmN0aW9uIHRlbXBsYXRlKHByb3BzKSB7CiAgcmV0dXJuIGAKICAgICAgICA8ZGl2IGNsYXNzPSJrZXktbWV0cmljLWNvbnRhaW5lciI+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImtleS1tZXRyaWMiPgogICAgICAgICAgICAgICAgJHtrZXlNZXRyaWNIZWFkZXJUZW1wbGF0ZShwcm9wcyl9CiAgICAgICAgICAgICAgICAke2tleU1ldHJpY1ZhbHVlVGVtcGxhdGUocHJvcHMpfQogICAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgIGAudHJpbSgpOwp9Cm1vZHVsZS5leHBvcnRzID0gdGVtcGxhdGU7"},{"version":3,"names":["viziaFormat","require","icons","getModifiers","getProgressValue","value","comparisonValue","Math","abs","getProgressSentimentModifier","invertSentiment","a","b","getProgressChangeIcon","iconTemplate","icon","viewBox","body","keyMetricLabelTemplate","props","data","label","keyMetricProgressTemplate","config","locale","progressChangeIcon","formattedProgress","format","mantissa","output","modifiers","filter","modifier","map","join","trim","keyMetricHeaderTemplate","undefined","keyMetricValueTemplate","formattedValue","currency","currencySymbol","long","replace","length","template","module","exports"],"sources":["/Users/pantu/work2/vizia-ig-app/node_modules/@vizia/destination-key-metric/src/components/key-metric.js"],"sourcesContent":["'use strict';\n\nconst viziaFormat = require('@vizia/format');\nconst {icons} = require('@brandwatch/axiom-materials');\n\nconst getModifiers = require('../lib/get-modifiers');\n\nfunction getProgressValue(value, comparisonValue) {\n    return Math.abs((value - comparisonValue) / comparisonValue);\n}\n\nfunction getProgressSentimentModifier(value, comparisonValue, invertSentiment) {\n    const a = invertSentiment ? comparisonValue : value;\n    const b = invertSentiment ? value : comparisonValue;\n\n    if (a < b) {\n        return 'negative';\n    } else if (a > b) {\n        return 'positive';\n    }\n    return 'equal';\n}\n\nfunction getProgressChangeIcon(value, comparisonValue) {\n    const a = value;\n    const b = comparisonValue;\n\n    if (a < b) {\n        return icons['arrow-down-right'];\n    } else if (a > b) {\n        return icons['arrow-up-right'];\n    }\n    return icons['chevron-right'];\n}\n\nfunction iconTemplate(icon) {\n    return `<svg class=\"icon\" viewBox=\"${icon.viewBox}\">${icon.body}</svg>`;\n}\n\nfunction keyMetricLabelTemplate(props) {\n    const {data} = props;\n\n    return `<div class=\"key-metric__label\">${data.label}</div>`;\n}\n\nfunction keyMetricProgressTemplate(props) {\n    const {data, config} = props;\n    const {locale} = config;\n    const progressChangeIcon = getProgressChangeIcon(data.value, data.comparisonValue);\n    const formattedProgress = viziaFormat(getProgressValue(data.value, data.comparisonValue), {\n        format: 'percent',\n        mantissa: 0,\n        locale,\n        output: 'html'\n    });\n    const modifiers = [\n        getProgressSentimentModifier(data.value, data.comparisonValue, data.invertSentiment)\n    ]\n        .filter((modifier) => modifier)\n        .map((modifier) => `progress--${modifier}`)\n        .join(' ');\n\n    return `\n        <div class=\"key-metric__progress\">\n            <span class=\"progress ${modifiers}\">\n                <span class=\"progress__icon\">${iconTemplate(progressChangeIcon)}</span>\n                <span class=\"progress__value\">${formattedProgress}</span>\n            </span>\n        </div>\n    `.trim();\n}\n\nfunction keyMetricHeaderTemplate(props) {\n    const {data} = props;\n\n    if (!data.label && data.comparisonValue === undefined) {\n        return '';\n    }\n\n    return `\n        <div class=\"key-metric__header\">\n            ${data.label ? keyMetricLabelTemplate(props) : ''}\n            ${data.comparisonValue !== undefined && props.format !== 'text' ? keyMetricProgressTemplate(props) : ''}\n        </div>\n    `.trim();\n}\n\nfunction keyMetricValueTemplate(props) {\n    const {data, config} = props;\n    const {locale} = config;\n    const formattedValue = data.format === 'text' ? data.value : viziaFormat(data.value, {\n        format: data.format,\n        currency: data.currency,\n        currencySymbol: data.currencySymbol,\n        locale,\n        output: 'html'\n    });\n    const modifiers = getModifiers('key-metric__value', {\n        long: data.format === 'text' || `${formattedValue}`.replace(/<[^>]+>/g, '').length >= 10\n    });\n\n    return `<div class=\"key-metric__value ${modifiers}\">${formattedValue}</div>`;\n}\n\nfunction template(props) {\n    return `\n        <div class=\"key-metric-container\">\n            <div class=\"key-metric\">\n                ${keyMetricHeaderTemplate(props)}\n                ${keyMetricValueTemplate(props)}\n            </div>\n        </div>\n    `.trim();\n}\n\nmodule.exports = template;\n"],"mappings":"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"}]}