{"remainingRequest":"/Users/pantu/.npm/_npx/56985/lib/node_modules/@vizia/app-emulator/node_modules/babel-loader/lib/index.js??ref--4-1!/Users/pantu/Desktop/vizia/node_modules/@vizia/destination-key-metric/src/lib/app.js","dependencies":[{"path":"/Users/pantu/Desktop/vizia/node_modules/@vizia/destination-key-metric/src/lib/app.js","mtime":499162500000},{"path":"/Users/pantu/.npm/_npx/56985/lib/node_modules/@vizia/app-emulator/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/pantu/.npm/_npx/56985/lib/node_modules/@vizia/app-emulator/node_modules/babel-loader/lib/index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:J3VzZSBzdHJpY3QnOwoKY29uc3QgbW9ycGhkb20gPSByZXF1aXJlKCdtb3JwaGRvbScpOwoKY29uc3QgY3JlYXRlU3RvcmUgPSByZXF1aXJlKCcuL2NyZWF0ZS1zdG9yZScpOwoKY29uc3Qga2V5TWV0cmljQ29tcG9uZW50ID0gcmVxdWlyZSgnLi4vY29tcG9uZW50cy9rZXktbWV0cmljJyk7Ci8qKgogKiBBcHAgY29udGFpbmVyIGNsYXNzCiAqLwoKCmNsYXNzIEFwcCB7CiAgY29uc3RydWN0b3IoKSB7CiAgICB0aGlzLnN0b3JlID0gY3JlYXRlU3RvcmUoKTsKICAgIHRoaXMuZGVzdFRhcmdldCA9IG51bGw7CiAgICB0aGlzLmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICB0aGlzLnVuc3Vic2NyaWJlRnJvbVN0b3JlID0gdGhpcy5zdG9yZS5zdWJzY3JpYmUodGhpcy5vblN0b3JlQ2hhbmdlLmJpbmQodGhpcykpOwogIH0KCiAgdXBkYXRlQ29uZmlnKHByb3BzKSB7CiAgICB0aGlzLnN0b3JlLmRpc3BhdGNoKHsKICAgICAgdHlwZTogJ1VQREFURV9DT05GSUcnLAogICAgICBkYXRhOiBwcm9wcwogICAgfSk7CiAgfQoKICB1cGRhdGVEYXRhKGRhdGEpIHsKICAgIHRoaXMuc3RvcmUuZGlzcGF0Y2goewogICAgICB0eXBlOiAnVVBEQVRFX0RBVEEnLAogICAgICBkYXRhCiAgICB9KTsKICB9CgogIG9uU3RvcmVDaGFuZ2UoKSB7CiAgICBjb25zdCBzdGF0ZSA9IHRoaXMuc3RvcmUuZ2V0U3RhdGUoKTsKCiAgICBpZiAoc3RhdGUuY29uZmlnLmRlc3RUYXJnZXQgJiYgdGhpcy5kZXN0VGFyZ2V0ID09PSBudWxsKSB7CiAgICAgIHRoaXMuZGVzdFRhcmdldCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc3RhdGUuY29uZmlnLmRlc3RUYXJnZXQpOwogICAgICB0aGlzLmRlc3RUYXJnZXQuYXBwZW5kQ2hpbGQodGhpcy5lbCk7CiAgICB9CgogICAgaWYgKHN0YXRlLmRhdGEpIHsKICAgICAgbW9ycGhkb20odGhpcy5lbCwga2V5TWV0cmljQ29tcG9uZW50KHN0YXRlKSk7CiAgICB9CiAgfQoKICB1bm1vdW50KCkgewogICAgdGhpcy51bnN1YnNjcmliZUZyb21TdG9yZSgpOwoKICAgIGlmICh0aGlzLmRlc3RUYXJnZXQpIHsKICAgICAgdGhpcy5kZXN0VGFyZ2V0LnJlbW92ZUNoaWxkKHRoaXMuZWwpOwogICAgfQogIH0KCn0KCm1vZHVsZS5leHBvcnRzID0gQXBwOw=="},{"version":3,"names":["morphdom","require","createStore","keyMetricComponent","App","constructor","store","destTarget","el","document","createElement","unsubscribeFromStore","subscribe","onStoreChange","bind","updateConfig","props","dispatch","type","data","updateData","state","getState","config","querySelector","appendChild","unmount","removeChild","module","exports"],"sources":["/Users/pantu/Desktop/vizia/node_modules/@vizia/destination-key-metric/src/lib/app.js"],"sourcesContent":["'use strict';\n\nconst morphdom = require('morphdom');\n\nconst createStore = require('./create-store');\nconst keyMetricComponent = require('../components/key-metric');\n\n/**\n * App container class\n */\nclass App {\n    constructor() {\n        this.store = createStore();\n        this.destTarget = null;\n        this.el = document.createElement('div');\n        this.unsubscribeFromStore = this.store.subscribe(this.onStoreChange.bind(this));\n    }\n\n    updateConfig(props) {\n        this.store.dispatch({\n            type: 'UPDATE_CONFIG',\n            data: props\n        });\n    }\n\n    updateData(data) {\n        this.store.dispatch({\n            type: 'UPDATE_DATA',\n            data\n        });\n    }\n\n    onStoreChange() {\n        const state = this.store.getState();\n\n        if (state.config.destTarget && this.destTarget === null) {\n            this.destTarget = document.querySelector(state.config.destTarget);\n            this.destTarget.appendChild(this.el);\n        }\n\n        if (state.data) {\n            morphdom(this.el, keyMetricComponent(state));\n        }\n    }\n\n    unmount() {\n        this.unsubscribeFromStore();\n\n        if (this.destTarget) {\n            this.destTarget.removeChild(this.el);\n        }\n    }\n}\n\nmodule.exports = App;\n"],"mappings":"AAAA;;AAEA,MAAMA,QAAQ,GAAGC,OAAO,CAAC,UAAD,CAAxB;;AAEA,MAAMC,WAAW,GAAGD,OAAO,CAAC,gBAAD,CAA3B;;AACA,MAAME,kBAAkB,GAAGF,OAAO,CAAC,0BAAD,CAAlC;AAEA;AACA;AACA;;;AACA,MAAMG,GAAN,CAAU;EACNC,WAAW,GAAG;IACV,KAAKC,KAAL,GAAaJ,WAAW,EAAxB;IACA,KAAKK,UAAL,GAAkB,IAAlB;IACA,KAAKC,EAAL,GAAUC,QAAQ,CAACC,aAAT,CAAuB,KAAvB,CAAV;IACA,KAAKC,oBAAL,GAA4B,KAAKL,KAAL,CAAWM,SAAX,CAAqB,KAAKC,aAAL,CAAmBC,IAAnB,CAAwB,IAAxB,CAArB,CAA5B;EACH;;EAEDC,YAAY,CAACC,KAAD,EAAQ;IAChB,KAAKV,KAAL,CAAWW,QAAX,CAAoB;MAChBC,IAAI,EAAE,eADU;MAEhBC,IAAI,EAAEH;IAFU,CAApB;EAIH;;EAEDI,UAAU,CAACD,IAAD,EAAO;IACb,KAAKb,KAAL,CAAWW,QAAX,CAAoB;MAChBC,IAAI,EAAE,aADU;MAEhBC;IAFgB,CAApB;EAIH;;EAEDN,aAAa,GAAG;IACZ,MAAMQ,KAAK,GAAG,KAAKf,KAAL,CAAWgB,QAAX,EAAd;;IAEA,IAAID,KAAK,CAACE,MAAN,CAAahB,UAAb,IAA2B,KAAKA,UAAL,KAAoB,IAAnD,EAAyD;MACrD,KAAKA,UAAL,GAAkBE,QAAQ,CAACe,aAAT,CAAuBH,KAAK,CAACE,MAAN,CAAahB,UAApC,CAAlB;MACA,KAAKA,UAAL,CAAgBkB,WAAhB,CAA4B,KAAKjB,EAAjC;IACH;;IAED,IAAIa,KAAK,CAACF,IAAV,EAAgB;MACZnB,QAAQ,CAAC,KAAKQ,EAAN,EAAUL,kBAAkB,CAACkB,KAAD,CAA5B,CAAR;IACH;EACJ;;EAEDK,OAAO,GAAG;IACN,KAAKf,oBAAL;;IAEA,IAAI,KAAKJ,UAAT,EAAqB;MACjB,KAAKA,UAAL,CAAgBoB,WAAhB,CAA4B,KAAKnB,EAAjC;IACH;EACJ;;AAzCK;;AA4CVoB,MAAM,CAACC,OAAP,GAAiBzB,GAAjB"}]}