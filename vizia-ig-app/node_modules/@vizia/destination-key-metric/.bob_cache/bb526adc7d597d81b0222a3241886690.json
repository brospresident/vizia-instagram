{"remainingRequest":"/Users/pantu/.npm/_npx/64608/lib/node_modules/@vizia/app-emulator/node_modules/babel-loader/lib/index.js??ref--4-1!/Users/pantu/work2/vizia-ig-app/node_modules/@vizia/destination-key-metric/src/lib/app.js","dependencies":[{"path":"/Users/pantu/work2/vizia-ig-app/node_modules/@vizia/destination-key-metric/src/lib/app.js","mtime":1664781785153},{"path":"/Users/pantu/.npm/_npx/64608/lib/node_modules/@vizia/app-emulator/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/pantu/.npm/_npx/64608/lib/node_modules/@vizia/app-emulator/node_modules/babel-loader/lib/index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:J3VzZSBzdHJpY3QnOwoKY29uc3QgbW9ycGhkb20gPSByZXF1aXJlKCdtb3JwaGRvbScpOwpjb25zdCBjcmVhdGVTdG9yZSA9IHJlcXVpcmUoJy4vY3JlYXRlLXN0b3JlJyk7CmNvbnN0IGtleU1ldHJpY0NvbXBvbmVudCA9IHJlcXVpcmUoJy4uL2NvbXBvbmVudHMva2V5LW1ldHJpYycpOwoKLyoqCiAqIEFwcCBjb250YWluZXIgY2xhc3MKICovCmNsYXNzIEFwcCB7CiAgY29uc3RydWN0b3IoKSB7CiAgICB0aGlzLnN0b3JlID0gY3JlYXRlU3RvcmUoKTsKICAgIHRoaXMuZGVzdFRhcmdldCA9IG51bGw7CiAgICB0aGlzLmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICB0aGlzLnVuc3Vic2NyaWJlRnJvbVN0b3JlID0gdGhpcy5zdG9yZS5zdWJzY3JpYmUodGhpcy5vblN0b3JlQ2hhbmdlLmJpbmQodGhpcykpOwogIH0KICB1cGRhdGVDb25maWcocHJvcHMpIHsKICAgIHRoaXMuc3RvcmUuZGlzcGF0Y2goewogICAgICB0eXBlOiAnVVBEQVRFX0NPTkZJRycsCiAgICAgIGRhdGE6IHByb3BzCiAgICB9KTsKICB9CiAgdXBkYXRlRGF0YShkYXRhKSB7CiAgICB0aGlzLnN0b3JlLmRpc3BhdGNoKHsKICAgICAgdHlwZTogJ1VQREFURV9EQVRBJywKICAgICAgZGF0YQogICAgfSk7CiAgfQogIG9uU3RvcmVDaGFuZ2UoKSB7CiAgICBjb25zdCBzdGF0ZSA9IHRoaXMuc3RvcmUuZ2V0U3RhdGUoKTsKICAgIGlmIChzdGF0ZS5jb25maWcuZGVzdFRhcmdldCAmJiB0aGlzLmRlc3RUYXJnZXQgPT09IG51bGwpIHsKICAgICAgdGhpcy5kZXN0VGFyZ2V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzdGF0ZS5jb25maWcuZGVzdFRhcmdldCk7CiAgICAgIHRoaXMuZGVzdFRhcmdldC5hcHBlbmRDaGlsZCh0aGlzLmVsKTsKICAgIH0KICAgIGlmIChzdGF0ZS5kYXRhKSB7CiAgICAgIG1vcnBoZG9tKHRoaXMuZWwsIGtleU1ldHJpY0NvbXBvbmVudChzdGF0ZSkpOwogICAgfQogIH0KICB1bm1vdW50KCkgewogICAgdGhpcy51bnN1YnNjcmliZUZyb21TdG9yZSgpOwogICAgaWYgKHRoaXMuZGVzdFRhcmdldCkgewogICAgICB0aGlzLmRlc3RUYXJnZXQucmVtb3ZlQ2hpbGQodGhpcy5lbCk7CiAgICB9CiAgfQp9Cm1vZHVsZS5leHBvcnRzID0gQXBwOw=="},{"version":3,"names":["morphdom","require","createStore","keyMetricComponent","App","constructor","store","destTarget","el","document","createElement","unsubscribeFromStore","subscribe","onStoreChange","bind","updateConfig","props","dispatch","type","data","updateData","state","getState","config","querySelector","appendChild","unmount","removeChild","module","exports"],"sources":["/Users/pantu/work2/vizia-ig-app/node_modules/@vizia/destination-key-metric/src/lib/app.js"],"sourcesContent":["'use strict';\n\nconst morphdom = require('morphdom');\n\nconst createStore = require('./create-store');\nconst keyMetricComponent = require('../components/key-metric');\n\n/**\n * App container class\n */\nclass App {\n    constructor() {\n        this.store = createStore();\n        this.destTarget = null;\n        this.el = document.createElement('div');\n        this.unsubscribeFromStore = this.store.subscribe(this.onStoreChange.bind(this));\n    }\n\n    updateConfig(props) {\n        this.store.dispatch({\n            type: 'UPDATE_CONFIG',\n            data: props\n        });\n    }\n\n    updateData(data) {\n        this.store.dispatch({\n            type: 'UPDATE_DATA',\n            data\n        });\n    }\n\n    onStoreChange() {\n        const state = this.store.getState();\n\n        if (state.config.destTarget && this.destTarget === null) {\n            this.destTarget = document.querySelector(state.config.destTarget);\n            this.destTarget.appendChild(this.el);\n        }\n\n        if (state.data) {\n            morphdom(this.el, keyMetricComponent(state));\n        }\n    }\n\n    unmount() {\n        this.unsubscribeFromStore();\n\n        if (this.destTarget) {\n            this.destTarget.removeChild(this.el);\n        }\n    }\n}\n\nmodule.exports = App;\n"],"mappings":"AAAA,YAAY;;AAEZ,MAAMA,QAAQ,GAAGC,OAAO,CAAC,UAAU,CAAC;AAEpC,MAAMC,WAAW,GAAGD,OAAO,CAAC,gBAAgB,CAAC;AAC7C,MAAME,kBAAkB,GAAGF,OAAO,CAAC,0BAA0B,CAAC;;AAE9D;AACA;AACA;AACA,MAAMG,GAAG,CAAC;EACNC,WAAW,GAAG;IACV,IAAI,CAACC,KAAK,GAAGJ,WAAW,EAAE;IAC1B,IAAI,CAACK,UAAU,GAAG,IAAI;IACtB,IAAI,CAACC,EAAE,GAAGC,QAAQ,CAACC,aAAa,CAAC,KAAK,CAAC;IACvC,IAAI,CAACC,oBAAoB,GAAG,IAAI,CAACL,KAAK,CAACM,SAAS,CAAC,IAAI,CAACC,aAAa,CAACC,IAAI,CAAC,IAAI,CAAC,CAAC;EACnF;EAEAC,YAAY,CAACC,KAAK,EAAE;IAChB,IAAI,CAACV,KAAK,CAACW,QAAQ,CAAC;MAChBC,IAAI,EAAE,eAAe;MACrBC,IAAI,EAAEH;IACV,CAAC,CAAC;EACN;EAEAI,UAAU,CAACD,IAAI,EAAE;IACb,IAAI,CAACb,KAAK,CAACW,QAAQ,CAAC;MAChBC,IAAI,EAAE,aAAa;MACnBC;IACJ,CAAC,CAAC;EACN;EAEAN,aAAa,GAAG;IACZ,MAAMQ,KAAK,GAAG,IAAI,CAACf,KAAK,CAACgB,QAAQ,EAAE;IAEnC,IAAID,KAAK,CAACE,MAAM,CAAChB,UAAU,IAAI,IAAI,CAACA,UAAU,KAAK,IAAI,EAAE;MACrD,IAAI,CAACA,UAAU,GAAGE,QAAQ,CAACe,aAAa,CAACH,KAAK,CAACE,MAAM,CAAChB,UAAU,CAAC;MACjE,IAAI,CAACA,UAAU,CAACkB,WAAW,CAAC,IAAI,CAACjB,EAAE,CAAC;IACxC;IAEA,IAAIa,KAAK,CAACF,IAAI,EAAE;MACZnB,QAAQ,CAAC,IAAI,CAACQ,EAAE,EAAEL,kBAAkB,CAACkB,KAAK,CAAC,CAAC;IAChD;EACJ;EAEAK,OAAO,GAAG;IACN,IAAI,CAACf,oBAAoB,EAAE;IAE3B,IAAI,IAAI,CAACJ,UAAU,EAAE;MACjB,IAAI,CAACA,UAAU,CAACoB,WAAW,CAAC,IAAI,CAACnB,EAAE,CAAC;IACxC;EACJ;AACJ;AAEAoB,MAAM,CAACC,OAAO,GAAGzB,GAAG"}]}