{"remainingRequest":"/Users/pantu/.npm/_npx/64608/lib/node_modules/@vizia/app-emulator/node_modules/babel-loader/lib/index.js??ref--4-1!/Users/pantu/work2/vizia-ig-app/node_modules/@formatjs/intl-unified-numberformat/dist/core.js","dependencies":[{"path":"/Users/pantu/work2/vizia-ig-app/node_modules/@formatjs/intl-unified-numberformat/dist/core.js","mtime":1664781786507},{"path":"/Users/pantu/.npm/_npx/64608/lib/node_modules/@vizia/app-emulator/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/pantu/.npm/_npx/64608/lib/node_modules/@vizia/app-emulator/node_modules/babel-loader/lib/index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKdmFyIF9fc3ByZWFkQXJyYXlzID0gdGhpcyAmJiB0aGlzLl9fc3ByZWFkQXJyYXlzIHx8IGZ1bmN0aW9uICgpIHsKICBmb3IgKHZhciBzID0gMCwgaSA9IDAsIGlsID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IGlsOyBpKyspIHMgKz0gYXJndW1lbnRzW2ldLmxlbmd0aDsKICBmb3IgKHZhciByID0gQXJyYXkocyksIGsgPSAwLCBpID0gMDsgaSA8IGlsOyBpKyspIGZvciAodmFyIGEgPSBhcmd1bWVudHNbaV0sIGogPSAwLCBqbCA9IGEubGVuZ3RoOyBqIDwgamw7IGorKywgaysrKSByW2tdID0gYVtqXTsKICByZXR1cm4gcjsKfTsKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwp2YXIgaW50bF91dGlsc18xID0gcmVxdWlyZSgiQGZvcm1hdGpzL2ludGwtdXRpbHMiKTsKdmFyIHV0aWxzXzEgPSByZXF1aXJlKCIuL3V0aWxzIik7CnZhciBkYXRhXzEgPSByZXF1aXJlKCIuL2RhdGEiKTsKdmFyIGN1cnJlbmN5RGlnaXRzRGF0YSA9IHJlcXVpcmUoIi4vY3VycmVuY3ktZGlnaXRzLmpzb24iKTsKdmFyIElMTkQgPSByZXF1aXJlKCIuL2lsbmQtbnVtYmVycy5qc29uIik7CnZhciBudW1iZXJpbmdfc3lzdGVtc19qc29uXzEgPSByZXF1aXJlKCIuL251bWJlcmluZy1zeXN0ZW1zLmpzb24iKTsKdmFyIFZBTElEX05VTUJFUklOR19TWVNURU1fTkFNRVMgPSBPYmplY3QuY3JlYXRlKG51bGwpOwpmb3IgKHZhciBfaSA9IDAsIG51bWJlcmluZ1N5c3RlbU5hbWVzXzEgPSBudW1iZXJpbmdfc3lzdGVtc19qc29uXzEubmFtZXM7IF9pIDwgbnVtYmVyaW5nU3lzdGVtTmFtZXNfMS5sZW5ndGg7IF9pKyspIHsKICB2YXIgbnUgPSBudW1iZXJpbmdTeXN0ZW1OYW1lc18xW19pXTsKICBWQUxJRF9OVU1CRVJJTkdfU1lTVEVNX05BTUVTW251XSA9IHRydWU7Cn0KdmFyIFJFU09MVkVEX09QVElPTlNfS0VZUyA9IFsnbG9jYWxlJywgJ251bWJlcmluZ1N5c3RlbScsICdzdHlsZScsICdjdXJyZW5jeScsICdjdXJyZW5jeURpc3BsYXknLCAnY3VycmVuY3lTaWduJywgJ3VuaXQnLCAndW5pdERpc3BsYXknLCAnbWluaW11bUludGVnZXJEaWdpdHMnLCAnbWluaW11bUZyYWN0aW9uRGlnaXRzJywgJ21heGltdW1GcmFjdGlvbkRpZ2l0cycsICdtaW5pbXVtU2lnbmlmaWNhbnREaWdpdHMnLCAnbWF4aW11bVNpZ25pZmljYW50RGlnaXRzJywgJ3VzZUdyb3VwaW5nJywgJ25vdGF0aW9uJywgJ2NvbXBhY3REaXNwbGF5JywgJ3NpZ25EaXNwbGF5J107CnZhciBTSE9SVEVORURfU0FDVElPTl9VTklUUyA9IGludGxfdXRpbHNfMS5TQU5DVElPTkVEX1VOSVRTLm1hcChmdW5jdGlvbiAodW5pdCkgewogIHJldHVybiB1bml0LnJlcGxhY2UoL14oLio/KS0vLCAnJyk7Cn0pOwovKioKICogVGhpcyBmb2xsb3dzIGh0dHBzOi8vdGMzOS5lcy9lY21hNDAyLyNzZWMtY2FzZS1zZW5zaXRpdml0eS1hbmQtY2FzZS1tYXBwaW5nCiAqIEBwYXJhbSBzdHIgc3RyaW5nIHRvIGNvbnZlcnQKICovCmZ1bmN0aW9uIHRvTG93ZXJDYXNlKHN0cikgewogIHJldHVybiBzdHIucmVwbGFjZSgvKFtBLVpdKS9nLCBmdW5jdGlvbiAoXywgYykgewogICAgcmV0dXJuIGMudG9Mb3dlckNhc2UoKTsKICB9KTsKfQovKioKICogaHR0cHM6Ly90YzM5LmVzL3Byb3Bvc2FsLXVuaWZpZWQtaW50bC1udW1iZXJmb3JtYXQvc2VjdGlvbjYvbG9jYWxlcy1jdXJyZW5jaWVzLXR6X3Byb3Bvc2VkX291dC5odG1sI3NlYy1pc3dlbGxmb3JtZWR1bml0aWRlbnRpZmllcgogKiBAcGFyYW0gdW5pdAogKi8KZnVuY3Rpb24gaXNXZWxsRm9ybWVkVW5pdElkZW50aWZpZXIodW5pdCkgewogIHVuaXQgPSB0b0xvd2VyQ2FzZSh1bml0KTsKICBpZiAoU0hPUlRFTkVEX1NBQ1RJT05fVU5JVFMuaW5kZXhPZih1bml0KSA+IC0xKSB7CiAgICByZXR1cm4gdHJ1ZTsKICB9CiAgdmFyIHVuaXRzID0gdW5pdC5zcGxpdCgnLXBlci0nKTsKICBpZiAodW5pdHMubGVuZ3RoICE9PSAyKSB7CiAgICByZXR1cm4gZmFsc2U7CiAgfQogIGlmIChTSE9SVEVORURfU0FDVElPTl9VTklUUy5pbmRleE9mKHVuaXRzWzBdKSA8IDAgfHwgU0hPUlRFTkVEX1NBQ1RJT05fVU5JVFMuaW5kZXhPZih1bml0c1sxXSkgPCAwKSB7CiAgICByZXR1cm4gZmFsc2U7CiAgfQogIHJldHVybiB0cnVlOwp9Ci8qKgogKiBDaGVjayBpZiBhIGZvcm1hdHRpbmcgbnVtYmVyIHdpdGggdW5pdCBpcyBzdXBwb3J0ZWQKICogQHB1YmxpYwogKiBAcGFyYW0gdW5pdCB1bml0IHRvIGNoZWNrCiAqLwpmdW5jdGlvbiBpc1VuaXRTdXBwb3J0ZWQodW5pdCkgewogIHRyeSB7CiAgICBuZXcgSW50bC5OdW1iZXJGb3JtYXQodW5kZWZpbmVkLCB7CiAgICAgIHN0eWxlOiAndW5pdCcsCiAgICAgIHVuaXQ6IHVuaXQKICAgIH0pOwogIH0gY2F0Y2ggKGUpIHsKICAgIHJldHVybiBmYWxzZTsKICB9CiAgcmV0dXJuIHRydWU7Cn0KZXhwb3J0cy5pc1VuaXRTdXBwb3J0ZWQgPSBpc1VuaXRTdXBwb3J0ZWQ7Ci8qKgogKiBDaG9wIG9mZiB0aGUgdW5pY29kZSBleHRlbnNpb24gZnJvbSB0aGUgbG9jYWxlIHN0cmluZy4KICovCmZ1bmN0aW9uIHJlbW92ZVVuaWNvZGVFeHRlbnNpb25Gcm9tTG9jYWxlKGNhbm9uaWNhbExvY2FsZSkgewogIHZhciBleHRlbnNpb25JbmRleCA9IGNhbm9uaWNhbExvY2FsZS5pbmRleE9mKCctdS0nKTsKICByZXR1cm4gZXh0ZW5zaW9uSW5kZXggPj0gMCA/IGNhbm9uaWNhbExvY2FsZS5zbGljZSgwLCBleHRlbnNpb25JbmRleCkgOiBjYW5vbmljYWxMb2NhbGU7Cn0KdmFyIF9fSU5URVJOQUxfU0xPVF9NQVBfXyA9IG5ldyBXZWFrTWFwKCk7CmZ1bmN0aW9uIGN1cnJlbmN5RGlnaXRzKGMpIHsKICByZXR1cm4gYyBpbiBjdXJyZW5jeURpZ2l0c0RhdGEgPyBjdXJyZW5jeURpZ2l0c0RhdGFbY10gOiAyOwp9CmZ1bmN0aW9uIGluaXRpYWxpemVOdW1iZXJGb3JtYXQobmYsIGxvY2FsZXMsIG9wdHMpIHsKICB2YXIgcmVxdWVzdGVkTG9jYWxlcyA9IGludGxfdXRpbHNfMS5nZXRDYW5vbmljYWxMb2NhbGVzKGxvY2FsZXMpOwogIHZhciBvcHRpb25zID0gb3B0cyA9PT0gdW5kZWZpbmVkID8gT2JqZWN0LmNyZWF0ZShudWxsKSA6IGludGxfdXRpbHNfMS50b09iamVjdChvcHRzKTsKICB2YXIgb3B0ID0gT2JqZWN0LmNyZWF0ZShudWxsKTsKICB2YXIgbWF0Y2hlciA9IGludGxfdXRpbHNfMS5nZXRPcHRpb24ob3B0aW9ucywgJ2xvY2FsZU1hdGNoZXInLCAnc3RyaW5nJywgWydiZXN0IGZpdCcsICdsb29rdXAnXSwgJ2Jlc3QgZml0Jyk7CiAgb3B0LmxvY2FsZU1hdGNoZXIgPSBtYXRjaGVyOwogIHZhciBudW1iZXJpbmdTeXN0ZW0gPSBpbnRsX3V0aWxzXzEuZ2V0T3B0aW9uKG9wdGlvbnMsICdudW1iZXJpbmdTeXN0ZW0nLCAnc3RyaW5nJywgdW5kZWZpbmVkLCB1bmRlZmluZWQpOwogIGlmIChudW1iZXJpbmdTeXN0ZW0gIT09IHVuZGVmaW5lZCAmJiAhVkFMSURfTlVNQkVSSU5HX1NZU1RFTV9OQU1FU1tudW1iZXJpbmdTeXN0ZW1dKSB7CiAgICAvLyA4LmEuIElmIG51bWJlcmluZ1N5c3RlbSBkb2VzIG5vdCBtYXRjaCB0aGUgVW5pY29kZSBMb2NhbGUgSWRlbnRpZmllciB0eXBlIG5vbnRlcm1pbmFsLAogICAgLy8gdGhyb3cgYSBSYW5nZUVycm9yIGV4Y2VwdGlvbi4KICAgIHRocm93IFJhbmdlRXJyb3IoIkludmFsaWQgbnVtYmVyaW5nU3lzdGVtczogIiArIG51bWJlcmluZ1N5c3RlbSk7CiAgfQogIG9wdC5udSA9IG51bWJlcmluZ1N5c3RlbTsKICB2YXIgbG9jYWxlRGF0YSA9IGV4cG9ydHMuVW5pZmllZE51bWJlckZvcm1hdC5sb2NhbGVEYXRhOwogIHZhciByID0gaW50bF91dGlsc18xLmNyZWF0ZVJlc29sdmVMb2NhbGUoZXhwb3J0cy5VbmlmaWVkTnVtYmVyRm9ybWF0LmdldERlZmF1bHRMb2NhbGUpKGV4cG9ydHMuVW5pZmllZE51bWJlckZvcm1hdC5hdmFpbGFibGVMb2NhbGVzLCByZXF1ZXN0ZWRMb2NhbGVzLCBvcHQsCiAgLy8gW1tSZWxldmFudEV4dGVuc2lvbktleXNdXSBzbG90LCB3aGljaCBpcyBhIGNvbnN0YW50CiAgWydudSddLCBsb2NhbGVEYXRhKTsKICB2YXIgaWxkRGF0YSA9IGxvY2FsZURhdGFbcmVtb3ZlVW5pY29kZUV4dGVuc2lvbkZyb21Mb2NhbGUoci5sb2NhbGUpXTsKICBpbnRsX3V0aWxzXzEuc2V0TXVsdGlJbnRlcm5hbFNsb3RzKF9fSU5URVJOQUxfU0xPVF9NQVBfXywgbmYsIHsKICAgIGxvY2FsZTogci5sb2NhbGUsCiAgICBkYXRhTG9jYWxlOiByLmRhdGFMb2NhbGUsCiAgICBudW1iZXJpbmdTeXN0ZW06IHIubnUsCiAgICBpbGQ6IGRhdGFfMS5leHRyYWN0SUxEKGlsZERhdGEudW5pdHMsIGlsZERhdGEuY3VycmVuY2llcywgaWxkRGF0YS5udW1iZXJzLCByLm51KQogIH0pOwogIC8vIGh0dHBzOi8vdGMzOS5lcy9wcm9wb3NhbC11bmlmaWVkLWludGwtbnVtYmVyZm9ybWF0L3NlY3Rpb24xMS9udW1iZXJmb3JtYXRfcHJvcG9zZWRfb3V0Lmh0bWwjc2VjLXNldG51bWJlcmZvcm1hdHVuaXRvcHRpb25zCiAgc2V0TnVtYmVyRm9ybWF0VW5pdE9wdGlvbnMobmYsIG9wdGlvbnMpOwogIHZhciBzdHlsZSA9IGludGxfdXRpbHNfMS5nZXRJbnRlcm5hbFNsb3QoX19JTlRFUk5BTF9TTE9UX01BUF9fLCBuZiwgJ3N0eWxlJyk7CiAgLy8gLS0tCiAgdmFyIG1uZmREZWZhdWx0OwogIHZhciBteGZkRGVmYXVsdDsKICBpZiAoc3R5bGUgPT09ICdjdXJyZW5jeScpIHsKICAgIHZhciBjdXJyZW5jeSA9IGludGxfdXRpbHNfMS5nZXRJbnRlcm5hbFNsb3QoX19JTlRFUk5BTF9TTE9UX01BUF9fLCBuZiwgJ2N1cnJlbmN5Jyk7CiAgICB2YXIgY0RpZ2l0cyA9IGN1cnJlbmN5RGlnaXRzKGN1cnJlbmN5KTsKICAgIG1uZmREZWZhdWx0ID0gY0RpZ2l0czsKICAgIG14ZmREZWZhdWx0ID0gY0RpZ2l0czsKICB9IGVsc2UgewogICAgbW5mZERlZmF1bHQgPSAwOwogICAgbXhmZERlZmF1bHQgPSBzdHlsZSA9PT0gJ3BlcmNlbnQnID8gMCA6IDM7CiAgfQogIHZhciBub3RhdGlvbiA9IGludGxfdXRpbHNfMS5nZXRPcHRpb24ob3B0aW9ucywgJ25vdGF0aW9uJywgJ3N0cmluZycsIFsnc3RhbmRhcmQnLCAnc2NpZW50aWZpYycsICdlbmdpbmVlcmluZycsICdjb21wYWN0J10sICdzdGFuZGFyZCcpOwogIGludGxfdXRpbHNfMS5zZXRJbnRlcm5hbFNsb3QoX19JTlRFUk5BTF9TTE9UX01BUF9fLCBuZiwgJ25vdGF0aW9uJywgbm90YXRpb24pOwogIGludGxfdXRpbHNfMS5zZXROdW1iZXJGb3JtYXREaWdpdE9wdGlvbnMoX19JTlRFUk5BTF9TTE9UX01BUF9fLCBuZiwgb3B0aW9ucywgbW5mZERlZmF1bHQsIG14ZmREZWZhdWx0KTsKICB2YXIgY29tcGFjdERpc3BsYXkgPSBpbnRsX3V0aWxzXzEuZ2V0T3B0aW9uKG9wdGlvbnMsICdjb21wYWN0RGlzcGxheScsICdzdHJpbmcnLCBbJ3Nob3J0JywgJ2xvbmcnXSwgJ3Nob3J0Jyk7CiAgaWYgKG5vdGF0aW9uID09PSAnY29tcGFjdCcpIHsKICAgIGludGxfdXRpbHNfMS5zZXRJbnRlcm5hbFNsb3QoX19JTlRFUk5BTF9TTE9UX01BUF9fLCBuZiwgJ2NvbXBhY3REaXNwbGF5JywgY29tcGFjdERpc3BsYXkpOwogIH0KICB2YXIgdXNlR3JvdXBpbmcgPSBpbnRsX3V0aWxzXzEuZ2V0T3B0aW9uKG9wdGlvbnMsICd1c2VHcm91cGluZycsICdib29sZWFuJywgdW5kZWZpbmVkLCB0cnVlKTsKICBpbnRsX3V0aWxzXzEuc2V0SW50ZXJuYWxTbG90KF9fSU5URVJOQUxfU0xPVF9NQVBfXywgbmYsICd1c2VHcm91cGluZycsIHVzZUdyb3VwaW5nKTsKICB2YXIgc2lnbkRpc3BsYXkgPSBpbnRsX3V0aWxzXzEuZ2V0T3B0aW9uKG9wdGlvbnMsICdzaWduRGlzcGxheScsICdzdHJpbmcnLCBbJ2F1dG8nLCAnbmV2ZXInLCAnYWx3YXlzJywgJ2V4Y2VwdFplcm8nXSwgJ2F1dG8nKTsKICBpbnRsX3V0aWxzXzEuc2V0SW50ZXJuYWxTbG90KF9fSU5URVJOQUxfU0xPVF9NQVBfXywgbmYsICdzaWduRGlzcGxheScsIHNpZ25EaXNwbGF5KTsKfQpmdW5jdGlvbiBwYXJ0aXRpb25OdW1iZXJQYXR0ZXJuKG51bWJlckZvcm1hdCwgeCkgewogIHZhciBwbCA9IGludGxfdXRpbHNfMS5nZXRJbnRlcm5hbFNsb3QoX19JTlRFUk5BTF9TTE9UX01BUF9fLCBudW1iZXJGb3JtYXQsICdwbCcpOwogIHZhciBleHBvbmVudCA9IDA7CiAgdmFyIGlsZCA9IGludGxfdXRpbHNfMS5nZXRJbnRlcm5hbFNsb3QoX19JTlRFUk5BTF9TTE9UX01BUF9fLCBudW1iZXJGb3JtYXQsICdpbGQnKTsKICB2YXIgbjsKICB2YXIgZm9ybWF0dGVkWCA9IHg7CiAgaWYgKGlzTmFOKHgpKSB7CiAgICBuID0gaWxkLnN5bWJvbHMubmFuOwogIH0gZWxzZSBpZiAoIWlzRmluaXRlKHgpKSB7CiAgICBuID0gaWxkLnN5bWJvbHMuaW5maW5pdHk7CiAgfSBlbHNlIHsKICAgIGlmIChpbnRsX3V0aWxzXzEuZ2V0SW50ZXJuYWxTbG90KF9fSU5URVJOQUxfU0xPVF9NQVBfXywgbnVtYmVyRm9ybWF0LCAnc3R5bGUnKSA9PT0gJ3BlcmNlbnQnKSB7CiAgICAgIGZvcm1hdHRlZFggKj0gMTAwOwogICAgfQogICAgZXhwb25lbnQgPSBjb21wdXRlRXhwb25lbnQobnVtYmVyRm9ybWF0LCBmb3JtYXR0ZWRYKTsKICAgIGZvcm1hdHRlZFggLz0gTWF0aC5wb3coMTAsIGV4cG9uZW50KTsKICAgIHZhciBmb3JtYXROdW1iZXJSZXN1bHQgPSBmb3JtYXROdW1iZXJUb1N0cmluZyhudW1iZXJGb3JtYXQsIGZvcm1hdHRlZFgpOwogICAgbiA9IGZvcm1hdE51bWJlclJlc3VsdC5mb3JtYXR0ZWRTdHJpbmc7CiAgICBmb3JtYXR0ZWRYID0gZm9ybWF0TnVtYmVyUmVzdWx0LnJvdW5kZWROdW1iZXI7CiAgfQogIHZhciBwYXR0ZXJuID0gZ2V0TnVtYmVyRm9ybWF0UGF0dGVybihudW1iZXJGb3JtYXQsIHgsIGV4cG9uZW50KTsKICB2YXIgcGF0dGVyblBhcnRzID0gaW50bF91dGlsc18xLnBhcnRpdGlvblBhdHRlcm4ocGF0dGVybik7CiAgdmFyIHJlc3VsdHMgPSBbXTsKICAvLyBVbnNwZWMnZWQgc3R1ZmYKICAvLyBUaGlzIGlzIHRvIGRlYWwgdy8gY2FzZXMgd2hlcmUge251bWJlcn0gaXMgaW4gdGhlIG1pZGRsZSBvZiBhIHVuaXQgcGF0dGVybgogIHZhciB1bml0U3ltYm9sQ2h1bmtJbmRleCA9IDA7CiAgdmFyIG5vdGF0aW9uID0gaW50bF91dGlsc18xLmdldEludGVybmFsU2xvdChfX0lOVEVSTkFMX1NMT1RfTUFQX18sIG51bWJlckZvcm1hdCwgJ25vdGF0aW9uJyk7CiAgZm9yICh2YXIgX2kgPSAwLCBwYXR0ZXJuUGFydHNfMSA9IHBhdHRlcm5QYXJ0czsgX2kgPCBwYXR0ZXJuUGFydHNfMS5sZW5ndGg7IF9pKyspIHsKICAgIHZhciBwYXJ0ID0gcGF0dGVyblBhcnRzXzFbX2ldOwogICAgc3dpdGNoIChwYXJ0LnR5cGUpIHsKICAgICAgY2FzZSAnbGl0ZXJhbCc6CiAgICAgICAgcmVzdWx0cy5wdXNoKHBhcnQpOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlIGludGxfdXRpbHNfMS5JbnRlcm5hbFNsb3RUb2tlbi5udW1iZXI6CiAgICAgICAgewogICAgICAgICAgaWYgKGlzTmFOKGZvcm1hdHRlZFgpKSB7CiAgICAgICAgICAgIHJlc3VsdHMucHVzaCh7CiAgICAgICAgICAgICAgdHlwZTogJ25hbicsCiAgICAgICAgICAgICAgdmFsdWU6IG4KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9IGVsc2UgaWYgKGZvcm1hdHRlZFggPT09IEluZmluaXR5IHx8IHggPT09IC1JbmZpbml0eSkgewogICAgICAgICAgICByZXN1bHRzLnB1c2goewogICAgICAgICAgICAgIHR5cGU6ICdpbmZpbml0eScsCiAgICAgICAgICAgICAgdmFsdWU6IG4KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB2YXIgX2EgPSBpbnRsX3V0aWxzXzEuZ2V0TXVsdGlJbnRlcm5hbFNsb3RzKF9fSU5URVJOQUxfU0xPVF9NQVBfXywgbnVtYmVyRm9ybWF0LCAnbnVtYmVyaW5nU3lzdGVtJywgJ3VzZUdyb3VwaW5nJywgJ25vdGF0aW9uJyksCiAgICAgICAgICAgICAgbnUgPSBfYS5udW1iZXJpbmdTeXN0ZW0sCiAgICAgICAgICAgICAgdXNlR3JvdXBpbmcgPSBfYS51c2VHcm91cGluZzsKICAgICAgICAgICAgaWYgKG51ICYmIG51IGluIElMTkQpIHsKICAgICAgICAgICAgICAvLyBSZXBsYWNlIGRpZ2l0cwogICAgICAgICAgICAgIHZhciByZXBsYWNlbWVudFRhYmxlID0gSUxORFtudV07CiAgICAgICAgICAgICAgdmFyIHJlcGxhY2VkRGlnaXRzID0gJyc7CiAgICAgICAgICAgICAgZm9yICh2YXIgX2IgPSAwLCBuXzEgPSBuOyBfYiA8IG5fMS5sZW5ndGg7IF9iKyspIHsKICAgICAgICAgICAgICAgIHZhciBkaWdpdCA9IG5fMVtfYl07CiAgICAgICAgICAgICAgICAvLyBkaWdpdCBjYW4gYmUgYC5gIGlmIGl0J3MgZnJhY3Rpb25hbAogICAgICAgICAgICAgICAgcmVwbGFjZWREaWdpdHMgKz0gcmVwbGFjZW1lbnRUYWJsZVsrZGlnaXRdIHx8IGRpZ2l0OwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBuID0gcmVwbGFjZWREaWdpdHM7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdmFyIGRlY2ltYWxTZXBJbmRleCA9IG4uaW5kZXhPZignLicpOwogICAgICAgICAgICB2YXIgaW50ZWdlciA9IHZvaWQgMDsKICAgICAgICAgICAgdmFyIGZyYWN0aW9uID0gdm9pZCAwOwogICAgICAgICAgICBpZiAoZGVjaW1hbFNlcEluZGV4ID4gMCkgewogICAgICAgICAgICAgIGludGVnZXIgPSBuLnNsaWNlKDAsIGRlY2ltYWxTZXBJbmRleCk7CiAgICAgICAgICAgICAgZnJhY3Rpb24gPSBuLnNsaWNlKGRlY2ltYWxTZXBJbmRleCArIDEpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIGludGVnZXIgPSBuOwogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vIEZvciBjb21wYWN0LCBkZWZhdWx0IGdyb3VwaW5nIHN0cmF0ZWd5IGlzIG1pbjIKICAgICAgICAgICAgaWYgKHVzZUdyb3VwaW5nICYmIChub3RhdGlvbiA9PT0gJ2NvbXBhY3QnID8gaW50ZWdlci5sZW5ndGggPiA0IDogdHJ1ZSkpIHsKICAgICAgICAgICAgICB2YXIgZ3JvdXBTZXBTeW1ib2wgPSBpbGQuc3ltYm9scy5ncm91cDsKICAgICAgICAgICAgICB2YXIgZ3JvdXBzID0gW107CiAgICAgICAgICAgICAgLy8gQXNzdW1pbmcgdGhhdCB0aGUgZ3JvdXAgc2VwYXJhdG9yIGlzIGFsd2F5cyBpbnNlcnRlZCBiZXR3ZWVuIGV2ZXJ5IDMgZGlnaXRzLgogICAgICAgICAgICAgIHZhciBpID0gaW50ZWdlci5sZW5ndGggLSAzOwogICAgICAgICAgICAgIGZvciAoOyBpID4gMDsgaSAtPSAzKSB7CiAgICAgICAgICAgICAgICBncm91cHMucHVzaChpbnRlZ2VyLnNsaWNlKGksIGkgKyAzKSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGdyb3Vwcy5wdXNoKGludGVnZXIuc2xpY2UoMCwgaSArIDMpKTsKICAgICAgICAgICAgICB3aGlsZSAoZ3JvdXBzLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgIHZhciBpbnRlZ2VyR3JvdXAgPSBncm91cHMucG9wKCk7CiAgICAgICAgICAgICAgICByZXN1bHRzLnB1c2goewogICAgICAgICAgICAgICAgICB0eXBlOiAnaW50ZWdlcicsCiAgICAgICAgICAgICAgICAgIHZhbHVlOiBpbnRlZ2VyR3JvdXAKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgaWYgKGdyb3Vwcy5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICAgIHJlc3VsdHMucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2dyb3VwJywKICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZ3JvdXBTZXBTeW1ib2wKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHJlc3VsdHMucHVzaCh7CiAgICAgICAgICAgICAgICB0eXBlOiAnaW50ZWdlcicsCiAgICAgICAgICAgICAgICB2YWx1ZTogaW50ZWdlcgogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChmcmFjdGlvbiAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgcmVzdWx0cy5wdXNoKHsKICAgICAgICAgICAgICAgIHR5cGU6ICdkZWNpbWFsJywKICAgICAgICAgICAgICAgIHZhbHVlOiBpbGQuc3ltYm9scy5kZWNpbWFsCiAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgdHlwZTogJ2ZyYWN0aW9uJywKICAgICAgICAgICAgICAgIHZhbHVlOiBmcmFjdGlvbgogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICAgIGNhc2UgaW50bF91dGlsc18xLkludGVybmFsU2xvdFRva2VuLnBsdXNTaWduOgogICAgICAgIHJlc3VsdHMucHVzaCh7CiAgICAgICAgICB0eXBlOiAncGx1c1NpZ24nLAogICAgICAgICAgdmFsdWU6IGlsZC5zeW1ib2xzLnBsdXNTaWduCiAgICAgICAgfSk7CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgaW50bF91dGlsc18xLkludGVybmFsU2xvdFRva2VuLm1pbnVzU2lnbjoKICAgICAgICByZXN1bHRzLnB1c2goewogICAgICAgICAgdHlwZTogJ21pbnVzU2lnbicsCiAgICAgICAgICB2YWx1ZTogaWxkLnN5bWJvbHMubWludXNTaWduCiAgICAgICAgfSk7CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgaW50bF91dGlsc18xLkludGVybmFsU2xvdFRva2VuLmNvbXBhY3RTeW1ib2w6CiAgICAgICAgewogICAgICAgICAgdmFyIHN0eWxlID0gaW50bF91dGlsc18xLmdldEludGVybmFsU2xvdChfX0lOVEVSTkFMX1NMT1RfTUFQX18sIG51bWJlckZvcm1hdCwgJ3N0eWxlJyk7CiAgICAgICAgICB2YXIgY29tcGFjdERhdGEgPSB2b2lkIDA7CiAgICAgICAgICBpZiAoc3R5bGUgPT09ICdjdXJyZW5jeScpIHsKICAgICAgICAgICAgY29tcGFjdERhdGEgPSBpbGQuY3VycmVuY3kuY29tcGFjdFNob3J0OwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgY29tcGFjdERhdGEgPSBpbGQuZGVjaW1hbC5jb21wYWN0U2hvcnQ7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoY29tcGFjdERhdGEpIHsKICAgICAgICAgICAgcmVzdWx0cy5wdXNoKHsKICAgICAgICAgICAgICB0eXBlOiAnY29tcGFjdCcsCiAgICAgICAgICAgICAgdmFsdWU6IHNlbGVjdFBsdXJhbChwbCwgeCwgY29tcGFjdERhdGFbU3RyaW5nKE1hdGgucG93KDEwLCBleHBvbmVudCkpXSkKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICAgIGNhc2UgaW50bF91dGlsc18xLkludGVybmFsU2xvdFRva2VuLmNvbXBhY3ROYW1lOgogICAgICAgIHsKICAgICAgICAgIHZhciBzdHlsZSA9IGludGxfdXRpbHNfMS5nZXRJbnRlcm5hbFNsb3QoX19JTlRFUk5BTF9TTE9UX01BUF9fLCBudW1iZXJGb3JtYXQsICdzdHlsZScpOwogICAgICAgICAgdmFyIGN1cnJlbmN5RGlzcGxheSA9IGludGxfdXRpbHNfMS5nZXRJbnRlcm5hbFNsb3QoX19JTlRFUk5BTF9TTE9UX01BUF9fLCBudW1iZXJGb3JtYXQsICdjdXJyZW5jeURpc3BsYXknKTsKICAgICAgICAgIHZhciBjb21wYWN0RGF0YSA9IHZvaWQgMDsKICAgICAgICAgIGlmIChzdHlsZSA9PT0gJ2N1cnJlbmN5JyAmJiBjdXJyZW5jeURpc3BsYXkgIT09ICduYW1lJykgewogICAgICAgICAgICBjb21wYWN0RGF0YSA9IGlsZC5jdXJyZW5jeS5jb21wYWN0TG9uZyB8fCBpbGQuY3VycmVuY3kuY29tcGFjdFNob3J0OwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgY29tcGFjdERhdGEgPSBpbGQuZGVjaW1hbC5jb21wYWN0TG9uZyB8fCBpbGQuZGVjaW1hbC5jb21wYWN0U2hvcnQ7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoY29tcGFjdERhdGEpIHsKICAgICAgICAgICAgcmVzdWx0cy5wdXNoKHsKICAgICAgICAgICAgICB0eXBlOiAnY29tcGFjdCcsCiAgICAgICAgICAgICAgdmFsdWU6IHNlbGVjdFBsdXJhbChwbCwgeCwgY29tcGFjdERhdGFbU3RyaW5nKE1hdGgucG93KDEwLCBleHBvbmVudCkpXSkKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICAgIGNhc2UgaW50bF91dGlsc18xLkludGVybmFsU2xvdFRva2VuLnNjaWVudGlmaWNTZXBhcmF0b3I6CiAgICAgICAgcmVzdWx0cy5wdXNoKHsKICAgICAgICAgIHR5cGU6ICdleHBvbmVudFNlcGFyYXRvcicsCiAgICAgICAgICB2YWx1ZTogaWxkLnN5bWJvbHMuZXhwb25lbnRpYWwKICAgICAgICB9KTsKICAgICAgICBicmVhazsKICAgICAgY2FzZSBpbnRsX3V0aWxzXzEuSW50ZXJuYWxTbG90VG9rZW4uc2NpZW50aWZpY0V4cG9uZW50OgogICAgICAgIHsKICAgICAgICAgIGlmIChleHBvbmVudCA8IDApIHsKICAgICAgICAgICAgcmVzdWx0cy5wdXNoKHsKICAgICAgICAgICAgICB0eXBlOiAnZXhwb25lbnRNaW51c1NpZ24nLAogICAgICAgICAgICAgIHZhbHVlOiBpbGQuc3ltYm9scy5taW51c1NpZ24KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGV4cG9uZW50ID0gLWV4cG9uZW50OwogICAgICAgICAgfQogICAgICAgICAgdmFyIGV4cG9uZW50UmVzdWx0ID0gdXRpbHNfMS50b1Jhd0ZpeGVkKGV4cG9uZW50LCAwLCAwKTsKICAgICAgICAgIHJlc3VsdHMucHVzaCh7CiAgICAgICAgICAgIHR5cGU6ICdleHBvbmVudEludGVnZXInLAogICAgICAgICAgICB2YWx1ZTogZXhwb25lbnRSZXN1bHQuZm9ybWF0dGVkU3RyaW5nCiAgICAgICAgICB9KTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgICAgY2FzZSBpbnRsX3V0aWxzXzEuSW50ZXJuYWxTbG90VG9rZW4ucGVyY2VudFNpZ246CiAgICAgICAgcmVzdWx0cy5wdXNoKHsKICAgICAgICAgIHR5cGU6ICdwZXJjZW50U2lnbicsCiAgICAgICAgICB2YWx1ZTogaWxkLnN5bWJvbHMucGVyY2VudFNpZ24KICAgICAgICB9KTsKICAgICAgICBicmVhazsKICAgICAgY2FzZSBpbnRsX3V0aWxzXzEuSW50ZXJuYWxTbG90VG9rZW4udW5pdFN5bWJvbDoKICAgICAgY2FzZSBpbnRsX3V0aWxzXzEuSW50ZXJuYWxTbG90VG9rZW4udW5pdE5hcnJvd1N5bWJvbDoKICAgICAgY2FzZSBpbnRsX3V0aWxzXzEuSW50ZXJuYWxTbG90VG9rZW4udW5pdE5hbWU6CiAgICAgICAgewogICAgICAgICAgdmFyIHN0eWxlID0gaW50bF91dGlsc18xLmdldEludGVybmFsU2xvdChfX0lOVEVSTkFMX1NMT1RfTUFQX18sIG51bWJlckZvcm1hdCwgJ3N0eWxlJyk7CiAgICAgICAgICBpZiAoc3R5bGUgPT09ICd1bml0JykgewogICAgICAgICAgICB2YXIgdW5pdCA9IGludGxfdXRpbHNfMS5nZXRJbnRlcm5hbFNsb3QoX19JTlRFUk5BTF9TTE9UX01BUF9fLCBudW1iZXJGb3JtYXQsICd1bml0Jyk7CiAgICAgICAgICAgIHZhciB1bml0U3ltYm9scyA9IGlsZC51bml0U3ltYm9sc1t1bml0XTsKICAgICAgICAgICAgdmFyIG11ID0gc2VsZWN0UGx1cmFsKHBsLCB4LCB1bml0U3ltYm9sc1twYXJ0LnR5cGVdKVt1bml0U3ltYm9sQ2h1bmtJbmRleF07CiAgICAgICAgICAgIHJlc3VsdHMucHVzaCh7CiAgICAgICAgICAgICAgdHlwZTogJ3VuaXQnLAogICAgICAgICAgICAgIHZhbHVlOiBtdQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgdW5pdFN5bWJvbENodW5rSW5kZXgrKzsKICAgICAgICAgIH0KICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgICAgY2FzZSBpbnRsX3V0aWxzXzEuSW50ZXJuYWxTbG90VG9rZW4uY3VycmVuY3lDb2RlOgogICAgICAgIHsKICAgICAgICAgIHZhciBjdXJyZW5jeSA9IGludGxfdXRpbHNfMS5nZXRJbnRlcm5hbFNsb3QoX19JTlRFUk5BTF9TTE9UX01BUF9fLCBudW1iZXJGb3JtYXQsICdjdXJyZW5jeScpOwogICAgICAgICAgcmVzdWx0cy5wdXNoKHsKICAgICAgICAgICAgdHlwZTogJ2N1cnJlbmN5JywKICAgICAgICAgICAgdmFsdWU6IGN1cnJlbmN5CiAgICAgICAgICB9KTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgICAgY2FzZSBpbnRsX3V0aWxzXzEuSW50ZXJuYWxTbG90VG9rZW4uY3VycmVuY3lTeW1ib2w6CiAgICAgICAgewogICAgICAgICAgdmFyIGN1cnJlbmN5ID0gaW50bF91dGlsc18xLmdldEludGVybmFsU2xvdChfX0lOVEVSTkFMX1NMT1RfTUFQX18sIG51bWJlckZvcm1hdCwgJ2N1cnJlbmN5Jyk7CiAgICAgICAgICByZXN1bHRzLnB1c2goewogICAgICAgICAgICB0eXBlOiAnY3VycmVuY3knLAogICAgICAgICAgICB2YWx1ZTogaWxkLmN1cnJlbmN5U3ltYm9sc1tjdXJyZW5jeV0uY3VycmVuY3lTeW1ib2wgfHwgY3VycmVuY3kKICAgICAgICAgIH0pOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICBjYXNlIGludGxfdXRpbHNfMS5JbnRlcm5hbFNsb3RUb2tlbi5jdXJyZW5jeU5hcnJvd1N5bWJvbDoKICAgICAgICB7CiAgICAgICAgICB2YXIgY3VycmVuY3kgPSBpbnRsX3V0aWxzXzEuZ2V0SW50ZXJuYWxTbG90KF9fSU5URVJOQUxfU0xPVF9NQVBfXywgbnVtYmVyRm9ybWF0LCAnY3VycmVuY3knKTsKICAgICAgICAgIHJlc3VsdHMucHVzaCh7CiAgICAgICAgICAgIHR5cGU6ICdjdXJyZW5jeScsCiAgICAgICAgICAgIHZhbHVlOiBpbGQuY3VycmVuY3lTeW1ib2xzW2N1cnJlbmN5XS5jdXJyZW5jeU5hcnJvd1N5bWJvbCB8fCBjdXJyZW5jeQogICAgICAgICAgfSk7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICAgIGNhc2UgaW50bF91dGlsc18xLkludGVybmFsU2xvdFRva2VuLmN1cnJlbmN5TmFtZToKICAgICAgICB7CiAgICAgICAgICB2YXIgY3VycmVuY3kgPSBpbnRsX3V0aWxzXzEuZ2V0SW50ZXJuYWxTbG90KF9fSU5URVJOQUxfU0xPVF9NQVBfXywgbnVtYmVyRm9ybWF0LCAnY3VycmVuY3knKTsKICAgICAgICAgIHZhciBjZCA9IHNlbGVjdFBsdXJhbChwbCwgeCwgaWxkLmN1cnJlbmN5U3ltYm9sc1tjdXJyZW5jeV0uY3VycmVuY3lOYW1lKTsKICAgICAgICAgIHJlc3VsdHMucHVzaCh7CiAgICAgICAgICAgIHR5cGU6ICdjdXJyZW5jeScsCiAgICAgICAgICAgIHZhbHVlOiBjZAogICAgICAgICAgfSk7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICAgIGRlZmF1bHQ6CiAgICAgICAgdGhyb3cgRXJyb3IoInVucmVjb2duaXplZCBwYXR0ZXJuIHBhcnQgXCIiICsgcGFydC50eXBlICsgIlwiIGluIFwiIiArIHBhdHRlcm4gKyAiXCIiKTsKICAgIH0KICB9CiAgcmV0dXJuIHJlc3VsdHM7Cn0KZnVuY3Rpb24gZm9ybWF0TnVtZXJpY1RvUGFydHMobnVtYmVyRm9ybWF0LCB4KSB7CiAgcmV0dXJuIHBhcnRpdGlvbk51bWJlclBhdHRlcm4obnVtYmVyRm9ybWF0LCB4KTsKfQpleHBvcnRzLlVuaWZpZWROdW1iZXJGb3JtYXQgPSBmdW5jdGlvbiBOdW1iZXJGb3JtYXQobG9jYWxlcywgb3B0aW9ucykgewogIC8vIENhbm5vdCB1c2UgYG5ldy50YXJnZXRgIGJjIG9mIElFMTEgJiBUUyB0cmFuc3BpbGVzIGl0IHRvIHNvbWV0aGluZyBlbHNlCiAgaWYgKCF0aGlzIHx8ICEodGhpcyBpbnN0YW5jZW9mIGV4cG9ydHMuVW5pZmllZE51bWJlckZvcm1hdCkpIHsKICAgIHJldHVybiBuZXcgZXhwb3J0cy5VbmlmaWVkTnVtYmVyRm9ybWF0KGxvY2FsZXMsIG9wdGlvbnMpOwogIH0KICBpbml0aWFsaXplTnVtYmVyRm9ybWF0KHRoaXMsIGxvY2FsZXMsIG9wdGlvbnMpOwogIHZhciBpbGREYXRhID0gZXhwb3J0cy5VbmlmaWVkTnVtYmVyRm9ybWF0LmxvY2FsZURhdGFbcmVtb3ZlVW5pY29kZUV4dGVuc2lvbkZyb21Mb2NhbGUoaW50bF91dGlsc18xLmdldEludGVybmFsU2xvdChfX0lOVEVSTkFMX1NMT1RfTUFQX18sIHRoaXMsICdsb2NhbGUnKSldOwogIGludGxfdXRpbHNfMS5zZXRNdWx0aUludGVybmFsU2xvdHMoX19JTlRFUk5BTF9TTE9UX01BUF9fLCB0aGlzLCB7CiAgICBwbDogbmV3IEludGwuUGx1cmFsUnVsZXMobG9jYWxlcywgaW50bF91dGlsc18xLmdldE11bHRpSW50ZXJuYWxTbG90cyhfX0lOVEVSTkFMX1NMT1RfTUFQX18sIHRoaXMsICdtaW5pbXVtRnJhY3Rpb25EaWdpdHMnLCAnbWF4aW11bUZyYWN0aW9uRGlnaXRzJywgJ21pbmltdW1JbnRlZ2VyRGlnaXRzJywgJ21pbmltdW1TaWduaWZpY2FudERpZ2l0cycsICdtYXhpbXVtU2lnbmlmaWNhbnREaWdpdHMnLCAncm91bmRpbmdUeXBlJywgJ25vdGF0aW9uJykpLAogICAgcGF0dGVybnM6IG5ldyBkYXRhXzEuUGF0dGVybnMoaWxkRGF0YS51bml0cywgaWxkRGF0YS5jdXJyZW5jaWVzLCBpbGREYXRhLm51bWJlcnMsIGludGxfdXRpbHNfMS5nZXRJbnRlcm5hbFNsb3QoX19JTlRFUk5BTF9TTE9UX01BUF9fLCB0aGlzLCAnbnVtYmVyaW5nU3lzdGVtJyksIGludGxfdXRpbHNfMS5nZXRJbnRlcm5hbFNsb3QoX19JTlRFUk5BTF9TTE9UX01BUF9fLCB0aGlzLCAndW5pdCcpLCBpbnRsX3V0aWxzXzEuZ2V0SW50ZXJuYWxTbG90KF9fSU5URVJOQUxfU0xPVF9NQVBfXywgdGhpcywgJ2N1cnJlbmN5JyksIGludGxfdXRpbHNfMS5nZXRJbnRlcm5hbFNsb3QoX19JTlRFUk5BTF9TTE9UX01BUF9fLCB0aGlzLCAnY3VycmVuY3lTaWduJykpCiAgfSk7Cn07Ci8qCiAgMTcgRUNNQVNjcmlwdCBTdGFuZGFyZCBCdWlsdC1pbiBPYmplY3RzOgogICAgRXZlcnkgYnVpbHQtaW4gRnVuY3Rpb24gb2JqZWN0LCBpbmNsdWRpbmcgY29uc3RydWN0b3JzLCB0aGF0IGlzIG5vdAogICAgaWRlbnRpZmllZCBhcyBhbiBhbm9ueW1vdXMgZnVuY3Rpb24gaGFzIGEgbmFtZSBwcm9wZXJ0eSB3aG9zZSB2YWx1ZQogICAgaXMgYSBTdHJpbmcuCgogICAgVW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQsIHRoZSBuYW1lIHByb3BlcnR5IG9mIGEgYnVpbHQtaW4gRnVuY3Rpb24KICAgIG9iamVjdCwgaWYgaXQgZXhpc3RzLCBoYXMgdGhlIGF0dHJpYnV0ZXMgeyBbW1dyaXRhYmxlXV06IGZhbHNlLAogICAgW1tFbnVtZXJhYmxlXV06IGZhbHNlLCBbW0NvbmZpZ3VyYWJsZV1dOiB0cnVlIH0uCiovCmZ1bmN0aW9uIGRlZmluZVByb3BlcnR5KHRhcmdldCwgbmFtZSwgX2EpIHsKICB2YXIgdmFsdWUgPSBfYS52YWx1ZTsKICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBuYW1lLCB7CiAgICBjb25maWd1cmFibGU6IHRydWUsCiAgICBlbnVtZXJhYmxlOiBmYWxzZSwKICAgIHdyaXRhYmxlOiB0cnVlLAogICAgdmFsdWU6IHZhbHVlCiAgfSk7Cn0KZGVmaW5lUHJvcGVydHkoZXhwb3J0cy5VbmlmaWVkTnVtYmVyRm9ybWF0LnByb3RvdHlwZSwgJ2Zvcm1hdFRvUGFydHMnLCB7CiAgdmFsdWU6IGZ1bmN0aW9uIGZvcm1hdFRvUGFydHMoeCkgewogICAgcmV0dXJuIGZvcm1hdE51bWVyaWNUb1BhcnRzKHRoaXMsIHRvTnVtZXJpYyh4KSk7CiAgfQp9KTsKZGVmaW5lUHJvcGVydHkoZXhwb3J0cy5VbmlmaWVkTnVtYmVyRm9ybWF0LnByb3RvdHlwZSwgJ3Jlc29sdmVkT3B0aW9ucycsIHsKICB2YWx1ZTogZnVuY3Rpb24gcmVzb2x2ZWRPcHRpb25zKCkgewogICAgdmFyIHNsb3RzID0gaW50bF91dGlsc18xLmdldE11bHRpSW50ZXJuYWxTbG90cy5hcHBseSh2b2lkIDAsIF9fc3ByZWFkQXJyYXlzKFtfX0lOVEVSTkFMX1NMT1RfTUFQX18sIHRoaXNdLCBSRVNPTFZFRF9PUFRJT05TX0tFWVMpKTsKICAgIHZhciBybyA9IHt9OwogICAgZm9yICh2YXIgX2kgPSAwLCBSRVNPTFZFRF9PUFRJT05TX0tFWVNfMSA9IFJFU09MVkVEX09QVElPTlNfS0VZUzsgX2kgPCBSRVNPTFZFRF9PUFRJT05TX0tFWVNfMS5sZW5ndGg7IF9pKyspIHsKICAgICAgdmFyIGtleSA9IFJFU09MVkVEX09QVElPTlNfS0VZU18xW19pXTsKICAgICAgdmFyIHZhbHVlID0gc2xvdHNba2V5XTsKICAgICAgaWYgKHZhbHVlICE9PSB1bmRlZmluZWQpIHsKICAgICAgICByb1trZXldID0gdmFsdWU7CiAgICAgIH0KICAgIH0KICAgIHJldHVybiBybzsKICB9Cn0pOwp2YXIgZm9ybWF0RGVzY3JpcHRvciA9IHsKICBlbnVtZXJhYmxlOiBmYWxzZSwKICBjb25maWd1cmFibGU6IHRydWUsCiAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICBpZiAodHlwZW9mIHRoaXMgIT09ICdvYmplY3QnIHx8ICEodGhpcyBpbnN0YW5jZW9mIGV4cG9ydHMuVW5pZmllZE51bWJlckZvcm1hdCkpIHsKICAgICAgdGhyb3cgVHlwZUVycm9yKCdJbnRsLk51bWJlckZvcm1hdCBmb3JtYXQgcHJvcGVydHkgYWNjZXNzb3IgY2FsbGVkIG9uIGltY29tcGF0aWJsZSByZWNlaXZlcicpOwogICAgfQogICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby10aGlzLWFsaWFzCiAgICB2YXIgbnVtYmVyRm9ybWF0ID0gdGhpczsKICAgIHZhciBib3VuZEZvcm1hdCA9IGludGxfdXRpbHNfMS5nZXRJbnRlcm5hbFNsb3QoX19JTlRFUk5BTF9TTE9UX01BUF9fLCB0aGlzLCAnYm91bmRGb3JtYXQnKTsKICAgIGlmIChib3VuZEZvcm1hdCA9PT0gdW5kZWZpbmVkKSB7CiAgICAgIC8vIGh0dHBzOi8vdGMzOS5lcy9wcm9wb3NhbC11bmlmaWVkLWludGwtbnVtYmVyZm9ybWF0L3NlY3Rpb24xMS9udW1iZXJmb3JtYXRfZGlmZl9vdXQuaHRtbCNzZWMtbnVtYmVyLWZvcm1hdC1mdW5jdGlvbnMKICAgICAgYm91bmRGb3JtYXQgPSBmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgICAvLyBUT0RPOiBjaGVjayBiaWdpbnQKICAgICAgICB2YXIgeCA9IHRvTnVtZXJpYyh2YWx1ZSk7CiAgICAgICAgcmV0dXJuIG51bWJlckZvcm1hdC5mb3JtYXRUb1BhcnRzKHgpLm1hcChmdW5jdGlvbiAoeCkgewogICAgICAgICAgcmV0dXJuIHgudmFsdWU7CiAgICAgICAgfSkuam9pbignJyk7CiAgICAgIH07CiAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS90YzM5L3Rlc3QyNjIvYmxvYi9tYXN0ZXIvdGVzdC9pbnRsNDAyL051bWJlckZvcm1hdC9wcm90b3R5cGUvZm9ybWF0L2Zvcm1hdC1mdW5jdGlvbi1uYW1lLmpzCiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShib3VuZEZvcm1hdCwgJ25hbWUnLCB7CiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLAogICAgICAgIGVudW1lcmFibGU6IGZhbHNlLAogICAgICAgIHdyaXRhYmxlOiBmYWxzZSwKICAgICAgICB2YWx1ZTogJycKICAgICAgfSk7CiAgICAgIGludGxfdXRpbHNfMS5zZXRJbnRlcm5hbFNsb3QoX19JTlRFUk5BTF9TTE9UX01BUF9fLCB0aGlzLCAnYm91bmRGb3JtYXQnLCBib3VuZEZvcm1hdCk7CiAgICB9CiAgICByZXR1cm4gYm91bmRGb3JtYXQ7CiAgfQp9OwovLyBodHRwczovL2dpdGh1Yi5jb20vdGMzOS90ZXN0MjYyL2Jsb2IvbWFzdGVyL3Rlc3QvaW50bDQwMi9OdW1iZXJGb3JtYXQvcHJvdG90eXBlL2Zvcm1hdC9uYW1lLmpzCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShmb3JtYXREZXNjcmlwdG9yLmdldCwgJ25hbWUnLCB7CiAgY29uZmlndXJhYmxlOiB0cnVlLAogIGVudW1lcmFibGU6IGZhbHNlLAogIHdyaXRhYmxlOiBmYWxzZSwKICB2YWx1ZTogJ2dldCBmb3JtYXQnCn0pOwpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cy5VbmlmaWVkTnVtYmVyRm9ybWF0LnByb3RvdHlwZSwgJ2Zvcm1hdCcsIGZvcm1hdERlc2NyaXB0b3IpOwovLyBTdGF0aWMgcHJvcGVydGllcwpkZWZpbmVQcm9wZXJ0eShleHBvcnRzLlVuaWZpZWROdW1iZXJGb3JtYXQsICdzdXBwb3J0ZWRMb2NhbGVzT2YnLCB7CiAgdmFsdWU6IGZ1bmN0aW9uIHN1cHBvcnRlZExvY2FsZXNPZihsb2NhbGVzLCBvcHRpb25zKSB7CiAgICByZXR1cm4gaW50bF91dGlsc18xLnN1cHBvcnRlZExvY2FsZXMoZXhwb3J0cy5VbmlmaWVkTnVtYmVyRm9ybWF0LmF2YWlsYWJsZUxvY2FsZXMsIGludGxfdXRpbHNfMS5nZXRDYW5vbmljYWxMb2NhbGVzKGxvY2FsZXMpLCBvcHRpb25zKTsKICB9Cn0pOwpleHBvcnRzLlVuaWZpZWROdW1iZXJGb3JtYXQuX19hZGRMb2NhbGVEYXRhID0gZnVuY3Rpb24gX19hZGRMb2NhbGVEYXRhKCkgewogIHZhciBkYXRhID0gW107CiAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHsKICAgIGRhdGFbX2ldID0gYXJndW1lbnRzW19pXTsKICB9CiAgZm9yICh2YXIgX2EgPSAwLCBkYXRhXzIgPSBkYXRhOyBfYSA8IGRhdGFfMi5sZW5ndGg7IF9hKyspIHsKICAgIHZhciBkYXR1bSA9IGRhdGFfMltfYV07CiAgICB2YXIgYXZhaWxhYmxlTG9jYWxlcyA9IE9iamVjdC5rZXlzKF9fc3ByZWFkQXJyYXlzKGRhdHVtLmF2YWlsYWJsZUxvY2FsZXMsIE9iamVjdC5rZXlzKGRhdHVtLmFsaWFzZXMpLCBPYmplY3Qua2V5cyhkYXR1bS5wYXJlbnRMb2NhbGVzKSkucmVkdWNlKGZ1bmN0aW9uIChhbGwsIGspIHsKICAgICAgYWxsW2tdID0gdHJ1ZTsKICAgICAgcmV0dXJuIGFsbDsKICAgIH0sIHt9KSk7CiAgICBmb3IgKHZhciBfYiA9IDAsIGF2YWlsYWJsZUxvY2FsZXNfMSA9IGF2YWlsYWJsZUxvY2FsZXM7IF9iIDwgYXZhaWxhYmxlTG9jYWxlc18xLmxlbmd0aDsgX2IrKykgewogICAgICB2YXIgbG9jYWxlID0gYXZhaWxhYmxlTG9jYWxlc18xW19iXTsKICAgICAgdHJ5IHsKICAgICAgICBleHBvcnRzLlVuaWZpZWROdW1iZXJGb3JtYXQubG9jYWxlRGF0YVtsb2NhbGVdID0gaW50bF91dGlsc18xLnVucGFja0RhdGEobG9jYWxlLCBkYXR1bSk7CiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAvLyBJZ25vcmUgaWYgd2UgZ290IG5vIGRhdGEKICAgICAgfQogICAgfQogIH0KICBleHBvcnRzLlVuaWZpZWROdW1iZXJGb3JtYXQuYXZhaWxhYmxlTG9jYWxlcyA9IE9iamVjdC5rZXlzKGV4cG9ydHMuVW5pZmllZE51bWJlckZvcm1hdC5sb2NhbGVEYXRhKTsKICBpZiAoIWV4cG9ydHMuVW5pZmllZE51bWJlckZvcm1hdC5fX2RlZmF1bHRMb2NhbGUpIHsKICAgIGV4cG9ydHMuVW5pZmllZE51bWJlckZvcm1hdC5fX2RlZmF1bHRMb2NhbGUgPSBleHBvcnRzLlVuaWZpZWROdW1iZXJGb3JtYXQuYXZhaWxhYmxlTG9jYWxlc1swXTsKICB9Cn07CmV4cG9ydHMuVW5pZmllZE51bWJlckZvcm1hdC5fX2RlZmF1bHRMb2NhbGUgPSAnZW4nOwpleHBvcnRzLlVuaWZpZWROdW1iZXJGb3JtYXQubG9jYWxlRGF0YSA9IHt9OwpleHBvcnRzLlVuaWZpZWROdW1iZXJGb3JtYXQuYXZhaWxhYmxlTG9jYWxlcyA9IFtdOwpleHBvcnRzLlVuaWZpZWROdW1iZXJGb3JtYXQuZ2V0RGVmYXVsdExvY2FsZSA9IGZ1bmN0aW9uICgpIHsKICByZXR1cm4gZXhwb3J0cy5VbmlmaWVkTnVtYmVyRm9ybWF0Ll9fZGVmYXVsdExvY2FsZTsKfTsKZXhwb3J0cy5VbmlmaWVkTnVtYmVyRm9ybWF0LnBvbHlmaWxsZWQgPSB0cnVlOwpmdW5jdGlvbiBzZXROdW1iZXJGb3JtYXRVbml0T3B0aW9ucyhuZiwgb3B0aW9ucykgewogIGlmIChvcHRpb25zID09PSB2b2lkIDApIHsKICAgIG9wdGlvbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpOwogIH0KICAvLyBodHRwczovL3RjMzkuZXMvcHJvcG9zYWwtdW5pZmllZC1pbnRsLW51bWJlcmZvcm1hdC9zZWN0aW9uMTEvbnVtYmVyZm9ybWF0X3Byb3Bvc2VkX291dC5odG1sI3NlYy1zZXRudW1iZXJmb3JtYXR1bml0b3B0aW9ucwogIHZhciBzdHlsZSA9IGludGxfdXRpbHNfMS5nZXRPcHRpb24ob3B0aW9ucywgJ3N0eWxlJywgJ3N0cmluZycsIFsnZGVjaW1hbCcsICdwZXJjZW50JywgJ2N1cnJlbmN5JywgJ3VuaXQnXSwgJ2RlY2ltYWwnKTsKICBpbnRsX3V0aWxzXzEuc2V0SW50ZXJuYWxTbG90KF9fSU5URVJOQUxfU0xPVF9NQVBfXywgbmYsICdzdHlsZScsIHN0eWxlKTsKICB2YXIgY3VycmVuY3kgPSBpbnRsX3V0aWxzXzEuZ2V0T3B0aW9uKG9wdGlvbnMsICdjdXJyZW5jeScsICdzdHJpbmcnLCB1bmRlZmluZWQsIHVuZGVmaW5lZCk7CiAgaWYgKGN1cnJlbmN5ICE9PSB1bmRlZmluZWQgJiYgIWludGxfdXRpbHNfMS5pc1dlbGxGb3JtZWRDdXJyZW5jeUNvZGUoY3VycmVuY3kpKSB7CiAgICB0aHJvdyBSYW5nZUVycm9yKCdNYWxmb3JtZWQgY3VycmVuY3kgY29kZScpOwogIH0KICB2YXIgY3VycmVuY3lEaXNwbGF5ID0gaW50bF91dGlsc18xLmdldE9wdGlvbihvcHRpb25zLCAnY3VycmVuY3lEaXNwbGF5JywgJ3N0cmluZycsIFsnY29kZScsICdzeW1ib2wnLCAnbmFycm93U3ltYm9sJywgJ25hbWUnXSwgJ3N5bWJvbCcpOwogIHZhciBjdXJyZW5jeVNpZ24gPSBpbnRsX3V0aWxzXzEuZ2V0T3B0aW9uKG9wdGlvbnMsICdjdXJyZW5jeVNpZ24nLCAnc3RyaW5nJywgWydzdGFuZGFyZCcsICdhY2NvdW50aW5nJ10sICdzdGFuZGFyZCcpOwogIHZhciB1bml0ID0gaW50bF91dGlsc18xLmdldE9wdGlvbihvcHRpb25zLCAndW5pdCcsICdzdHJpbmcnLCB1bmRlZmluZWQsIHVuZGVmaW5lZCk7CiAgaWYgKHVuaXQgIT09IHVuZGVmaW5lZCAmJiAhaXNXZWxsRm9ybWVkVW5pdElkZW50aWZpZXIodW5pdCkpIHsKICAgIHRocm93IFJhbmdlRXJyb3IoJ0ludmFsaWQgdW5pdCBhcmd1bWVudCBmb3IgSW50bC5OdW1iZXJGb3JtYXQoKScpOwogIH0KICB2YXIgdW5pdERpc3BsYXkgPSBpbnRsX3V0aWxzXzEuZ2V0T3B0aW9uKG9wdGlvbnMsICd1bml0RGlzcGxheScsICdzdHJpbmcnLCBbJ3Nob3J0JywgJ25hcnJvdycsICdsb25nJ10sICdzaG9ydCcpOwogIGlmIChzdHlsZSA9PT0gJ2N1cnJlbmN5JykgewogICAgaWYgKGN1cnJlbmN5ID09PSB1bmRlZmluZWQpIHsKICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignY3VycmVuY3kgY2Fubm90IGJlIHVuZGVmaW5lZCcpOwogICAgfQogICAgaW50bF91dGlsc18xLnNldE11bHRpSW50ZXJuYWxTbG90cyhfX0lOVEVSTkFMX1NMT1RfTUFQX18sIG5mLCB7CiAgICAgIGN1cnJlbmN5OiBjdXJyZW5jeS50b1VwcGVyQ2FzZSgpLAogICAgICBjdXJyZW5jeURpc3BsYXk6IGN1cnJlbmN5RGlzcGxheSwKICAgICAgY3VycmVuY3lTaWduOiBjdXJyZW5jeVNpZ24KICAgIH0pOwogIH0gZWxzZSBpZiAoc3R5bGUgPT09ICd1bml0JykgewogICAgaWYgKHVuaXQgPT09IHVuZGVmaW5lZCkgewogICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCd1bml0IGNhbm5vdCBiZSB1bmRlZmluZWQnKTsKICAgIH0KICAgIGludGxfdXRpbHNfMS5zZXRNdWx0aUludGVybmFsU2xvdHMoX19JTlRFUk5BTF9TTE9UX01BUF9fLCBuZiwgewogICAgICB1bml0OiB1bml0LAogICAgICB1bml0RGlzcGxheTogdW5pdERpc3BsYXkKICAgIH0pOwogIH0KfQovLyBUYWtpbmcgdGhlIHNob3J0Y3V0IGhlcmUgYW5kIHVzZWQgdGhlIG5hdGl2ZSBOdW1iZXJGb3JtYXQgZm9yIGZvcm1hdHRpbmcgbnVtYmVycy4KZnVuY3Rpb24gZm9ybWF0TnVtYmVyVG9TdHJpbmcobnVtYmVyRm9ybWF0LCB4KSB7CiAgdmFyIGlzTmVnYXRpdmUgPSB4IDwgMCB8fCBpbnRsX3V0aWxzXzEub2JqZWN0SXMoeCwgLTApOwogIGlmIChpc05lZ2F0aXZlKSB7CiAgICB4ID0gLXg7CiAgfQogIHZhciBfYSA9IGludGxfdXRpbHNfMS5nZXRNdWx0aUludGVybmFsU2xvdHMoX19JTlRFUk5BTF9TTE9UX01BUF9fLCBudW1iZXJGb3JtYXQsICdyb3VuZGluZ1R5cGUnLCAnbWluaW11bUZyYWN0aW9uRGlnaXRzJywgJ21heGltdW1GcmFjdGlvbkRpZ2l0cycsICdtaW5pbXVtSW50ZWdlckRpZ2l0cycsICdtaW5pbXVtU2lnbmlmaWNhbnREaWdpdHMnLCAnbWF4aW11bVNpZ25pZmljYW50RGlnaXRzJyksCiAgICByb3VuZGluZ1R5cGUgPSBfYS5yb3VuZGluZ1R5cGUsCiAgICBtaW5pbXVtU2lnbmlmaWNhbnREaWdpdHMgPSBfYS5taW5pbXVtU2lnbmlmaWNhbnREaWdpdHMsCiAgICBtYXhpbXVtU2lnbmlmaWNhbnREaWdpdHMgPSBfYS5tYXhpbXVtU2lnbmlmaWNhbnREaWdpdHMsCiAgICBtaW5pbXVtRnJhY3Rpb25EaWdpdHMgPSBfYS5taW5pbXVtRnJhY3Rpb25EaWdpdHMsCiAgICBtYXhpbXVtRnJhY3Rpb25EaWdpdHMgPSBfYS5tYXhpbXVtRnJhY3Rpb25EaWdpdHMsCiAgICBtaW5pbXVtSW50ZWdlckRpZ2l0cyA9IF9hLm1pbmltdW1JbnRlZ2VyRGlnaXRzOwogIHZhciByZXN1bHQ7CiAgaWYgKHJvdW5kaW5nVHlwZSA9PT0gJ3NpZ25pZmljYW50RGlnaXRzJykgewogICAgcmVzdWx0ID0gdXRpbHNfMS50b1Jhd1ByZWNpc2lvbih4LCBtaW5pbXVtU2lnbmlmaWNhbnREaWdpdHMsIG1heGltdW1TaWduaWZpY2FudERpZ2l0cyk7CiAgfSBlbHNlIGlmIChyb3VuZGluZ1R5cGUgPT09ICdmcmFjdGlvbkRpZ2l0cycpIHsKICAgIHJlc3VsdCA9IHV0aWxzXzEudG9SYXdGaXhlZCh4LCBtaW5pbXVtRnJhY3Rpb25EaWdpdHMsIG1heGltdW1GcmFjdGlvbkRpZ2l0cyk7CiAgfSBlbHNlIHsKICAgIGludGxfdXRpbHNfMS5pbnZhcmlhbnQocm91bmRpbmdUeXBlID09PSAnY29tcGFjdFJvdW5kaW5nJywgJ3JvdW5kaW5nVHlwZSBtdXN0IGJlIGNvbXBhY3RSb3VuZGluZycpOwogICAgcmVzdWx0ID0gdXRpbHNfMS50b1Jhd1ByZWNpc2lvbih4LCAxLCAyKTsKICAgIGlmIChyZXN1bHQuaW50ZWdlckRpZ2l0c0NvdW50ID4gMSkgewogICAgICByZXN1bHQgPSB1dGlsc18xLnRvUmF3Rml4ZWQoeCwgMCwgMCk7CiAgICB9CiAgfQogIHggPSByZXN1bHQucm91bmRlZE51bWJlcjsKICB2YXIgc3RyaW5nID0gcmVzdWx0LmZvcm1hdHRlZFN0cmluZzsKICB2YXIgaW50ID0gcmVzdWx0LmludGVnZXJEaWdpdHNDb3VudDsKICB2YXIgbWluSW50ZWdlciA9IG1pbmltdW1JbnRlZ2VyRGlnaXRzOwogIGlmIChpbnQgPCBtaW5JbnRlZ2VyKSB7CiAgICB2YXIgZm9yd2FyZFplcm9zID0gdXRpbHNfMS5yZXBlYXQoJzAnLCBtaW5JbnRlZ2VyIC0gaW50KTsKICAgIHN0cmluZyA9IGZvcndhcmRaZXJvcyArIHN0cmluZzsKICB9CiAgaWYgKGlzTmVnYXRpdmUpIHsKICAgIHggPSAteDsKICB9CiAgcmV0dXJuIHsKICAgIHJvdW5kZWROdW1iZXI6IHgsCiAgICBmb3JtYXR0ZWRTdHJpbmc6IHN0cmluZwogIH07Cn0KLyoqCiAqIFRoZSBhYnN0cmFjdCBvcGVyYXRpb24gQ29tcHV0ZUV4cG9uZW50IGNvbXB1dGVzIGFuIGV4cG9uZW50IChwb3dlciBvZiB0ZW4pIGJ5IHdoaWNoIHRvIHNjYWxlIHgKICogYWNjb3JkaW5nIHRvIHRoZSBudW1iZXIgZm9ybWF0dGluZyBzZXR0aW5ncy4gSXQgaGFuZGxlcyBjYXNlcyBzdWNoIGFzIDk5OSByb3VuZGluZyB1cCB0byAxMDAwLAogKiByZXF1aXJpbmcgYSBkaWZmZXJlbnQgZXhwb25lbnQuCiAqLwpmdW5jdGlvbiBjb21wdXRlRXhwb25lbnQobnVtYmVyRm9ybWF0LCB4KSB7CiAgaWYgKHggPT09IDApIHsKICAgIHJldHVybiAwOwogIH0KICBpZiAoeCA8IDApIHsKICAgIHggPSAteDsKICB9CiAgdmFyIG1hZ25pdHVkZSA9IHV0aWxzXzEuZ2V0TWFnbml0dWRlKHgpOwogIHZhciBleHBvbmVudCA9IGNvbXB1dGVFeHBvbmVudEZvck1hZ25pdHVkZShudW1iZXJGb3JtYXQsIG1hZ25pdHVkZSk7CiAgeCA9IHggLyBNYXRoLnBvdygxMCwgZXhwb25lbnQpOyAvLyBwb3RlbnRpYWwgSUVFRSBmbG9hdGluZyBwb2ludCBlcnJvcgogIHZhciBmb3JtYXROdW1iZXJSZXN1bHQgPSBmb3JtYXROdW1iZXJUb1N0cmluZyhudW1iZXJGb3JtYXQsIHgpOwogIGlmIChmb3JtYXROdW1iZXJSZXN1bHQucm91bmRlZE51bWJlciA9PT0gMCkgewogICAgcmV0dXJuIGV4cG9uZW50OwogIH0KICB2YXIgbmV3TWFnbml0dWRlID0gdXRpbHNfMS5nZXRNYWduaXR1ZGUoeCk7CiAgaWYgKG5ld01hZ25pdHVkZSA9PT0gbWFnbml0dWRlIC0gZXhwb25lbnQpIHsKICAgIHJldHVybiBleHBvbmVudDsKICB9CiAgcmV0dXJuIGNvbXB1dGVFeHBvbmVudEZvck1hZ25pdHVkZShudW1iZXJGb3JtYXQsIG1hZ25pdHVkZSArIDEpOwp9Ci8qKgogKiBUaGUgYWJzdHJhY3Qgb3BlcmF0aW9uIENvbXB1dGVFeHBvbmVudEZvck1hZ25pdHVkZSBjb21wdXRlcyBhbiBleHBvbmVudCBieSB3aGljaCB0byBzY2FsZSBhCiAqIG51bWJlciBvZiB0aGUgZ2l2ZW4gbWFnbml0dWRlIChwb3dlciBvZiB0ZW4gb2YgdGhlIG1vc3Qgc2lnbmlmaWNhbnQgZGlnaXQpIGFjY29yZGluZyB0byB0aGUKICogbG9jYWxlIGFuZCB0aGUgZGVzaXJlZCBub3RhdGlvbiAoc2NpZW50aWZpYywgZW5naW5lZXJpbmcsIG9yIGNvbXBhY3QpLgogKi8KZnVuY3Rpb24gY29tcHV0ZUV4cG9uZW50Rm9yTWFnbml0dWRlKG51bWJlckZvcm1hdCwgbWFnbml0dWRlKSB7CiAgdmFyIF9hOwogIHZhciBub3RhdGlvbiA9IGludGxfdXRpbHNfMS5nZXRJbnRlcm5hbFNsb3QoX19JTlRFUk5BTF9TTE9UX01BUF9fLCBudW1iZXJGb3JtYXQsICdub3RhdGlvbicpOwogIHZhciBzdHlsZSA9IGludGxfdXRpbHNfMS5nZXRJbnRlcm5hbFNsb3QoX19JTlRFUk5BTF9TTE9UX01BUF9fLCBudW1iZXJGb3JtYXQsICdzdHlsZScpOwogIHZhciBpbGQgPSBpbnRsX3V0aWxzXzEuZ2V0SW50ZXJuYWxTbG90KF9fSU5URVJOQUxfU0xPVF9NQVBfXywgbnVtYmVyRm9ybWF0LCAnaWxkJyk7CiAgc3dpdGNoIChub3RhdGlvbikgewogICAgY2FzZSAnc3RhbmRhcmQnOgogICAgICByZXR1cm4gMDsKICAgIGNhc2UgJ3NjaWVudGlmaWMnOgogICAgICByZXR1cm4gbWFnbml0dWRlOwogICAgY2FzZSAnZW5naW5lZXJpbmcnOgogICAgICByZXR1cm4gTWF0aC5mbG9vcihtYWduaXR1ZGUgLyAzKSAqIDM7CiAgICBjYXNlICdjb21wYWN0JzoKICAgICAgewogICAgICAgIHZhciBjb21wYWN0RGlzcGxheSA9IGludGxfdXRpbHNfMS5nZXRJbnRlcm5hbFNsb3QoX19JTlRFUk5BTF9TTE9UX01BUF9fLCBudW1iZXJGb3JtYXQsICdjb21wYWN0RGlzcGxheScpOwogICAgICAgIHZhciBjdXJyZW5jeURpc3BsYXkgPSBpbnRsX3V0aWxzXzEuZ2V0SW50ZXJuYWxTbG90KF9fSU5URVJOQUxfU0xPVF9NQVBfXywgbnVtYmVyRm9ybWF0LCAnY3VycmVuY3lEaXNwbGF5Jyk7CiAgICAgICAgdmFyIHRocmVzaG9sZE1hcCA9IHZvaWQgMDsKICAgICAgICBpZiAoc3R5bGUgPT09ICdjdXJyZW5jeScgJiYgY3VycmVuY3lEaXNwbGF5ICE9PSAnbmFtZScpIHsKICAgICAgICAgIHRocmVzaG9sZE1hcCA9IChjb21wYWN0RGlzcGxheSA9PT0gJ2xvbmcnID8gaWxkLmN1cnJlbmN5LmNvbXBhY3RMb25nIDogaWxkLmN1cnJlbmN5LmNvbXBhY3RTaG9ydCkgfHwgaWxkLmN1cnJlbmN5LmNvbXBhY3RTaG9ydDsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhyZXNob2xkTWFwID0gY29tcGFjdERpc3BsYXkgPT09ICdsb25nJyA/IGlsZC5kZWNpbWFsLmNvbXBhY3RMb25nIDogaWxkLmRlY2ltYWwuY29tcGFjdFNob3J0OwogICAgICAgIH0KICAgICAgICBpZiAoIXRocmVzaG9sZE1hcCkgewogICAgICAgICAgcmV0dXJuIDA7CiAgICAgICAgfQogICAgICAgIHZhciBudW0gPSBTdHJpbmcoTWF0aC5wb3coMTAsIG1hZ25pdHVkZSkpOwogICAgICAgIHZhciB0aHJlc2hvbGRzID0gT2JqZWN0LmtleXModGhyZXNob2xkTWFwKTsgLy8gVE9ETzogdGhpcyBjYW4gYmUgcHJlLXByb2Nlc3NlZAogICAgICAgIGlmICghKChfYSA9IHRocmVzaG9sZE1hcFtudW1dKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Eub3RoZXIpKSB7CiAgICAgICAgICByZXR1cm4gMDsKICAgICAgICB9CiAgICAgICAgaWYgKG51bSA8IHRocmVzaG9sZHNbMF0pIHsKICAgICAgICAgIHJldHVybiAwOwogICAgICAgIH0KICAgICAgICBpZiAobnVtID4gdGhyZXNob2xkc1t0aHJlc2hvbGRzLmxlbmd0aCAtIDFdKSB7CiAgICAgICAgICByZXR1cm4gdXRpbHNfMS5nZXRNYWduaXR1ZGUoK3RocmVzaG9sZHNbdGhyZXNob2xkcy5sZW5ndGggLSAxXSk7CiAgICAgICAgfQogICAgICAgIHZhciBpID0gdGhyZXNob2xkcy5pbmRleE9mKG51bSk7CiAgICAgICAgZm9yICg7IGkgPiAwICYmIHRocmVzaG9sZE1hcFt0aHJlc2hvbGRzW2kgLSAxXV0ub3RoZXIgPT09IHRocmVzaG9sZE1hcFtudW1dLm90aGVyOyBpLS0pOwogICAgICAgIHJldHVybiB1dGlsc18xLmdldE1hZ25pdHVkZSgrdGhyZXNob2xkc1tpXSk7CiAgICAgIH0KICB9Cn0KLyoqCiAqIGh0dHBzOi8vdGMzOS5lcy9wcm9wb3NhbC11bmlmaWVkLWludGwtbnVtYmVyZm9ybWF0L3NlY3Rpb24xMS9udW1iZXJmb3JtYXRfcHJvcG9zZWRfb3V0Lmh0bWwjc2VjLWdldG51bWJlcmZvcm1hdHBhdHRlcm4KICoKICogVGhlIGFic3RyYWN0IG9wZXJhdGlvbiBHZXROdW1iZXJGb3JtYXRQYXR0ZXJuIGNvbnNpZGVycyB0aGUgcmVzb2x2ZWQgdW5pdC1yZWxhdGVkIG9wdGlvbnMgaW4gdGhlCiAqIG51bWJlciBmb3JtYXQgb2JqZWN0IGFsb25nIHdpdGggdGhlIGZpbmFsIHNjYWxlZCBhbmQgcm91bmRlZCBudW1iZXIgYmVpbmcgZm9ybWF0dGVkIGFuZCByZXR1cm5zIGEKICogcGF0dGVybiwgYSBTdHJpbmcgdmFsdWUgYXMgZGVzY3JpYmVkIGluIDEuMy4zLgogKi8KZnVuY3Rpb24gZ2V0TnVtYmVyRm9ybWF0UGF0dGVybihudW1iZXJGb3JtYXQsIHgsIGV4cG9uZW50KSB7CiAgdmFyIF9hID0gaW50bF91dGlsc18xLmdldE11bHRpSW50ZXJuYWxTbG90cyhfX0lOVEVSTkFMX1NMT1RfTUFQX18sIG51bWJlckZvcm1hdCwgJ3N0eWxlJywgJ3BhdHRlcm5zJywgJ3NpZ25EaXNwbGF5JywgJ25vdGF0aW9uJyksCiAgICBzdHlsZSA9IF9hLnN0eWxlLAogICAgc2xvdHMgPSBfYS5wYXR0ZXJuczsKICB2YXIgcGF0dGVybnM7CiAgc3dpdGNoIChzdHlsZSkgewogICAgY2FzZSAncGVyY2VudCc6CiAgICAgIHBhdHRlcm5zID0gc2xvdHMucGVyY2VudDsKICAgICAgYnJlYWs7CiAgICBjYXNlICd1bml0JzoKICAgICAgewogICAgICAgIHZhciB1bml0RGlzcGxheSA9IGludGxfdXRpbHNfMS5nZXRJbnRlcm5hbFNsb3QoX19JTlRFUk5BTF9TTE9UX01BUF9fLCBudW1iZXJGb3JtYXQsICd1bml0RGlzcGxheScpOwogICAgICAgIHZhciB1bml0ID0gaW50bF91dGlsc18xLmdldEludGVybmFsU2xvdChfX0lOVEVSTkFMX1NMT1RfTUFQX18sIG51bWJlckZvcm1hdCwgJ3VuaXQnKTsKICAgICAgICBwYXR0ZXJucyA9IHNsb3RzLnVuaXRbdW5pdF1bdW5pdERpc3BsYXldOwogICAgICAgIGJyZWFrOwogICAgICB9CiAgICBjYXNlICdjdXJyZW5jeSc6CiAgICAgIHsKICAgICAgICB2YXIgX2IgPSBpbnRsX3V0aWxzXzEuZ2V0TXVsdGlJbnRlcm5hbFNsb3RzKF9fSU5URVJOQUxfU0xPVF9NQVBfXywgbnVtYmVyRm9ybWF0LCAnY3VycmVuY3knLCAnY3VycmVuY3lEaXNwbGF5JywgJ2N1cnJlbmN5U2lnbicpLAogICAgICAgICAgY3VycmVuY3kgPSBfYi5jdXJyZW5jeSwKICAgICAgICAgIGN1cnJlbmN5RGlzcGxheSA9IF9iLmN1cnJlbmN5RGlzcGxheSwKICAgICAgICAgIGN1cnJlbmN5U2lnbiA9IF9iLmN1cnJlbmN5U2lnbjsKICAgICAgICBwYXR0ZXJucyA9IHNsb3RzLmN1cnJlbmN5W2N1cnJlbmN5XVtjdXJyZW5jeURpc3BsYXldW2N1cnJlbmN5U2lnbl07CiAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgIGNhc2UgJ2RlY2ltYWwnOgogICAgICBwYXR0ZXJucyA9IHNsb3RzLmRlY2ltYWw7CiAgICAgIGJyZWFrOwogIH0KICB2YXIgbm90YXRpb24gPSBpbnRsX3V0aWxzXzEuZ2V0SW50ZXJuYWxTbG90KF9fSU5URVJOQUxfU0xPVF9NQVBfXywgbnVtYmVyRm9ybWF0LCAnbm90YXRpb24nKTsKICB2YXIgc2lnbkRpc3BsYXkgPSBpbnRsX3V0aWxzXzEuZ2V0SW50ZXJuYWxTbG90KF9fSU5URVJOQUxfU0xPVF9NQVBfXywgbnVtYmVyRm9ybWF0LCAnc2lnbkRpc3BsYXknKTsKICB2YXIgc2lnbkRpc3BsYXlQYXR0ZXJuID0gcGF0dGVybnNbc2lnbkRpc3BsYXldOwogIHZhciBzaWduUGF0dGVybjsKICBpZiAoIWlzTmFOKHgpICYmIGlzRmluaXRlKHgpKSB7CiAgICBpZiAobm90YXRpb24gPT09ICdzY2llbnRpZmljJyB8fCBub3RhdGlvbiA9PT0gJ2VuZ2luZWVyaW5nJykgewogICAgICBzaWduUGF0dGVybiA9IHNpZ25EaXNwbGF5UGF0dGVybi5zY2llbnRpZmljOwogICAgfSBlbHNlIGlmIChleHBvbmVudCAhPT0gMCkgewogICAgICBpbnRsX3V0aWxzXzEuaW52YXJpYW50KG5vdGF0aW9uID09PSAnY29tcGFjdCcsICdub3RhdGlvbiBtdXN0IGJlIGNvbXBhY3QnKTsKICAgICAgdmFyIGNvbXBhY3REaXNwbGF5ID0gaW50bF91dGlsc18xLmdldEludGVybmFsU2xvdChfX0lOVEVSTkFMX1NMT1RfTUFQX18sIG51bWJlckZvcm1hdCwgJ2NvbXBhY3REaXNwbGF5Jyk7CiAgICAgIHZhciBkZWNpbWFsTnVtID0gU3RyaW5nKE1hdGgucG93KDEwLCBleHBvbmVudCkpOwogICAgICBpZiAoY29tcGFjdERpc3BsYXkgPT09ICdzaG9ydCcgJiYgZXhwb25lbnQgPiAyICYmIGV4cG9uZW50IDwgMTUpIHsKICAgICAgICBzaWduUGF0dGVybiA9IHNpZ25EaXNwbGF5UGF0dGVybi5jb21wYWN0U2hvcnRbZGVjaW1hbE51bV07CiAgICAgIH0gZWxzZSBpZiAoZXhwb25lbnQgPiAyICYmIGV4cG9uZW50IDwgMTUpIHsKICAgICAgICBpbnRsX3V0aWxzXzEuaW52YXJpYW50KGNvbXBhY3REaXNwbGF5ID09PSAnbG9uZycsICdjb21wYWN0RGlzcGxheSBtdXN0IGJlIGxvbmcnKTsKICAgICAgICBzaWduUGF0dGVybiA9IHNpZ25EaXNwbGF5UGF0dGVybi5jb21wYWN0TG9uZ1tkZWNpbWFsTnVtXTsKICAgICAgfQogICAgfQogIH0KICBpZiAoIXNpZ25QYXR0ZXJuKSB7CiAgICBzaWduUGF0dGVybiA9IHNpZ25EaXNwbGF5UGF0dGVybi5zdGFuZGFyZDsKICB9CiAgdmFyIHBhdHRlcm47CiAgaWYgKHNpZ25EaXNwbGF5ID09PSAnbmV2ZXInKSB7CiAgICBwYXR0ZXJuID0gc2lnblBhdHRlcm4uemVyb1BhdHRlcm47CiAgfSBlbHNlIGlmIChzaWduRGlzcGxheSA9PT0gJ2F1dG8nKSB7CiAgICBpZiAoaW50bF91dGlsc18xLm9iamVjdElzKHgsIDApIHx8IHggPiAwIHx8IGlzTmFOKHgpKSB7CiAgICAgIHBhdHRlcm4gPSBzaWduUGF0dGVybi56ZXJvUGF0dGVybjsKICAgIH0gZWxzZSB7CiAgICAgIHBhdHRlcm4gPSBzaWduUGF0dGVybi5uZWdhdGl2ZVBhdHRlcm47CiAgICB9CiAgfSBlbHNlIGlmIChzaWduRGlzcGxheSA9PT0gJ2Fsd2F5cycpIHsKICAgIGlmIChpbnRsX3V0aWxzXzEub2JqZWN0SXMoeCwgMCkgfHwgeCA+IDAgfHwgaXNOYU4oeCkpIHsKICAgICAgcGF0dGVybiA9IHNpZ25QYXR0ZXJuLnBvc2l0aXZlUGF0dGVybjsKICAgIH0gZWxzZSB7CiAgICAgIHBhdHRlcm4gPSBzaWduUGF0dGVybi5uZWdhdGl2ZVBhdHRlcm47CiAgICB9CiAgfSBlbHNlIHsKICAgIGludGxfdXRpbHNfMS5pbnZhcmlhbnQoc2lnbkRpc3BsYXkgPT09ICdleGNlcHRaZXJvJywgJ3NpZ25EaXNwbGF5IG11c3QgYmUgZXhjZXB0WmVybycpOwogICAgaWYgKGludGxfdXRpbHNfMS5vYmplY3RJcyh4LCAwKSB8fCBpc05hTih4KSkgewogICAgICBwYXR0ZXJuID0gc2lnblBhdHRlcm4uemVyb1BhdHRlcm47CiAgICB9IGVsc2UgaWYgKHggPiAwIHx8IGludGxfdXRpbHNfMS5vYmplY3RJcyh4LCArMCkpIHsKICAgICAgcGF0dGVybiA9IHNpZ25QYXR0ZXJuLnBvc2l0aXZlUGF0dGVybjsKICAgIH0gZWxzZSB7CiAgICAgIHBhdHRlcm4gPSBzaWduUGF0dGVybi5uZWdhdGl2ZVBhdHRlcm47CiAgICB9CiAgfQogIHJldHVybiBwYXR0ZXJuOwp9CmZ1bmN0aW9uIHNlbGVjdFBsdXJhbChwbCwgeCwgcnVsZXMpIHsKICByZXR1cm4gcnVsZXNbcGwuc2VsZWN0KHgpXSB8fCBydWxlcy5vdGhlcjsKfQpmdW5jdGlvbiB0b051bWVyaWModmFsKSB7CiAgaWYgKHR5cGVvZiB2YWwgPT09ICdiaWdpbnQnKSB7CiAgICByZXR1cm4gdmFsOwogIH0KICByZXR1cm4gdG9OdW1iZXIodmFsKTsKfQpmdW5jdGlvbiB0b051bWJlcih2YWwpIHsKICBpZiAodmFsID09PSB1bmRlZmluZWQpIHsKICAgIHJldHVybiBOYU47CiAgfQogIGlmICh2YWwgPT09IG51bGwpIHsKICAgIHJldHVybiArMDsKICB9CiAgaWYgKHR5cGVvZiB2YWwgPT09ICdib29sZWFuJykgewogICAgcmV0dXJuIHZhbCA/IDEgOiArMDsKICB9CiAgaWYgKHR5cGVvZiB2YWwgPT09ICdudW1iZXInKSB7CiAgICByZXR1cm4gdmFsOwogIH0KICBpZiAodHlwZW9mIHZhbCA9PT0gJ3N5bWJvbCcgfHwgdHlwZW9mIHZhbCA9PT0gJ2JpZ2ludCcpIHsKICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0Nhbm5vdCBjb252ZXJ0IHN5bWJvbC9iaWdpbnQgdG8gbnVtYmVyJyk7CiAgfQogIHJldHVybiBOdW1iZXIodmFsKTsKfQp0cnkgewogIC8vIElFMTEgZG9lcyBub3QgaGF2ZSBTeW1ib2wKICBpZiAodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcpIHsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLlVuaWZpZWROdW1iZXJGb3JtYXQucHJvdG90eXBlLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsKICAgICAgY29uZmlndXJhYmxlOiB0cnVlLAogICAgICBlbnVtZXJhYmxlOiBmYWxzZSwKICAgICAgd3JpdGFibGU6IGZhbHNlLAogICAgICB2YWx1ZTogJ09iamVjdCcKICAgIH0pOwogIH0KICAvLyBodHRwczovL2dpdGh1Yi5jb20vdGMzOS90ZXN0MjYyL2Jsb2IvbWFzdGVyL3Rlc3QvaW50bDQwMi9OdW1iZXJGb3JtYXQvbGVuZ3RoLmpzCiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMuVW5pZmllZE51bWJlckZvcm1hdC5wcm90b3R5cGUuY29uc3RydWN0b3IsICdsZW5ndGgnLCB7CiAgICBjb25maWd1cmFibGU6IHRydWUsCiAgICBlbnVtZXJhYmxlOiBmYWxzZSwKICAgIHdyaXRhYmxlOiBmYWxzZSwKICAgIHZhbHVlOiAwCiAgfSk7CiAgLy8gaHR0cHM6Ly9naXRodWIuY29tL3RjMzkvdGVzdDI2Mi9ibG9iL21hc3Rlci90ZXN0L2ludGw0MDIvTnVtYmVyRm9ybWF0L3N1cHBvcnRlZExvY2FsZXNPZi9sZW5ndGguanMKICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cy5VbmlmaWVkTnVtYmVyRm9ybWF0LnN1cHBvcnRlZExvY2FsZXNPZiwgJ2xlbmd0aCcsIHsKICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICAgIGVudW1lcmFibGU6IGZhbHNlLAogICAgd3JpdGFibGU6IGZhbHNlLAogICAgdmFsdWU6IDEKICB9KTsKICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cy5VbmlmaWVkTnVtYmVyRm9ybWF0LCAncHJvdG90eXBlJywgewogICAgY29uZmlndXJhYmxlOiBmYWxzZSwKICAgIGVudW1lcmFibGU6IGZhbHNlLAogICAgd3JpdGFibGU6IGZhbHNlLAogICAgdmFsdWU6IGV4cG9ydHMuVW5pZmllZE51bWJlckZvcm1hdC5wcm90b3R5cGUKICB9KTsKfSBjYXRjaCAoZSkgewogIC8vIE1ldGEgZml4IHNvIHdlJ3JlIHRlc3QyNjItY29tcGxpYW50LCBub3QgaW1wb3J0YW50Cn0="},{"version":3,"mappings":"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","names":["VALID_NUMBERING_SYSTEM_NAMES","Object","create","numberingSystemNames_1","_i","nu","RESOLVED_OPTIONS_KEYS","SHORTENED_SACTION_UNITS","intl_utils_1","map","replace","toLowerCase","str","_","c","isWellFormedUnitIdentifier","unit","indexOf","units","split","length","isUnitSupported","Intl","NumberFormat","undefined","style","e","exports","removeUnicodeExtensionFromLocale","canonicalLocale","extensionIndex","slice","__INTERNAL_SLOT_MAP__","WeakMap","currencyDigits","currencyDigitsData","initializeNumberFormat","nf","locales","opts","requestedLocales","options","opt","matcher","localeMatcher","numberingSystem","RangeError","r","getDefaultLocale","availableLocales","localeData","ildData","locale","dataLocale","ild","data_1","currencies","numbers","setNumberFormatUnitOptions","mnfdDefault","mxfdDefault","currency","cDigits","notation","compactDisplay","useGrouping","signDisplay","partitionNumberPattern","numberFormat","x","pl","exponent","n","formattedX","isNaN","symbols","nan","isFinite","infinity","computeExponent","Math","formatNumberResult","formatNumberToString","formattedString","roundedNumber","pattern","getNumberFormatPattern","patternParts","results","unitSymbolChunkIndex","patternParts_1","part","type","push","number","value","Infinity","ILND","replacementTable","replacedDigits","n_1","_b","digit","decimalSepIndex","integer","fraction","groupSepSymbol","group","groups","i","integerGroup","pop","decimal","plusSign","minusSign","compactSymbol","compactData","compactShort","selectPlural","String","compactName","currencyDisplay","compactLong","scientificSeparator","exponential","scientificExponent","exponentResult","utils_1","percentSign","unitSymbol","unitNarrowSymbol","unitName","unitSymbols","mu","currencyCode","currencySymbol","currencySymbols","currencyNarrowSymbol","currencyName","cd","Error","formatNumericToParts","PluralRules","patterns","defineProperty","target","name","_a","configurable","enumerable","writable","prototype","formatToParts","toNumeric","resolvedOptions","slots","ro","RESOLVED_OPTIONS_KEYS_1","key","formatDescriptor","get","TypeError","boundFormat","join","supportedLocalesOf","__addLocaleData","data","data_2","datum","keys","__spreadArrays","aliases","parentLocales","reduce","all","k","availableLocales_1","__defaultLocale","polyfilled","currencySign","unitDisplay","toUpperCase","isNegative","roundingType","minimumSignificantDigits","maximumSignificantDigits","minimumFractionDigits","maximumFractionDigits","minimumIntegerDigits","result","integerDigitsCount","string","int","minInteger","forwardZeros","magnitude","computeExponentForMagnitude","newMagnitude","floor","thresholdMap","num","thresholds","other","percent","signDisplayPattern","signPattern","scientific","decimalNum","standard","zeroPattern","negativePattern","positivePattern","rules","select","val","toNumber","NaN","Number","Symbol","toStringTag","constructor"],"sourceRoot":"","sources":["../src/core.ts"],"sourcesContent":[null]}]}