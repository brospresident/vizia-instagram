{"remainingRequest":"/Users/pantu/.npm/_npx/12238/lib/node_modules/@vizia/app-emulator/node_modules/babel-loader/lib/index.js??ref--4-1!/Users/pantu/work2/vizia-ig-app/node_modules/@formatjs/intl-unified-numberformat/dist/core.js","dependencies":[{"path":"/Users/pantu/work2/vizia-ig-app/node_modules/@formatjs/intl-unified-numberformat/dist/core.js","mtime":1664781786507},{"path":"/Users/pantu/.npm/_npx/12238/lib/node_modules/@vizia/app-emulator/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/pantu/.npm/_npx/12238/lib/node_modules/@vizia/app-emulator/node_modules/babel-loader/lib/index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKdmFyIF9fc3ByZWFkQXJyYXlzID0gdGhpcyAmJiB0aGlzLl9fc3ByZWFkQXJyYXlzIHx8IGZ1bmN0aW9uICgpIHsKICBmb3IgKHZhciBzID0gMCwgaSA9IDAsIGlsID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IGlsOyBpKyspIHMgKz0gYXJndW1lbnRzW2ldLmxlbmd0aDsKCiAgZm9yICh2YXIgciA9IEFycmF5KHMpLCBrID0gMCwgaSA9IDA7IGkgPCBpbDsgaSsrKSBmb3IgKHZhciBhID0gYXJndW1lbnRzW2ldLCBqID0gMCwgamwgPSBhLmxlbmd0aDsgaiA8IGpsOyBqKyssIGsrKykgcltrXSA9IGFbal07CgogIHJldHVybiByOwp9OwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwoKdmFyIGludGxfdXRpbHNfMSA9IHJlcXVpcmUoIkBmb3JtYXRqcy9pbnRsLXV0aWxzIik7Cgp2YXIgdXRpbHNfMSA9IHJlcXVpcmUoIi4vdXRpbHMiKTsKCnZhciBkYXRhXzEgPSByZXF1aXJlKCIuL2RhdGEiKTsKCnZhciBjdXJyZW5jeURpZ2l0c0RhdGEgPSByZXF1aXJlKCIuL2N1cnJlbmN5LWRpZ2l0cy5qc29uIik7Cgp2YXIgSUxORCA9IHJlcXVpcmUoIi4vaWxuZC1udW1iZXJzLmpzb24iKTsKCnZhciBudW1iZXJpbmdfc3lzdGVtc19qc29uXzEgPSByZXF1aXJlKCIuL251bWJlcmluZy1zeXN0ZW1zLmpzb24iKTsKCnZhciBWQUxJRF9OVU1CRVJJTkdfU1lTVEVNX05BTUVTID0gT2JqZWN0LmNyZWF0ZShudWxsKTsKCmZvciAodmFyIF9pID0gMCwgbnVtYmVyaW5nU3lzdGVtTmFtZXNfMSA9IG51bWJlcmluZ19zeXN0ZW1zX2pzb25fMS5uYW1lczsgX2kgPCBudW1iZXJpbmdTeXN0ZW1OYW1lc18xLmxlbmd0aDsgX2krKykgewogIHZhciBudSA9IG51bWJlcmluZ1N5c3RlbU5hbWVzXzFbX2ldOwogIFZBTElEX05VTUJFUklOR19TWVNURU1fTkFNRVNbbnVdID0gdHJ1ZTsKfQoKdmFyIFJFU09MVkVEX09QVElPTlNfS0VZUyA9IFsnbG9jYWxlJywgJ251bWJlcmluZ1N5c3RlbScsICdzdHlsZScsICdjdXJyZW5jeScsICdjdXJyZW5jeURpc3BsYXknLCAnY3VycmVuY3lTaWduJywgJ3VuaXQnLCAndW5pdERpc3BsYXknLCAnbWluaW11bUludGVnZXJEaWdpdHMnLCAnbWluaW11bUZyYWN0aW9uRGlnaXRzJywgJ21heGltdW1GcmFjdGlvbkRpZ2l0cycsICdtaW5pbXVtU2lnbmlmaWNhbnREaWdpdHMnLCAnbWF4aW11bVNpZ25pZmljYW50RGlnaXRzJywgJ3VzZUdyb3VwaW5nJywgJ25vdGF0aW9uJywgJ2NvbXBhY3REaXNwbGF5JywgJ3NpZ25EaXNwbGF5J107CnZhciBTSE9SVEVORURfU0FDVElPTl9VTklUUyA9IGludGxfdXRpbHNfMS5TQU5DVElPTkVEX1VOSVRTLm1hcChmdW5jdGlvbiAodW5pdCkgewogIHJldHVybiB1bml0LnJlcGxhY2UoL14oLio/KS0vLCAnJyk7Cn0pOwovKioKICogVGhpcyBmb2xsb3dzIGh0dHBzOi8vdGMzOS5lcy9lY21hNDAyLyNzZWMtY2FzZS1zZW5zaXRpdml0eS1hbmQtY2FzZS1tYXBwaW5nCiAqIEBwYXJhbSBzdHIgc3RyaW5nIHRvIGNvbnZlcnQKICovCgpmdW5jdGlvbiB0b0xvd2VyQ2FzZShzdHIpIHsKICByZXR1cm4gc3RyLnJlcGxhY2UoLyhbQS1aXSkvZywgZnVuY3Rpb24gKF8sIGMpIHsKICAgIHJldHVybiBjLnRvTG93ZXJDYXNlKCk7CiAgfSk7Cn0KLyoqCiAqIGh0dHBzOi8vdGMzOS5lcy9wcm9wb3NhbC11bmlmaWVkLWludGwtbnVtYmVyZm9ybWF0L3NlY3Rpb242L2xvY2FsZXMtY3VycmVuY2llcy10el9wcm9wb3NlZF9vdXQuaHRtbCNzZWMtaXN3ZWxsZm9ybWVkdW5pdGlkZW50aWZpZXIKICogQHBhcmFtIHVuaXQKICovCgoKZnVuY3Rpb24gaXNXZWxsRm9ybWVkVW5pdElkZW50aWZpZXIodW5pdCkgewogIHVuaXQgPSB0b0xvd2VyQ2FzZSh1bml0KTsKCiAgaWYgKFNIT1JURU5FRF9TQUNUSU9OX1VOSVRTLmluZGV4T2YodW5pdCkgPiAtMSkgewogICAgcmV0dXJuIHRydWU7CiAgfQoKICB2YXIgdW5pdHMgPSB1bml0LnNwbGl0KCctcGVyLScpOwoKICBpZiAodW5pdHMubGVuZ3RoICE9PSAyKSB7CiAgICByZXR1cm4gZmFsc2U7CiAgfQoKICBpZiAoU0hPUlRFTkVEX1NBQ1RJT05fVU5JVFMuaW5kZXhPZih1bml0c1swXSkgPCAwIHx8IFNIT1JURU5FRF9TQUNUSU9OX1VOSVRTLmluZGV4T2YodW5pdHNbMV0pIDwgMCkgewogICAgcmV0dXJuIGZhbHNlOwogIH0KCiAgcmV0dXJuIHRydWU7Cn0KLyoqCiAqIENoZWNrIGlmIGEgZm9ybWF0dGluZyBudW1iZXIgd2l0aCB1bml0IGlzIHN1cHBvcnRlZAogKiBAcHVibGljCiAqIEBwYXJhbSB1bml0IHVuaXQgdG8gY2hlY2sKICovCgoKZnVuY3Rpb24gaXNVbml0U3VwcG9ydGVkKHVuaXQpIHsKICB0cnkgewogICAgbmV3IEludGwuTnVtYmVyRm9ybWF0KHVuZGVmaW5lZCwgewogICAgICBzdHlsZTogJ3VuaXQnLAogICAgICB1bml0OiB1bml0CiAgICB9KTsKICB9IGNhdGNoIChlKSB7CiAgICByZXR1cm4gZmFsc2U7CiAgfQoKICByZXR1cm4gdHJ1ZTsKfQoKZXhwb3J0cy5pc1VuaXRTdXBwb3J0ZWQgPSBpc1VuaXRTdXBwb3J0ZWQ7Ci8qKgogKiBDaG9wIG9mZiB0aGUgdW5pY29kZSBleHRlbnNpb24gZnJvbSB0aGUgbG9jYWxlIHN0cmluZy4KICovCgpmdW5jdGlvbiByZW1vdmVVbmljb2RlRXh0ZW5zaW9uRnJvbUxvY2FsZShjYW5vbmljYWxMb2NhbGUpIHsKICB2YXIgZXh0ZW5zaW9uSW5kZXggPSBjYW5vbmljYWxMb2NhbGUuaW5kZXhPZignLXUtJyk7CiAgcmV0dXJuIGV4dGVuc2lvbkluZGV4ID49IDAgPyBjYW5vbmljYWxMb2NhbGUuc2xpY2UoMCwgZXh0ZW5zaW9uSW5kZXgpIDogY2Fub25pY2FsTG9jYWxlOwp9Cgp2YXIgX19JTlRFUk5BTF9TTE9UX01BUF9fID0gbmV3IFdlYWtNYXAoKTsKCmZ1bmN0aW9uIGN1cnJlbmN5RGlnaXRzKGMpIHsKICByZXR1cm4gYyBpbiBjdXJyZW5jeURpZ2l0c0RhdGEgPyBjdXJyZW5jeURpZ2l0c0RhdGFbY10gOiAyOwp9CgpmdW5jdGlvbiBpbml0aWFsaXplTnVtYmVyRm9ybWF0KG5mLCBsb2NhbGVzLCBvcHRzKSB7CiAgdmFyIHJlcXVlc3RlZExvY2FsZXMgPSBpbnRsX3V0aWxzXzEuZ2V0Q2Fub25pY2FsTG9jYWxlcyhsb2NhbGVzKTsKICB2YXIgb3B0aW9ucyA9IG9wdHMgPT09IHVuZGVmaW5lZCA/IE9iamVjdC5jcmVhdGUobnVsbCkgOiBpbnRsX3V0aWxzXzEudG9PYmplY3Qob3B0cyk7CiAgdmFyIG9wdCA9IE9iamVjdC5jcmVhdGUobnVsbCk7CiAgdmFyIG1hdGNoZXIgPSBpbnRsX3V0aWxzXzEuZ2V0T3B0aW9uKG9wdGlvbnMsICdsb2NhbGVNYXRjaGVyJywgJ3N0cmluZycsIFsnYmVzdCBmaXQnLCAnbG9va3VwJ10sICdiZXN0IGZpdCcpOwogIG9wdC5sb2NhbGVNYXRjaGVyID0gbWF0Y2hlcjsKICB2YXIgbnVtYmVyaW5nU3lzdGVtID0gaW50bF91dGlsc18xLmdldE9wdGlvbihvcHRpb25zLCAnbnVtYmVyaW5nU3lzdGVtJywgJ3N0cmluZycsIHVuZGVmaW5lZCwgdW5kZWZpbmVkKTsKCiAgaWYgKG51bWJlcmluZ1N5c3RlbSAhPT0gdW5kZWZpbmVkICYmICFWQUxJRF9OVU1CRVJJTkdfU1lTVEVNX05BTUVTW251bWJlcmluZ1N5c3RlbV0pIHsKICAgIC8vIDguYS4gSWYgbnVtYmVyaW5nU3lzdGVtIGRvZXMgbm90IG1hdGNoIHRoZSBVbmljb2RlIExvY2FsZSBJZGVudGlmaWVyIHR5cGUgbm9udGVybWluYWwsCiAgICAvLyB0aHJvdyBhIFJhbmdlRXJyb3IgZXhjZXB0aW9uLgogICAgdGhyb3cgUmFuZ2VFcnJvcigiSW52YWxpZCBudW1iZXJpbmdTeXN0ZW1zOiAiICsgbnVtYmVyaW5nU3lzdGVtKTsKICB9CgogIG9wdC5udSA9IG51bWJlcmluZ1N5c3RlbTsKICB2YXIgbG9jYWxlRGF0YSA9IGV4cG9ydHMuVW5pZmllZE51bWJlckZvcm1hdC5sb2NhbGVEYXRhOwogIHZhciByID0gaW50bF91dGlsc18xLmNyZWF0ZVJlc29sdmVMb2NhbGUoZXhwb3J0cy5VbmlmaWVkTnVtYmVyRm9ybWF0LmdldERlZmF1bHRMb2NhbGUpKGV4cG9ydHMuVW5pZmllZE51bWJlckZvcm1hdC5hdmFpbGFibGVMb2NhbGVzLCByZXF1ZXN0ZWRMb2NhbGVzLCBvcHQsIC8vIFtbUmVsZXZhbnRFeHRlbnNpb25LZXlzXV0gc2xvdCwgd2hpY2ggaXMgYSBjb25zdGFudAogIFsnbnUnXSwgbG9jYWxlRGF0YSk7CiAgdmFyIGlsZERhdGEgPSBsb2NhbGVEYXRhW3JlbW92ZVVuaWNvZGVFeHRlbnNpb25Gcm9tTG9jYWxlKHIubG9jYWxlKV07CiAgaW50bF91dGlsc18xLnNldE11bHRpSW50ZXJuYWxTbG90cyhfX0lOVEVSTkFMX1NMT1RfTUFQX18sIG5mLCB7CiAgICBsb2NhbGU6IHIubG9jYWxlLAogICAgZGF0YUxvY2FsZTogci5kYXRhTG9jYWxlLAogICAgbnVtYmVyaW5nU3lzdGVtOiByLm51LAogICAgaWxkOiBkYXRhXzEuZXh0cmFjdElMRChpbGREYXRhLnVuaXRzLCBpbGREYXRhLmN1cnJlbmNpZXMsIGlsZERhdGEubnVtYmVycywgci5udSkKICB9KTsgLy8gaHR0cHM6Ly90YzM5LmVzL3Byb3Bvc2FsLXVuaWZpZWQtaW50bC1udW1iZXJmb3JtYXQvc2VjdGlvbjExL251bWJlcmZvcm1hdF9wcm9wb3NlZF9vdXQuaHRtbCNzZWMtc2V0bnVtYmVyZm9ybWF0dW5pdG9wdGlvbnMKCiAgc2V0TnVtYmVyRm9ybWF0VW5pdE9wdGlvbnMobmYsIG9wdGlvbnMpOwogIHZhciBzdHlsZSA9IGludGxfdXRpbHNfMS5nZXRJbnRlcm5hbFNsb3QoX19JTlRFUk5BTF9TTE9UX01BUF9fLCBuZiwgJ3N0eWxlJyk7IC8vIC0tLQoKICB2YXIgbW5mZERlZmF1bHQ7CiAgdmFyIG14ZmREZWZhdWx0OwoKICBpZiAoc3R5bGUgPT09ICdjdXJyZW5jeScpIHsKICAgIHZhciBjdXJyZW5jeSA9IGludGxfdXRpbHNfMS5nZXRJbnRlcm5hbFNsb3QoX19JTlRFUk5BTF9TTE9UX01BUF9fLCBuZiwgJ2N1cnJlbmN5Jyk7CiAgICB2YXIgY0RpZ2l0cyA9IGN1cnJlbmN5RGlnaXRzKGN1cnJlbmN5KTsKICAgIG1uZmREZWZhdWx0ID0gY0RpZ2l0czsKICAgIG14ZmREZWZhdWx0ID0gY0RpZ2l0czsKICB9IGVsc2UgewogICAgbW5mZERlZmF1bHQgPSAwOwogICAgbXhmZERlZmF1bHQgPSBzdHlsZSA9PT0gJ3BlcmNlbnQnID8gMCA6IDM7CiAgfQoKICB2YXIgbm90YXRpb24gPSBpbnRsX3V0aWxzXzEuZ2V0T3B0aW9uKG9wdGlvbnMsICdub3RhdGlvbicsICdzdHJpbmcnLCBbJ3N0YW5kYXJkJywgJ3NjaWVudGlmaWMnLCAnZW5naW5lZXJpbmcnLCAnY29tcGFjdCddLCAnc3RhbmRhcmQnKTsKICBpbnRsX3V0aWxzXzEuc2V0SW50ZXJuYWxTbG90KF9fSU5URVJOQUxfU0xPVF9NQVBfXywgbmYsICdub3RhdGlvbicsIG5vdGF0aW9uKTsKICBpbnRsX3V0aWxzXzEuc2V0TnVtYmVyRm9ybWF0RGlnaXRPcHRpb25zKF9fSU5URVJOQUxfU0xPVF9NQVBfXywgbmYsIG9wdGlvbnMsIG1uZmREZWZhdWx0LCBteGZkRGVmYXVsdCk7CiAgdmFyIGNvbXBhY3REaXNwbGF5ID0gaW50bF91dGlsc18xLmdldE9wdGlvbihvcHRpb25zLCAnY29tcGFjdERpc3BsYXknLCAnc3RyaW5nJywgWydzaG9ydCcsICdsb25nJ10sICdzaG9ydCcpOwoKICBpZiAobm90YXRpb24gPT09ICdjb21wYWN0JykgewogICAgaW50bF91dGlsc18xLnNldEludGVybmFsU2xvdChfX0lOVEVSTkFMX1NMT1RfTUFQX18sIG5mLCAnY29tcGFjdERpc3BsYXknLCBjb21wYWN0RGlzcGxheSk7CiAgfQoKICB2YXIgdXNlR3JvdXBpbmcgPSBpbnRsX3V0aWxzXzEuZ2V0T3B0aW9uKG9wdGlvbnMsICd1c2VHcm91cGluZycsICdib29sZWFuJywgdW5kZWZpbmVkLCB0cnVlKTsKICBpbnRsX3V0aWxzXzEuc2V0SW50ZXJuYWxTbG90KF9fSU5URVJOQUxfU0xPVF9NQVBfXywgbmYsICd1c2VHcm91cGluZycsIHVzZUdyb3VwaW5nKTsKICB2YXIgc2lnbkRpc3BsYXkgPSBpbnRsX3V0aWxzXzEuZ2V0T3B0aW9uKG9wdGlvbnMsICdzaWduRGlzcGxheScsICdzdHJpbmcnLCBbJ2F1dG8nLCAnbmV2ZXInLCAnYWx3YXlzJywgJ2V4Y2VwdFplcm8nXSwgJ2F1dG8nKTsKICBpbnRsX3V0aWxzXzEuc2V0SW50ZXJuYWxTbG90KF9fSU5URVJOQUxfU0xPVF9NQVBfXywgbmYsICdzaWduRGlzcGxheScsIHNpZ25EaXNwbGF5KTsKfQoKZnVuY3Rpb24gcGFydGl0aW9uTnVtYmVyUGF0dGVybihudW1iZXJGb3JtYXQsIHgpIHsKICB2YXIgcGwgPSBpbnRsX3V0aWxzXzEuZ2V0SW50ZXJuYWxTbG90KF9fSU5URVJOQUxfU0xPVF9NQVBfXywgbnVtYmVyRm9ybWF0LCAncGwnKTsKICB2YXIgZXhwb25lbnQgPSAwOwogIHZhciBpbGQgPSBpbnRsX3V0aWxzXzEuZ2V0SW50ZXJuYWxTbG90KF9fSU5URVJOQUxfU0xPVF9NQVBfXywgbnVtYmVyRm9ybWF0LCAnaWxkJyk7CiAgdmFyIG47CiAgdmFyIGZvcm1hdHRlZFggPSB4OwoKICBpZiAoaXNOYU4oeCkpIHsKICAgIG4gPSBpbGQuc3ltYm9scy5uYW47CiAgfSBlbHNlIGlmICghaXNGaW5pdGUoeCkpIHsKICAgIG4gPSBpbGQuc3ltYm9scy5pbmZpbml0eTsKICB9IGVsc2UgewogICAgaWYgKGludGxfdXRpbHNfMS5nZXRJbnRlcm5hbFNsb3QoX19JTlRFUk5BTF9TTE9UX01BUF9fLCBudW1iZXJGb3JtYXQsICdzdHlsZScpID09PSAncGVyY2VudCcpIHsKICAgICAgZm9ybWF0dGVkWCAqPSAxMDA7CiAgICB9CgogICAgZXhwb25lbnQgPSBjb21wdXRlRXhwb25lbnQobnVtYmVyRm9ybWF0LCBmb3JtYXR0ZWRYKTsKICAgIGZvcm1hdHRlZFggLz0gTWF0aC5wb3coMTAsIGV4cG9uZW50KTsKICAgIHZhciBmb3JtYXROdW1iZXJSZXN1bHQgPSBmb3JtYXROdW1iZXJUb1N0cmluZyhudW1iZXJGb3JtYXQsIGZvcm1hdHRlZFgpOwogICAgbiA9IGZvcm1hdE51bWJlclJlc3VsdC5mb3JtYXR0ZWRTdHJpbmc7CiAgICBmb3JtYXR0ZWRYID0gZm9ybWF0TnVtYmVyUmVzdWx0LnJvdW5kZWROdW1iZXI7CiAgfQoKICB2YXIgcGF0dGVybiA9IGdldE51bWJlckZvcm1hdFBhdHRlcm4obnVtYmVyRm9ybWF0LCB4LCBleHBvbmVudCk7CiAgdmFyIHBhdHRlcm5QYXJ0cyA9IGludGxfdXRpbHNfMS5wYXJ0aXRpb25QYXR0ZXJuKHBhdHRlcm4pOwogIHZhciByZXN1bHRzID0gW107IC8vIFVuc3BlYydlZCBzdHVmZgogIC8vIFRoaXMgaXMgdG8gZGVhbCB3LyBjYXNlcyB3aGVyZSB7bnVtYmVyfSBpcyBpbiB0aGUgbWlkZGxlIG9mIGEgdW5pdCBwYXR0ZXJuCgogIHZhciB1bml0U3ltYm9sQ2h1bmtJbmRleCA9IDA7CiAgdmFyIG5vdGF0aW9uID0gaW50bF91dGlsc18xLmdldEludGVybmFsU2xvdChfX0lOVEVSTkFMX1NMT1RfTUFQX18sIG51bWJlckZvcm1hdCwgJ25vdGF0aW9uJyk7CgogIGZvciAodmFyIF9pID0gMCwgcGF0dGVyblBhcnRzXzEgPSBwYXR0ZXJuUGFydHM7IF9pIDwgcGF0dGVyblBhcnRzXzEubGVuZ3RoOyBfaSsrKSB7CiAgICB2YXIgcGFydCA9IHBhdHRlcm5QYXJ0c18xW19pXTsKCiAgICBzd2l0Y2ggKHBhcnQudHlwZSkgewogICAgICBjYXNlICdsaXRlcmFsJzoKICAgICAgICByZXN1bHRzLnB1c2gocGFydCk7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlIGludGxfdXRpbHNfMS5JbnRlcm5hbFNsb3RUb2tlbi5udW1iZXI6CiAgICAgICAgewogICAgICAgICAgaWYgKGlzTmFOKGZvcm1hdHRlZFgpKSB7CiAgICAgICAgICAgIHJlc3VsdHMucHVzaCh7CiAgICAgICAgICAgICAgdHlwZTogJ25hbicsCiAgICAgICAgICAgICAgdmFsdWU6IG4KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9IGVsc2UgaWYgKGZvcm1hdHRlZFggPT09IEluZmluaXR5IHx8IHggPT09IC1JbmZpbml0eSkgewogICAgICAgICAgICByZXN1bHRzLnB1c2goewogICAgICAgICAgICAgIHR5cGU6ICdpbmZpbml0eScsCiAgICAgICAgICAgICAgdmFsdWU6IG4KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB2YXIgX2EgPSBpbnRsX3V0aWxzXzEuZ2V0TXVsdGlJbnRlcm5hbFNsb3RzKF9fSU5URVJOQUxfU0xPVF9NQVBfXywgbnVtYmVyRm9ybWF0LCAnbnVtYmVyaW5nU3lzdGVtJywgJ3VzZUdyb3VwaW5nJywgJ25vdGF0aW9uJyksCiAgICAgICAgICAgICAgICBudSA9IF9hLm51bWJlcmluZ1N5c3RlbSwKICAgICAgICAgICAgICAgIHVzZUdyb3VwaW5nID0gX2EudXNlR3JvdXBpbmc7CgogICAgICAgICAgICBpZiAobnUgJiYgbnUgaW4gSUxORCkgewogICAgICAgICAgICAgIC8vIFJlcGxhY2UgZGlnaXRzCiAgICAgICAgICAgICAgdmFyIHJlcGxhY2VtZW50VGFibGUgPSBJTE5EW251XTsKICAgICAgICAgICAgICB2YXIgcmVwbGFjZWREaWdpdHMgPSAnJzsKCiAgICAgICAgICAgICAgZm9yICh2YXIgX2IgPSAwLCBuXzEgPSBuOyBfYiA8IG5fMS5sZW5ndGg7IF9iKyspIHsKICAgICAgICAgICAgICAgIHZhciBkaWdpdCA9IG5fMVtfYl07IC8vIGRpZ2l0IGNhbiBiZSBgLmAgaWYgaXQncyBmcmFjdGlvbmFsCgogICAgICAgICAgICAgICAgcmVwbGFjZWREaWdpdHMgKz0gcmVwbGFjZW1lbnRUYWJsZVsrZGlnaXRdIHx8IGRpZ2l0OwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgbiA9IHJlcGxhY2VkRGlnaXRzOwogICAgICAgICAgICB9CgogICAgICAgICAgICB2YXIgZGVjaW1hbFNlcEluZGV4ID0gbi5pbmRleE9mKCcuJyk7CiAgICAgICAgICAgIHZhciBpbnRlZ2VyID0gdm9pZCAwOwogICAgICAgICAgICB2YXIgZnJhY3Rpb24gPSB2b2lkIDA7CgogICAgICAgICAgICBpZiAoZGVjaW1hbFNlcEluZGV4ID4gMCkgewogICAgICAgICAgICAgIGludGVnZXIgPSBuLnNsaWNlKDAsIGRlY2ltYWxTZXBJbmRleCk7CiAgICAgICAgICAgICAgZnJhY3Rpb24gPSBuLnNsaWNlKGRlY2ltYWxTZXBJbmRleCArIDEpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIGludGVnZXIgPSBuOwogICAgICAgICAgICB9IC8vIEZvciBjb21wYWN0LCBkZWZhdWx0IGdyb3VwaW5nIHN0cmF0ZWd5IGlzIG1pbjIKCgogICAgICAgICAgICBpZiAodXNlR3JvdXBpbmcgJiYgKG5vdGF0aW9uID09PSAnY29tcGFjdCcgPyBpbnRlZ2VyLmxlbmd0aCA+IDQgOiB0cnVlKSkgewogICAgICAgICAgICAgIHZhciBncm91cFNlcFN5bWJvbCA9IGlsZC5zeW1ib2xzLmdyb3VwOwogICAgICAgICAgICAgIHZhciBncm91cHMgPSBbXTsgLy8gQXNzdW1pbmcgdGhhdCB0aGUgZ3JvdXAgc2VwYXJhdG9yIGlzIGFsd2F5cyBpbnNlcnRlZCBiZXR3ZWVuIGV2ZXJ5IDMgZGlnaXRzLgoKICAgICAgICAgICAgICB2YXIgaSA9IGludGVnZXIubGVuZ3RoIC0gMzsKCiAgICAgICAgICAgICAgZm9yICg7IGkgPiAwOyBpIC09IDMpIHsKICAgICAgICAgICAgICAgIGdyb3Vwcy5wdXNoKGludGVnZXIuc2xpY2UoaSwgaSArIDMpKTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGdyb3Vwcy5wdXNoKGludGVnZXIuc2xpY2UoMCwgaSArIDMpKTsKCiAgICAgICAgICAgICAgd2hpbGUgKGdyb3Vwcy5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICB2YXIgaW50ZWdlckdyb3VwID0gZ3JvdXBzLnBvcCgpOwogICAgICAgICAgICAgICAgcmVzdWx0cy5wdXNoKHsKICAgICAgICAgICAgICAgICAgdHlwZTogJ2ludGVnZXInLAogICAgICAgICAgICAgICAgICB2YWx1ZTogaW50ZWdlckdyb3VwCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICBpZiAoZ3JvdXBzLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgICAgcmVzdWx0cy5wdXNoKHsKICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZ3JvdXAnLAogICAgICAgICAgICAgICAgICAgIHZhbHVlOiBncm91cFNlcFN5bWJvbAogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgcmVzdWx0cy5wdXNoKHsKICAgICAgICAgICAgICAgIHR5cGU6ICdpbnRlZ2VyJywKICAgICAgICAgICAgICAgIHZhbHVlOiBpbnRlZ2VyCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChmcmFjdGlvbiAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgcmVzdWx0cy5wdXNoKHsKICAgICAgICAgICAgICAgIHR5cGU6ICdkZWNpbWFsJywKICAgICAgICAgICAgICAgIHZhbHVlOiBpbGQuc3ltYm9scy5kZWNpbWFsCiAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgdHlwZTogJ2ZyYWN0aW9uJywKICAgICAgICAgICAgICAgIHZhbHVlOiBmcmFjdGlvbgogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQoKICAgICAgY2FzZSBpbnRsX3V0aWxzXzEuSW50ZXJuYWxTbG90VG9rZW4ucGx1c1NpZ246CiAgICAgICAgcmVzdWx0cy5wdXNoKHsKICAgICAgICAgIHR5cGU6ICdwbHVzU2lnbicsCiAgICAgICAgICB2YWx1ZTogaWxkLnN5bWJvbHMucGx1c1NpZ24KICAgICAgICB9KTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgaW50bF91dGlsc18xLkludGVybmFsU2xvdFRva2VuLm1pbnVzU2lnbjoKICAgICAgICByZXN1bHRzLnB1c2goewogICAgICAgICAgdHlwZTogJ21pbnVzU2lnbicsCiAgICAgICAgICB2YWx1ZTogaWxkLnN5bWJvbHMubWludXNTaWduCiAgICAgICAgfSk7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlIGludGxfdXRpbHNfMS5JbnRlcm5hbFNsb3RUb2tlbi5jb21wYWN0U3ltYm9sOgogICAgICAgIHsKICAgICAgICAgIHZhciBzdHlsZSA9IGludGxfdXRpbHNfMS5nZXRJbnRlcm5hbFNsb3QoX19JTlRFUk5BTF9TTE9UX01BUF9fLCBudW1iZXJGb3JtYXQsICdzdHlsZScpOwogICAgICAgICAgdmFyIGNvbXBhY3REYXRhID0gdm9pZCAwOwoKICAgICAgICAgIGlmIChzdHlsZSA9PT0gJ2N1cnJlbmN5JykgewogICAgICAgICAgICBjb21wYWN0RGF0YSA9IGlsZC5jdXJyZW5jeS5jb21wYWN0U2hvcnQ7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBjb21wYWN0RGF0YSA9IGlsZC5kZWNpbWFsLmNvbXBhY3RTaG9ydDsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoY29tcGFjdERhdGEpIHsKICAgICAgICAgICAgcmVzdWx0cy5wdXNoKHsKICAgICAgICAgICAgICB0eXBlOiAnY29tcGFjdCcsCiAgICAgICAgICAgICAgdmFsdWU6IHNlbGVjdFBsdXJhbChwbCwgeCwgY29tcGFjdERhdGFbU3RyaW5nKE1hdGgucG93KDEwLCBleHBvbmVudCkpXSkKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CgogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQoKICAgICAgY2FzZSBpbnRsX3V0aWxzXzEuSW50ZXJuYWxTbG90VG9rZW4uY29tcGFjdE5hbWU6CiAgICAgICAgewogICAgICAgICAgdmFyIHN0eWxlID0gaW50bF91dGlsc18xLmdldEludGVybmFsU2xvdChfX0lOVEVSTkFMX1NMT1RfTUFQX18sIG51bWJlckZvcm1hdCwgJ3N0eWxlJyk7CiAgICAgICAgICB2YXIgY3VycmVuY3lEaXNwbGF5ID0gaW50bF91dGlsc18xLmdldEludGVybmFsU2xvdChfX0lOVEVSTkFMX1NMT1RfTUFQX18sIG51bWJlckZvcm1hdCwgJ2N1cnJlbmN5RGlzcGxheScpOwogICAgICAgICAgdmFyIGNvbXBhY3REYXRhID0gdm9pZCAwOwoKICAgICAgICAgIGlmIChzdHlsZSA9PT0gJ2N1cnJlbmN5JyAmJiBjdXJyZW5jeURpc3BsYXkgIT09ICduYW1lJykgewogICAgICAgICAgICBjb21wYWN0RGF0YSA9IGlsZC5jdXJyZW5jeS5jb21wYWN0TG9uZyB8fCBpbGQuY3VycmVuY3kuY29tcGFjdFNob3J0OwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgY29tcGFjdERhdGEgPSBpbGQuZGVjaW1hbC5jb21wYWN0TG9uZyB8fCBpbGQuZGVjaW1hbC5jb21wYWN0U2hvcnQ7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKGNvbXBhY3REYXRhKSB7CiAgICAgICAgICAgIHJlc3VsdHMucHVzaCh7CiAgICAgICAgICAgICAgdHlwZTogJ2NvbXBhY3QnLAogICAgICAgICAgICAgIHZhbHVlOiBzZWxlY3RQbHVyYWwocGwsIHgsIGNvbXBhY3REYXRhW1N0cmluZyhNYXRoLnBvdygxMCwgZXhwb25lbnQpKV0pCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQoKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KCiAgICAgIGNhc2UgaW50bF91dGlsc18xLkludGVybmFsU2xvdFRva2VuLnNjaWVudGlmaWNTZXBhcmF0b3I6CiAgICAgICAgcmVzdWx0cy5wdXNoKHsKICAgICAgICAgIHR5cGU6ICdleHBvbmVudFNlcGFyYXRvcicsCiAgICAgICAgICB2YWx1ZTogaWxkLnN5bWJvbHMuZXhwb25lbnRpYWwKICAgICAgICB9KTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgaW50bF91dGlsc18xLkludGVybmFsU2xvdFRva2VuLnNjaWVudGlmaWNFeHBvbmVudDoKICAgICAgICB7CiAgICAgICAgICBpZiAoZXhwb25lbnQgPCAwKSB7CiAgICAgICAgICAgIHJlc3VsdHMucHVzaCh7CiAgICAgICAgICAgICAgdHlwZTogJ2V4cG9uZW50TWludXNTaWduJywKICAgICAgICAgICAgICB2YWx1ZTogaWxkLnN5bWJvbHMubWludXNTaWduCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBleHBvbmVudCA9IC1leHBvbmVudDsKICAgICAgICAgIH0KCiAgICAgICAgICB2YXIgZXhwb25lbnRSZXN1bHQgPSB1dGlsc18xLnRvUmF3Rml4ZWQoZXhwb25lbnQsIDAsIDApOwogICAgICAgICAgcmVzdWx0cy5wdXNoKHsKICAgICAgICAgICAgdHlwZTogJ2V4cG9uZW50SW50ZWdlcicsCiAgICAgICAgICAgIHZhbHVlOiBleHBvbmVudFJlc3VsdC5mb3JtYXR0ZWRTdHJpbmcKICAgICAgICAgIH0pOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQoKICAgICAgY2FzZSBpbnRsX3V0aWxzXzEuSW50ZXJuYWxTbG90VG9rZW4ucGVyY2VudFNpZ246CiAgICAgICAgcmVzdWx0cy5wdXNoKHsKICAgICAgICAgIHR5cGU6ICdwZXJjZW50U2lnbicsCiAgICAgICAgICB2YWx1ZTogaWxkLnN5bWJvbHMucGVyY2VudFNpZ24KICAgICAgICB9KTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgaW50bF91dGlsc18xLkludGVybmFsU2xvdFRva2VuLnVuaXRTeW1ib2w6CiAgICAgIGNhc2UgaW50bF91dGlsc18xLkludGVybmFsU2xvdFRva2VuLnVuaXROYXJyb3dTeW1ib2w6CiAgICAgIGNhc2UgaW50bF91dGlsc18xLkludGVybmFsU2xvdFRva2VuLnVuaXROYW1lOgogICAgICAgIHsKICAgICAgICAgIHZhciBzdHlsZSA9IGludGxfdXRpbHNfMS5nZXRJbnRlcm5hbFNsb3QoX19JTlRFUk5BTF9TTE9UX01BUF9fLCBudW1iZXJGb3JtYXQsICdzdHlsZScpOwoKICAgICAgICAgIGlmIChzdHlsZSA9PT0gJ3VuaXQnKSB7CiAgICAgICAgICAgIHZhciB1bml0ID0gaW50bF91dGlsc18xLmdldEludGVybmFsU2xvdChfX0lOVEVSTkFMX1NMT1RfTUFQX18sIG51bWJlckZvcm1hdCwgJ3VuaXQnKTsKICAgICAgICAgICAgdmFyIHVuaXRTeW1ib2xzID0gaWxkLnVuaXRTeW1ib2xzW3VuaXRdOwogICAgICAgICAgICB2YXIgbXUgPSBzZWxlY3RQbHVyYWwocGwsIHgsIHVuaXRTeW1ib2xzW3BhcnQudHlwZV0pW3VuaXRTeW1ib2xDaHVua0luZGV4XTsKICAgICAgICAgICAgcmVzdWx0cy5wdXNoKHsKICAgICAgICAgICAgICB0eXBlOiAndW5pdCcsCiAgICAgICAgICAgICAgdmFsdWU6IG11CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICB1bml0U3ltYm9sQ2h1bmtJbmRleCsrOwogICAgICAgICAgfQoKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KCiAgICAgIGNhc2UgaW50bF91dGlsc18xLkludGVybmFsU2xvdFRva2VuLmN1cnJlbmN5Q29kZToKICAgICAgICB7CiAgICAgICAgICB2YXIgY3VycmVuY3kgPSBpbnRsX3V0aWxzXzEuZ2V0SW50ZXJuYWxTbG90KF9fSU5URVJOQUxfU0xPVF9NQVBfXywgbnVtYmVyRm9ybWF0LCAnY3VycmVuY3knKTsKICAgICAgICAgIHJlc3VsdHMucHVzaCh7CiAgICAgICAgICAgIHR5cGU6ICdjdXJyZW5jeScsCiAgICAgICAgICAgIHZhbHVlOiBjdXJyZW5jeQogICAgICAgICAgfSk7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CgogICAgICBjYXNlIGludGxfdXRpbHNfMS5JbnRlcm5hbFNsb3RUb2tlbi5jdXJyZW5jeVN5bWJvbDoKICAgICAgICB7CiAgICAgICAgICB2YXIgY3VycmVuY3kgPSBpbnRsX3V0aWxzXzEuZ2V0SW50ZXJuYWxTbG90KF9fSU5URVJOQUxfU0xPVF9NQVBfXywgbnVtYmVyRm9ybWF0LCAnY3VycmVuY3knKTsKICAgICAgICAgIHJlc3VsdHMucHVzaCh7CiAgICAgICAgICAgIHR5cGU6ICdjdXJyZW5jeScsCiAgICAgICAgICAgIHZhbHVlOiBpbGQuY3VycmVuY3lTeW1ib2xzW2N1cnJlbmN5XS5jdXJyZW5jeVN5bWJvbCB8fCBjdXJyZW5jeQogICAgICAgICAgfSk7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CgogICAgICBjYXNlIGludGxfdXRpbHNfMS5JbnRlcm5hbFNsb3RUb2tlbi5jdXJyZW5jeU5hcnJvd1N5bWJvbDoKICAgICAgICB7CiAgICAgICAgICB2YXIgY3VycmVuY3kgPSBpbnRsX3V0aWxzXzEuZ2V0SW50ZXJuYWxTbG90KF9fSU5URVJOQUxfU0xPVF9NQVBfXywgbnVtYmVyRm9ybWF0LCAnY3VycmVuY3knKTsKICAgICAgICAgIHJlc3VsdHMucHVzaCh7CiAgICAgICAgICAgIHR5cGU6ICdjdXJyZW5jeScsCiAgICAgICAgICAgIHZhbHVlOiBpbGQuY3VycmVuY3lTeW1ib2xzW2N1cnJlbmN5XS5jdXJyZW5jeU5hcnJvd1N5bWJvbCB8fCBjdXJyZW5jeQogICAgICAgICAgfSk7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CgogICAgICBjYXNlIGludGxfdXRpbHNfMS5JbnRlcm5hbFNsb3RUb2tlbi5jdXJyZW5jeU5hbWU6CiAgICAgICAgewogICAgICAgICAgdmFyIGN1cnJlbmN5ID0gaW50bF91dGlsc18xLmdldEludGVybmFsU2xvdChfX0lOVEVSTkFMX1NMT1RfTUFQX18sIG51bWJlckZvcm1hdCwgJ2N1cnJlbmN5Jyk7CiAgICAgICAgICB2YXIgY2QgPSBzZWxlY3RQbHVyYWwocGwsIHgsIGlsZC5jdXJyZW5jeVN5bWJvbHNbY3VycmVuY3ldLmN1cnJlbmN5TmFtZSk7CiAgICAgICAgICByZXN1bHRzLnB1c2goewogICAgICAgICAgICB0eXBlOiAnY3VycmVuY3knLAogICAgICAgICAgICB2YWx1ZTogY2QKICAgICAgICAgIH0pOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQoKICAgICAgZGVmYXVsdDoKICAgICAgICB0aHJvdyBFcnJvcigidW5yZWNvZ25pemVkIHBhdHRlcm4gcGFydCBcIiIgKyBwYXJ0LnR5cGUgKyAiXCIgaW4gXCIiICsgcGF0dGVybiArICJcIiIpOwogICAgfQogIH0KCiAgcmV0dXJuIHJlc3VsdHM7Cn0KCmZ1bmN0aW9uIGZvcm1hdE51bWVyaWNUb1BhcnRzKG51bWJlckZvcm1hdCwgeCkgewogIHJldHVybiBwYXJ0aXRpb25OdW1iZXJQYXR0ZXJuKG51bWJlckZvcm1hdCwgeCk7Cn0KCmV4cG9ydHMuVW5pZmllZE51bWJlckZvcm1hdCA9IGZ1bmN0aW9uIE51bWJlckZvcm1hdChsb2NhbGVzLCBvcHRpb25zKSB7CiAgLy8gQ2Fubm90IHVzZSBgbmV3LnRhcmdldGAgYmMgb2YgSUUxMSAmIFRTIHRyYW5zcGlsZXMgaXQgdG8gc29tZXRoaW5nIGVsc2UKICBpZiAoIXRoaXMgfHwgISh0aGlzIGluc3RhbmNlb2YgZXhwb3J0cy5VbmlmaWVkTnVtYmVyRm9ybWF0KSkgewogICAgcmV0dXJuIG5ldyBleHBvcnRzLlVuaWZpZWROdW1iZXJGb3JtYXQobG9jYWxlcywgb3B0aW9ucyk7CiAgfQoKICBpbml0aWFsaXplTnVtYmVyRm9ybWF0KHRoaXMsIGxvY2FsZXMsIG9wdGlvbnMpOwogIHZhciBpbGREYXRhID0gZXhwb3J0cy5VbmlmaWVkTnVtYmVyRm9ybWF0LmxvY2FsZURhdGFbcmVtb3ZlVW5pY29kZUV4dGVuc2lvbkZyb21Mb2NhbGUoaW50bF91dGlsc18xLmdldEludGVybmFsU2xvdChfX0lOVEVSTkFMX1NMT1RfTUFQX18sIHRoaXMsICdsb2NhbGUnKSldOwogIGludGxfdXRpbHNfMS5zZXRNdWx0aUludGVybmFsU2xvdHMoX19JTlRFUk5BTF9TTE9UX01BUF9fLCB0aGlzLCB7CiAgICBwbDogbmV3IEludGwuUGx1cmFsUnVsZXMobG9jYWxlcywgaW50bF91dGlsc18xLmdldE11bHRpSW50ZXJuYWxTbG90cyhfX0lOVEVSTkFMX1NMT1RfTUFQX18sIHRoaXMsICdtaW5pbXVtRnJhY3Rpb25EaWdpdHMnLCAnbWF4aW11bUZyYWN0aW9uRGlnaXRzJywgJ21pbmltdW1JbnRlZ2VyRGlnaXRzJywgJ21pbmltdW1TaWduaWZpY2FudERpZ2l0cycsICdtYXhpbXVtU2lnbmlmaWNhbnREaWdpdHMnLCAncm91bmRpbmdUeXBlJywgJ25vdGF0aW9uJykpLAogICAgcGF0dGVybnM6IG5ldyBkYXRhXzEuUGF0dGVybnMoaWxkRGF0YS51bml0cywgaWxkRGF0YS5jdXJyZW5jaWVzLCBpbGREYXRhLm51bWJlcnMsIGludGxfdXRpbHNfMS5nZXRJbnRlcm5hbFNsb3QoX19JTlRFUk5BTF9TTE9UX01BUF9fLCB0aGlzLCAnbnVtYmVyaW5nU3lzdGVtJyksIGludGxfdXRpbHNfMS5nZXRJbnRlcm5hbFNsb3QoX19JTlRFUk5BTF9TTE9UX01BUF9fLCB0aGlzLCAndW5pdCcpLCBpbnRsX3V0aWxzXzEuZ2V0SW50ZXJuYWxTbG90KF9fSU5URVJOQUxfU0xPVF9NQVBfXywgdGhpcywgJ2N1cnJlbmN5JyksIGludGxfdXRpbHNfMS5nZXRJbnRlcm5hbFNsb3QoX19JTlRFUk5BTF9TTE9UX01BUF9fLCB0aGlzLCAnY3VycmVuY3lTaWduJykpCiAgfSk7Cn07Ci8qCiAgMTcgRUNNQVNjcmlwdCBTdGFuZGFyZCBCdWlsdC1pbiBPYmplY3RzOgogICAgRXZlcnkgYnVpbHQtaW4gRnVuY3Rpb24gb2JqZWN0LCBpbmNsdWRpbmcgY29uc3RydWN0b3JzLCB0aGF0IGlzIG5vdAogICAgaWRlbnRpZmllZCBhcyBhbiBhbm9ueW1vdXMgZnVuY3Rpb24gaGFzIGEgbmFtZSBwcm9wZXJ0eSB3aG9zZSB2YWx1ZQogICAgaXMgYSBTdHJpbmcuCgogICAgVW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQsIHRoZSBuYW1lIHByb3BlcnR5IG9mIGEgYnVpbHQtaW4gRnVuY3Rpb24KICAgIG9iamVjdCwgaWYgaXQgZXhpc3RzLCBoYXMgdGhlIGF0dHJpYnV0ZXMgeyBbW1dyaXRhYmxlXV06IGZhbHNlLAogICAgW1tFbnVtZXJhYmxlXV06IGZhbHNlLCBbW0NvbmZpZ3VyYWJsZV1dOiB0cnVlIH0uCiovCgoKZnVuY3Rpb24gZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBuYW1lLCBfYSkgewogIHZhciB2YWx1ZSA9IF9hLnZhbHVlOwogIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIG5hbWUsIHsKICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICAgIGVudW1lcmFibGU6IGZhbHNlLAogICAgd3JpdGFibGU6IHRydWUsCiAgICB2YWx1ZTogdmFsdWUKICB9KTsKfQoKZGVmaW5lUHJvcGVydHkoZXhwb3J0cy5VbmlmaWVkTnVtYmVyRm9ybWF0LnByb3RvdHlwZSwgJ2Zvcm1hdFRvUGFydHMnLCB7CiAgdmFsdWU6IGZ1bmN0aW9uIGZvcm1hdFRvUGFydHMoeCkgewogICAgcmV0dXJuIGZvcm1hdE51bWVyaWNUb1BhcnRzKHRoaXMsIHRvTnVtZXJpYyh4KSk7CiAgfQp9KTsKZGVmaW5lUHJvcGVydHkoZXhwb3J0cy5VbmlmaWVkTnVtYmVyRm9ybWF0LnByb3RvdHlwZSwgJ3Jlc29sdmVkT3B0aW9ucycsIHsKICB2YWx1ZTogZnVuY3Rpb24gcmVzb2x2ZWRPcHRpb25zKCkgewogICAgdmFyIHNsb3RzID0gaW50bF91dGlsc18xLmdldE11bHRpSW50ZXJuYWxTbG90cy5hcHBseSh2b2lkIDAsIF9fc3ByZWFkQXJyYXlzKFtfX0lOVEVSTkFMX1NMT1RfTUFQX18sIHRoaXNdLCBSRVNPTFZFRF9PUFRJT05TX0tFWVMpKTsKICAgIHZhciBybyA9IHt9OwoKICAgIGZvciAodmFyIF9pID0gMCwgUkVTT0xWRURfT1BUSU9OU19LRVlTXzEgPSBSRVNPTFZFRF9PUFRJT05TX0tFWVM7IF9pIDwgUkVTT0xWRURfT1BUSU9OU19LRVlTXzEubGVuZ3RoOyBfaSsrKSB7CiAgICAgIHZhciBrZXkgPSBSRVNPTFZFRF9PUFRJT05TX0tFWVNfMVtfaV07CiAgICAgIHZhciB2YWx1ZSA9IHNsb3RzW2tleV07CgogICAgICBpZiAodmFsdWUgIT09IHVuZGVmaW5lZCkgewogICAgICAgIHJvW2tleV0gPSB2YWx1ZTsKICAgICAgfQogICAgfQoKICAgIHJldHVybiBybzsKICB9Cn0pOwp2YXIgZm9ybWF0RGVzY3JpcHRvciA9IHsKICBlbnVtZXJhYmxlOiBmYWxzZSwKICBjb25maWd1cmFibGU6IHRydWUsCiAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICBpZiAodHlwZW9mIHRoaXMgIT09ICdvYmplY3QnIHx8ICEodGhpcyBpbnN0YW5jZW9mIGV4cG9ydHMuVW5pZmllZE51bWJlckZvcm1hdCkpIHsKICAgICAgdGhyb3cgVHlwZUVycm9yKCdJbnRsLk51bWJlckZvcm1hdCBmb3JtYXQgcHJvcGVydHkgYWNjZXNzb3IgY2FsbGVkIG9uIGltY29tcGF0aWJsZSByZWNlaXZlcicpOwogICAgfSAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXRoaXMtYWxpYXMKCgogICAgdmFyIG51bWJlckZvcm1hdCA9IHRoaXM7CiAgICB2YXIgYm91bmRGb3JtYXQgPSBpbnRsX3V0aWxzXzEuZ2V0SW50ZXJuYWxTbG90KF9fSU5URVJOQUxfU0xPVF9NQVBfXywgdGhpcywgJ2JvdW5kRm9ybWF0Jyk7CgogICAgaWYgKGJvdW5kRm9ybWF0ID09PSB1bmRlZmluZWQpIHsKICAgICAgLy8gaHR0cHM6Ly90YzM5LmVzL3Byb3Bvc2FsLXVuaWZpZWQtaW50bC1udW1iZXJmb3JtYXQvc2VjdGlvbjExL251bWJlcmZvcm1hdF9kaWZmX291dC5odG1sI3NlYy1udW1iZXItZm9ybWF0LWZ1bmN0aW9ucwogICAgICBib3VuZEZvcm1hdCA9IGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICAgIC8vIFRPRE86IGNoZWNrIGJpZ2ludAogICAgICAgIHZhciB4ID0gdG9OdW1lcmljKHZhbHVlKTsKICAgICAgICByZXR1cm4gbnVtYmVyRm9ybWF0LmZvcm1hdFRvUGFydHMoeCkubWFwKGZ1bmN0aW9uICh4KSB7CiAgICAgICAgICByZXR1cm4geC52YWx1ZTsKICAgICAgICB9KS5qb2luKCcnKTsKICAgICAgfTsgLy8gaHR0cHM6Ly9naXRodWIuY29tL3RjMzkvdGVzdDI2Mi9ibG9iL21hc3Rlci90ZXN0L2ludGw0MDIvTnVtYmVyRm9ybWF0L3Byb3RvdHlwZS9mb3JtYXQvZm9ybWF0LWZ1bmN0aW9uLW5hbWUuanMKCgogICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoYm91bmRGb3JtYXQsICduYW1lJywgewogICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSwKICAgICAgICB3cml0YWJsZTogZmFsc2UsCiAgICAgICAgdmFsdWU6ICcnCiAgICAgIH0pOwogICAgICBpbnRsX3V0aWxzXzEuc2V0SW50ZXJuYWxTbG90KF9fSU5URVJOQUxfU0xPVF9NQVBfXywgdGhpcywgJ2JvdW5kRm9ybWF0JywgYm91bmRGb3JtYXQpOwogICAgfQoKICAgIHJldHVybiBib3VuZEZvcm1hdDsKICB9Cn07IC8vIGh0dHBzOi8vZ2l0aHViLmNvbS90YzM5L3Rlc3QyNjIvYmxvYi9tYXN0ZXIvdGVzdC9pbnRsNDAyL051bWJlckZvcm1hdC9wcm90b3R5cGUvZm9ybWF0L25hbWUuanMKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShmb3JtYXREZXNjcmlwdG9yLmdldCwgJ25hbWUnLCB7CiAgY29uZmlndXJhYmxlOiB0cnVlLAogIGVudW1lcmFibGU6IGZhbHNlLAogIHdyaXRhYmxlOiBmYWxzZSwKICB2YWx1ZTogJ2dldCBmb3JtYXQnCn0pOwpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cy5VbmlmaWVkTnVtYmVyRm9ybWF0LnByb3RvdHlwZSwgJ2Zvcm1hdCcsIGZvcm1hdERlc2NyaXB0b3IpOyAvLyBTdGF0aWMgcHJvcGVydGllcwoKZGVmaW5lUHJvcGVydHkoZXhwb3J0cy5VbmlmaWVkTnVtYmVyRm9ybWF0LCAnc3VwcG9ydGVkTG9jYWxlc09mJywgewogIHZhbHVlOiBmdW5jdGlvbiBzdXBwb3J0ZWRMb2NhbGVzT2YobG9jYWxlcywgb3B0aW9ucykgewogICAgcmV0dXJuIGludGxfdXRpbHNfMS5zdXBwb3J0ZWRMb2NhbGVzKGV4cG9ydHMuVW5pZmllZE51bWJlckZvcm1hdC5hdmFpbGFibGVMb2NhbGVzLCBpbnRsX3V0aWxzXzEuZ2V0Q2Fub25pY2FsTG9jYWxlcyhsb2NhbGVzKSwgb3B0aW9ucyk7CiAgfQp9KTsKCmV4cG9ydHMuVW5pZmllZE51bWJlckZvcm1hdC5fX2FkZExvY2FsZURhdGEgPSBmdW5jdGlvbiBfX2FkZExvY2FsZURhdGEoKSB7CiAgdmFyIGRhdGEgPSBbXTsKCiAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHsKICAgIGRhdGFbX2ldID0gYXJndW1lbnRzW19pXTsKICB9CgogIGZvciAodmFyIF9hID0gMCwgZGF0YV8yID0gZGF0YTsgX2EgPCBkYXRhXzIubGVuZ3RoOyBfYSsrKSB7CiAgICB2YXIgZGF0dW0gPSBkYXRhXzJbX2FdOwogICAgdmFyIGF2YWlsYWJsZUxvY2FsZXMgPSBPYmplY3Qua2V5cyhfX3NwcmVhZEFycmF5cyhkYXR1bS5hdmFpbGFibGVMb2NhbGVzLCBPYmplY3Qua2V5cyhkYXR1bS5hbGlhc2VzKSwgT2JqZWN0LmtleXMoZGF0dW0ucGFyZW50TG9jYWxlcykpLnJlZHVjZShmdW5jdGlvbiAoYWxsLCBrKSB7CiAgICAgIGFsbFtrXSA9IHRydWU7CiAgICAgIHJldHVybiBhbGw7CiAgICB9LCB7fSkpOwoKICAgIGZvciAodmFyIF9iID0gMCwgYXZhaWxhYmxlTG9jYWxlc18xID0gYXZhaWxhYmxlTG9jYWxlczsgX2IgPCBhdmFpbGFibGVMb2NhbGVzXzEubGVuZ3RoOyBfYisrKSB7CiAgICAgIHZhciBsb2NhbGUgPSBhdmFpbGFibGVMb2NhbGVzXzFbX2JdOwoKICAgICAgdHJ5IHsKICAgICAgICBleHBvcnRzLlVuaWZpZWROdW1iZXJGb3JtYXQubG9jYWxlRGF0YVtsb2NhbGVdID0gaW50bF91dGlsc18xLnVucGFja0RhdGEobG9jYWxlLCBkYXR1bSk7CiAgICAgIH0gY2F0Y2ggKGUpIHsvLyBJZ25vcmUgaWYgd2UgZ290IG5vIGRhdGEKICAgICAgfQogICAgfQogIH0KCiAgZXhwb3J0cy5VbmlmaWVkTnVtYmVyRm9ybWF0LmF2YWlsYWJsZUxvY2FsZXMgPSBPYmplY3Qua2V5cyhleHBvcnRzLlVuaWZpZWROdW1iZXJGb3JtYXQubG9jYWxlRGF0YSk7CgogIGlmICghZXhwb3J0cy5VbmlmaWVkTnVtYmVyRm9ybWF0Ll9fZGVmYXVsdExvY2FsZSkgewogICAgZXhwb3J0cy5VbmlmaWVkTnVtYmVyRm9ybWF0Ll9fZGVmYXVsdExvY2FsZSA9IGV4cG9ydHMuVW5pZmllZE51bWJlckZvcm1hdC5hdmFpbGFibGVMb2NhbGVzWzBdOwogIH0KfTsKCmV4cG9ydHMuVW5pZmllZE51bWJlckZvcm1hdC5fX2RlZmF1bHRMb2NhbGUgPSAnZW4nOwpleHBvcnRzLlVuaWZpZWROdW1iZXJGb3JtYXQubG9jYWxlRGF0YSA9IHt9OwpleHBvcnRzLlVuaWZpZWROdW1iZXJGb3JtYXQuYXZhaWxhYmxlTG9jYWxlcyA9IFtdOwoKZXhwb3J0cy5VbmlmaWVkTnVtYmVyRm9ybWF0LmdldERlZmF1bHRMb2NhbGUgPSBmdW5jdGlvbiAoKSB7CiAgcmV0dXJuIGV4cG9ydHMuVW5pZmllZE51bWJlckZvcm1hdC5fX2RlZmF1bHRMb2NhbGU7Cn07CgpleHBvcnRzLlVuaWZpZWROdW1iZXJGb3JtYXQucG9seWZpbGxlZCA9IHRydWU7CgpmdW5jdGlvbiBzZXROdW1iZXJGb3JtYXRVbml0T3B0aW9ucyhuZiwgb3B0aW9ucykgewogIGlmIChvcHRpb25zID09PSB2b2lkIDApIHsKICAgIG9wdGlvbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpOwogIH0gLy8gaHR0cHM6Ly90YzM5LmVzL3Byb3Bvc2FsLXVuaWZpZWQtaW50bC1udW1iZXJmb3JtYXQvc2VjdGlvbjExL251bWJlcmZvcm1hdF9wcm9wb3NlZF9vdXQuaHRtbCNzZWMtc2V0bnVtYmVyZm9ybWF0dW5pdG9wdGlvbnMKCgogIHZhciBzdHlsZSA9IGludGxfdXRpbHNfMS5nZXRPcHRpb24ob3B0aW9ucywgJ3N0eWxlJywgJ3N0cmluZycsIFsnZGVjaW1hbCcsICdwZXJjZW50JywgJ2N1cnJlbmN5JywgJ3VuaXQnXSwgJ2RlY2ltYWwnKTsKICBpbnRsX3V0aWxzXzEuc2V0SW50ZXJuYWxTbG90KF9fSU5URVJOQUxfU0xPVF9NQVBfXywgbmYsICdzdHlsZScsIHN0eWxlKTsKICB2YXIgY3VycmVuY3kgPSBpbnRsX3V0aWxzXzEuZ2V0T3B0aW9uKG9wdGlvbnMsICdjdXJyZW5jeScsICdzdHJpbmcnLCB1bmRlZmluZWQsIHVuZGVmaW5lZCk7CgogIGlmIChjdXJyZW5jeSAhPT0gdW5kZWZpbmVkICYmICFpbnRsX3V0aWxzXzEuaXNXZWxsRm9ybWVkQ3VycmVuY3lDb2RlKGN1cnJlbmN5KSkgewogICAgdGhyb3cgUmFuZ2VFcnJvcignTWFsZm9ybWVkIGN1cnJlbmN5IGNvZGUnKTsKICB9CgogIHZhciBjdXJyZW5jeURpc3BsYXkgPSBpbnRsX3V0aWxzXzEuZ2V0T3B0aW9uKG9wdGlvbnMsICdjdXJyZW5jeURpc3BsYXknLCAnc3RyaW5nJywgWydjb2RlJywgJ3N5bWJvbCcsICduYXJyb3dTeW1ib2wnLCAnbmFtZSddLCAnc3ltYm9sJyk7CiAgdmFyIGN1cnJlbmN5U2lnbiA9IGludGxfdXRpbHNfMS5nZXRPcHRpb24ob3B0aW9ucywgJ2N1cnJlbmN5U2lnbicsICdzdHJpbmcnLCBbJ3N0YW5kYXJkJywgJ2FjY291bnRpbmcnXSwgJ3N0YW5kYXJkJyk7CiAgdmFyIHVuaXQgPSBpbnRsX3V0aWxzXzEuZ2V0T3B0aW9uKG9wdGlvbnMsICd1bml0JywgJ3N0cmluZycsIHVuZGVmaW5lZCwgdW5kZWZpbmVkKTsKCiAgaWYgKHVuaXQgIT09IHVuZGVmaW5lZCAmJiAhaXNXZWxsRm9ybWVkVW5pdElkZW50aWZpZXIodW5pdCkpIHsKICAgIHRocm93IFJhbmdlRXJyb3IoJ0ludmFsaWQgdW5pdCBhcmd1bWVudCBmb3IgSW50bC5OdW1iZXJGb3JtYXQoKScpOwogIH0KCiAgdmFyIHVuaXREaXNwbGF5ID0gaW50bF91dGlsc18xLmdldE9wdGlvbihvcHRpb25zLCAndW5pdERpc3BsYXknLCAnc3RyaW5nJywgWydzaG9ydCcsICduYXJyb3cnLCAnbG9uZyddLCAnc2hvcnQnKTsKCiAgaWYgKHN0eWxlID09PSAnY3VycmVuY3knKSB7CiAgICBpZiAoY3VycmVuY3kgPT09IHVuZGVmaW5lZCkgewogICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdjdXJyZW5jeSBjYW5ub3QgYmUgdW5kZWZpbmVkJyk7CiAgICB9CgogICAgaW50bF91dGlsc18xLnNldE11bHRpSW50ZXJuYWxTbG90cyhfX0lOVEVSTkFMX1NMT1RfTUFQX18sIG5mLCB7CiAgICAgIGN1cnJlbmN5OiBjdXJyZW5jeS50b1VwcGVyQ2FzZSgpLAogICAgICBjdXJyZW5jeURpc3BsYXk6IGN1cnJlbmN5RGlzcGxheSwKICAgICAgY3VycmVuY3lTaWduOiBjdXJyZW5jeVNpZ24KICAgIH0pOwogIH0gZWxzZSBpZiAoc3R5bGUgPT09ICd1bml0JykgewogICAgaWYgKHVuaXQgPT09IHVuZGVmaW5lZCkgewogICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCd1bml0IGNhbm5vdCBiZSB1bmRlZmluZWQnKTsKICAgIH0KCiAgICBpbnRsX3V0aWxzXzEuc2V0TXVsdGlJbnRlcm5hbFNsb3RzKF9fSU5URVJOQUxfU0xPVF9NQVBfXywgbmYsIHsKICAgICAgdW5pdDogdW5pdCwKICAgICAgdW5pdERpc3BsYXk6IHVuaXREaXNwbGF5CiAgICB9KTsKICB9Cn0gLy8gVGFraW5nIHRoZSBzaG9ydGN1dCBoZXJlIGFuZCB1c2VkIHRoZSBuYXRpdmUgTnVtYmVyRm9ybWF0IGZvciBmb3JtYXR0aW5nIG51bWJlcnMuCgoKZnVuY3Rpb24gZm9ybWF0TnVtYmVyVG9TdHJpbmcobnVtYmVyRm9ybWF0LCB4KSB7CiAgdmFyIGlzTmVnYXRpdmUgPSB4IDwgMCB8fCBpbnRsX3V0aWxzXzEub2JqZWN0SXMoeCwgLTApOwoKICBpZiAoaXNOZWdhdGl2ZSkgewogICAgeCA9IC14OwogIH0KCiAgdmFyIF9hID0gaW50bF91dGlsc18xLmdldE11bHRpSW50ZXJuYWxTbG90cyhfX0lOVEVSTkFMX1NMT1RfTUFQX18sIG51bWJlckZvcm1hdCwgJ3JvdW5kaW5nVHlwZScsICdtaW5pbXVtRnJhY3Rpb25EaWdpdHMnLCAnbWF4aW11bUZyYWN0aW9uRGlnaXRzJywgJ21pbmltdW1JbnRlZ2VyRGlnaXRzJywgJ21pbmltdW1TaWduaWZpY2FudERpZ2l0cycsICdtYXhpbXVtU2lnbmlmaWNhbnREaWdpdHMnKSwKICAgICAgcm91bmRpbmdUeXBlID0gX2Eucm91bmRpbmdUeXBlLAogICAgICBtaW5pbXVtU2lnbmlmaWNhbnREaWdpdHMgPSBfYS5taW5pbXVtU2lnbmlmaWNhbnREaWdpdHMsCiAgICAgIG1heGltdW1TaWduaWZpY2FudERpZ2l0cyA9IF9hLm1heGltdW1TaWduaWZpY2FudERpZ2l0cywKICAgICAgbWluaW11bUZyYWN0aW9uRGlnaXRzID0gX2EubWluaW11bUZyYWN0aW9uRGlnaXRzLAogICAgICBtYXhpbXVtRnJhY3Rpb25EaWdpdHMgPSBfYS5tYXhpbXVtRnJhY3Rpb25EaWdpdHMsCiAgICAgIG1pbmltdW1JbnRlZ2VyRGlnaXRzID0gX2EubWluaW11bUludGVnZXJEaWdpdHM7CgogIHZhciByZXN1bHQ7CgogIGlmIChyb3VuZGluZ1R5cGUgPT09ICdzaWduaWZpY2FudERpZ2l0cycpIHsKICAgIHJlc3VsdCA9IHV0aWxzXzEudG9SYXdQcmVjaXNpb24oeCwgbWluaW11bVNpZ25pZmljYW50RGlnaXRzLCBtYXhpbXVtU2lnbmlmaWNhbnREaWdpdHMpOwogIH0gZWxzZSBpZiAocm91bmRpbmdUeXBlID09PSAnZnJhY3Rpb25EaWdpdHMnKSB7CiAgICByZXN1bHQgPSB1dGlsc18xLnRvUmF3Rml4ZWQoeCwgbWluaW11bUZyYWN0aW9uRGlnaXRzLCBtYXhpbXVtRnJhY3Rpb25EaWdpdHMpOwogIH0gZWxzZSB7CiAgICBpbnRsX3V0aWxzXzEuaW52YXJpYW50KHJvdW5kaW5nVHlwZSA9PT0gJ2NvbXBhY3RSb3VuZGluZycsICdyb3VuZGluZ1R5cGUgbXVzdCBiZSBjb21wYWN0Um91bmRpbmcnKTsKICAgIHJlc3VsdCA9IHV0aWxzXzEudG9SYXdQcmVjaXNpb24oeCwgMSwgMik7CgogICAgaWYgKHJlc3VsdC5pbnRlZ2VyRGlnaXRzQ291bnQgPiAxKSB7CiAgICAgIHJlc3VsdCA9IHV0aWxzXzEudG9SYXdGaXhlZCh4LCAwLCAwKTsKICAgIH0KICB9CgogIHggPSByZXN1bHQucm91bmRlZE51bWJlcjsKICB2YXIgc3RyaW5nID0gcmVzdWx0LmZvcm1hdHRlZFN0cmluZzsKICB2YXIgaW50ID0gcmVzdWx0LmludGVnZXJEaWdpdHNDb3VudDsKICB2YXIgbWluSW50ZWdlciA9IG1pbmltdW1JbnRlZ2VyRGlnaXRzOwoKICBpZiAoaW50IDwgbWluSW50ZWdlcikgewogICAgdmFyIGZvcndhcmRaZXJvcyA9IHV0aWxzXzEucmVwZWF0KCcwJywgbWluSW50ZWdlciAtIGludCk7CiAgICBzdHJpbmcgPSBmb3J3YXJkWmVyb3MgKyBzdHJpbmc7CiAgfQoKICBpZiAoaXNOZWdhdGl2ZSkgewogICAgeCA9IC14OwogIH0KCiAgcmV0dXJuIHsKICAgIHJvdW5kZWROdW1iZXI6IHgsCiAgICBmb3JtYXR0ZWRTdHJpbmc6IHN0cmluZwogIH07Cn0KLyoqCiAqIFRoZSBhYnN0cmFjdCBvcGVyYXRpb24gQ29tcHV0ZUV4cG9uZW50IGNvbXB1dGVzIGFuIGV4cG9uZW50IChwb3dlciBvZiB0ZW4pIGJ5IHdoaWNoIHRvIHNjYWxlIHgKICogYWNjb3JkaW5nIHRvIHRoZSBudW1iZXIgZm9ybWF0dGluZyBzZXR0aW5ncy4gSXQgaGFuZGxlcyBjYXNlcyBzdWNoIGFzIDk5OSByb3VuZGluZyB1cCB0byAxMDAwLAogKiByZXF1aXJpbmcgYSBkaWZmZXJlbnQgZXhwb25lbnQuCiAqLwoKCmZ1bmN0aW9uIGNvbXB1dGVFeHBvbmVudChudW1iZXJGb3JtYXQsIHgpIHsKICBpZiAoeCA9PT0gMCkgewogICAgcmV0dXJuIDA7CiAgfQoKICBpZiAoeCA8IDApIHsKICAgIHggPSAteDsKICB9CgogIHZhciBtYWduaXR1ZGUgPSB1dGlsc18xLmdldE1hZ25pdHVkZSh4KTsKICB2YXIgZXhwb25lbnQgPSBjb21wdXRlRXhwb25lbnRGb3JNYWduaXR1ZGUobnVtYmVyRm9ybWF0LCBtYWduaXR1ZGUpOwogIHggPSB4IC8gTWF0aC5wb3coMTAsIGV4cG9uZW50KTsgLy8gcG90ZW50aWFsIElFRUUgZmxvYXRpbmcgcG9pbnQgZXJyb3IKCiAgdmFyIGZvcm1hdE51bWJlclJlc3VsdCA9IGZvcm1hdE51bWJlclRvU3RyaW5nKG51bWJlckZvcm1hdCwgeCk7CgogIGlmIChmb3JtYXROdW1iZXJSZXN1bHQucm91bmRlZE51bWJlciA9PT0gMCkgewogICAgcmV0dXJuIGV4cG9uZW50OwogIH0KCiAgdmFyIG5ld01hZ25pdHVkZSA9IHV0aWxzXzEuZ2V0TWFnbml0dWRlKHgpOwoKICBpZiAobmV3TWFnbml0dWRlID09PSBtYWduaXR1ZGUgLSBleHBvbmVudCkgewogICAgcmV0dXJuIGV4cG9uZW50OwogIH0KCiAgcmV0dXJuIGNvbXB1dGVFeHBvbmVudEZvck1hZ25pdHVkZShudW1iZXJGb3JtYXQsIG1hZ25pdHVkZSArIDEpOwp9Ci8qKgogKiBUaGUgYWJzdHJhY3Qgb3BlcmF0aW9uIENvbXB1dGVFeHBvbmVudEZvck1hZ25pdHVkZSBjb21wdXRlcyBhbiBleHBvbmVudCBieSB3aGljaCB0byBzY2FsZSBhCiAqIG51bWJlciBvZiB0aGUgZ2l2ZW4gbWFnbml0dWRlIChwb3dlciBvZiB0ZW4gb2YgdGhlIG1vc3Qgc2lnbmlmaWNhbnQgZGlnaXQpIGFjY29yZGluZyB0byB0aGUKICogbG9jYWxlIGFuZCB0aGUgZGVzaXJlZCBub3RhdGlvbiAoc2NpZW50aWZpYywgZW5naW5lZXJpbmcsIG9yIGNvbXBhY3QpLgogKi8KCgpmdW5jdGlvbiBjb21wdXRlRXhwb25lbnRGb3JNYWduaXR1ZGUobnVtYmVyRm9ybWF0LCBtYWduaXR1ZGUpIHsKICB2YXIgX2E7CgogIHZhciBub3RhdGlvbiA9IGludGxfdXRpbHNfMS5nZXRJbnRlcm5hbFNsb3QoX19JTlRFUk5BTF9TTE9UX01BUF9fLCBudW1iZXJGb3JtYXQsICdub3RhdGlvbicpOwogIHZhciBzdHlsZSA9IGludGxfdXRpbHNfMS5nZXRJbnRlcm5hbFNsb3QoX19JTlRFUk5BTF9TTE9UX01BUF9fLCBudW1iZXJGb3JtYXQsICdzdHlsZScpOwogIHZhciBpbGQgPSBpbnRsX3V0aWxzXzEuZ2V0SW50ZXJuYWxTbG90KF9fSU5URVJOQUxfU0xPVF9NQVBfXywgbnVtYmVyRm9ybWF0LCAnaWxkJyk7CgogIHN3aXRjaCAobm90YXRpb24pIHsKICAgIGNhc2UgJ3N0YW5kYXJkJzoKICAgICAgcmV0dXJuIDA7CgogICAgY2FzZSAnc2NpZW50aWZpYyc6CiAgICAgIHJldHVybiBtYWduaXR1ZGU7CgogICAgY2FzZSAnZW5naW5lZXJpbmcnOgogICAgICByZXR1cm4gTWF0aC5mbG9vcihtYWduaXR1ZGUgLyAzKSAqIDM7CgogICAgY2FzZSAnY29tcGFjdCc6CiAgICAgIHsKICAgICAgICB2YXIgY29tcGFjdERpc3BsYXkgPSBpbnRsX3V0aWxzXzEuZ2V0SW50ZXJuYWxTbG90KF9fSU5URVJOQUxfU0xPVF9NQVBfXywgbnVtYmVyRm9ybWF0LCAnY29tcGFjdERpc3BsYXknKTsKICAgICAgICB2YXIgY3VycmVuY3lEaXNwbGF5ID0gaW50bF91dGlsc18xLmdldEludGVybmFsU2xvdChfX0lOVEVSTkFMX1NMT1RfTUFQX18sIG51bWJlckZvcm1hdCwgJ2N1cnJlbmN5RGlzcGxheScpOwogICAgICAgIHZhciB0aHJlc2hvbGRNYXAgPSB2b2lkIDA7CgogICAgICAgIGlmIChzdHlsZSA9PT0gJ2N1cnJlbmN5JyAmJiBjdXJyZW5jeURpc3BsYXkgIT09ICduYW1lJykgewogICAgICAgICAgdGhyZXNob2xkTWFwID0gKGNvbXBhY3REaXNwbGF5ID09PSAnbG9uZycgPyBpbGQuY3VycmVuY3kuY29tcGFjdExvbmcgOiBpbGQuY3VycmVuY3kuY29tcGFjdFNob3J0KSB8fCBpbGQuY3VycmVuY3kuY29tcGFjdFNob3J0OwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aHJlc2hvbGRNYXAgPSBjb21wYWN0RGlzcGxheSA9PT0gJ2xvbmcnID8gaWxkLmRlY2ltYWwuY29tcGFjdExvbmcgOiBpbGQuZGVjaW1hbC5jb21wYWN0U2hvcnQ7CiAgICAgICAgfQoKICAgICAgICBpZiAoIXRocmVzaG9sZE1hcCkgewogICAgICAgICAgcmV0dXJuIDA7CiAgICAgICAgfQoKICAgICAgICB2YXIgbnVtID0gU3RyaW5nKE1hdGgucG93KDEwLCBtYWduaXR1ZGUpKTsKICAgICAgICB2YXIgdGhyZXNob2xkcyA9IE9iamVjdC5rZXlzKHRocmVzaG9sZE1hcCk7IC8vIFRPRE86IHRoaXMgY2FuIGJlIHByZS1wcm9jZXNzZWQKCiAgICAgICAgaWYgKCEoKF9hID0gdGhyZXNob2xkTWFwW251bV0pID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5vdGhlcikpIHsKICAgICAgICAgIHJldHVybiAwOwogICAgICAgIH0KCiAgICAgICAgaWYgKG51bSA8IHRocmVzaG9sZHNbMF0pIHsKICAgICAgICAgIHJldHVybiAwOwogICAgICAgIH0KCiAgICAgICAgaWYgKG51bSA+IHRocmVzaG9sZHNbdGhyZXNob2xkcy5sZW5ndGggLSAxXSkgewogICAgICAgICAgcmV0dXJuIHV0aWxzXzEuZ2V0TWFnbml0dWRlKCt0aHJlc2hvbGRzW3RocmVzaG9sZHMubGVuZ3RoIC0gMV0pOwogICAgICAgIH0KCiAgICAgICAgdmFyIGkgPSB0aHJlc2hvbGRzLmluZGV4T2YobnVtKTsKCiAgICAgICAgZm9yICg7IGkgPiAwICYmIHRocmVzaG9sZE1hcFt0aHJlc2hvbGRzW2kgLSAxXV0ub3RoZXIgPT09IHRocmVzaG9sZE1hcFtudW1dLm90aGVyOyBpLS0pOwoKICAgICAgICByZXR1cm4gdXRpbHNfMS5nZXRNYWduaXR1ZGUoK3RocmVzaG9sZHNbaV0pOwogICAgICB9CiAgfQp9Ci8qKgogKiBodHRwczovL3RjMzkuZXMvcHJvcG9zYWwtdW5pZmllZC1pbnRsLW51bWJlcmZvcm1hdC9zZWN0aW9uMTEvbnVtYmVyZm9ybWF0X3Byb3Bvc2VkX291dC5odG1sI3NlYy1nZXRudW1iZXJmb3JtYXRwYXR0ZXJuCiAqCiAqIFRoZSBhYnN0cmFjdCBvcGVyYXRpb24gR2V0TnVtYmVyRm9ybWF0UGF0dGVybiBjb25zaWRlcnMgdGhlIHJlc29sdmVkIHVuaXQtcmVsYXRlZCBvcHRpb25zIGluIHRoZQogKiBudW1iZXIgZm9ybWF0IG9iamVjdCBhbG9uZyB3aXRoIHRoZSBmaW5hbCBzY2FsZWQgYW5kIHJvdW5kZWQgbnVtYmVyIGJlaW5nIGZvcm1hdHRlZCBhbmQgcmV0dXJucyBhCiAqIHBhdHRlcm4sIGEgU3RyaW5nIHZhbHVlIGFzIGRlc2NyaWJlZCBpbiAxLjMuMy4KICovCgoKZnVuY3Rpb24gZ2V0TnVtYmVyRm9ybWF0UGF0dGVybihudW1iZXJGb3JtYXQsIHgsIGV4cG9uZW50KSB7CiAgdmFyIF9hID0gaW50bF91dGlsc18xLmdldE11bHRpSW50ZXJuYWxTbG90cyhfX0lOVEVSTkFMX1NMT1RfTUFQX18sIG51bWJlckZvcm1hdCwgJ3N0eWxlJywgJ3BhdHRlcm5zJywgJ3NpZ25EaXNwbGF5JywgJ25vdGF0aW9uJyksCiAgICAgIHN0eWxlID0gX2Euc3R5bGUsCiAgICAgIHNsb3RzID0gX2EucGF0dGVybnM7CgogIHZhciBwYXR0ZXJuczsKCiAgc3dpdGNoIChzdHlsZSkgewogICAgY2FzZSAncGVyY2VudCc6CiAgICAgIHBhdHRlcm5zID0gc2xvdHMucGVyY2VudDsKICAgICAgYnJlYWs7CgogICAgY2FzZSAndW5pdCc6CiAgICAgIHsKICAgICAgICB2YXIgdW5pdERpc3BsYXkgPSBpbnRsX3V0aWxzXzEuZ2V0SW50ZXJuYWxTbG90KF9fSU5URVJOQUxfU0xPVF9NQVBfXywgbnVtYmVyRm9ybWF0LCAndW5pdERpc3BsYXknKTsKICAgICAgICB2YXIgdW5pdCA9IGludGxfdXRpbHNfMS5nZXRJbnRlcm5hbFNsb3QoX19JTlRFUk5BTF9TTE9UX01BUF9fLCBudW1iZXJGb3JtYXQsICd1bml0Jyk7CiAgICAgICAgcGF0dGVybnMgPSBzbG90cy51bml0W3VuaXRdW3VuaXREaXNwbGF5XTsKICAgICAgICBicmVhazsKICAgICAgfQoKICAgIGNhc2UgJ2N1cnJlbmN5JzoKICAgICAgewogICAgICAgIHZhciBfYiA9IGludGxfdXRpbHNfMS5nZXRNdWx0aUludGVybmFsU2xvdHMoX19JTlRFUk5BTF9TTE9UX01BUF9fLCBudW1iZXJGb3JtYXQsICdjdXJyZW5jeScsICdjdXJyZW5jeURpc3BsYXknLCAnY3VycmVuY3lTaWduJyksCiAgICAgICAgICAgIGN1cnJlbmN5ID0gX2IuY3VycmVuY3ksCiAgICAgICAgICAgIGN1cnJlbmN5RGlzcGxheSA9IF9iLmN1cnJlbmN5RGlzcGxheSwKICAgICAgICAgICAgY3VycmVuY3lTaWduID0gX2IuY3VycmVuY3lTaWduOwoKICAgICAgICBwYXR0ZXJucyA9IHNsb3RzLmN1cnJlbmN5W2N1cnJlbmN5XVtjdXJyZW5jeURpc3BsYXldW2N1cnJlbmN5U2lnbl07CiAgICAgICAgYnJlYWs7CiAgICAgIH0KCiAgICBjYXNlICdkZWNpbWFsJzoKICAgICAgcGF0dGVybnMgPSBzbG90cy5kZWNpbWFsOwogICAgICBicmVhazsKICB9CgogIHZhciBub3RhdGlvbiA9IGludGxfdXRpbHNfMS5nZXRJbnRlcm5hbFNsb3QoX19JTlRFUk5BTF9TTE9UX01BUF9fLCBudW1iZXJGb3JtYXQsICdub3RhdGlvbicpOwogIHZhciBzaWduRGlzcGxheSA9IGludGxfdXRpbHNfMS5nZXRJbnRlcm5hbFNsb3QoX19JTlRFUk5BTF9TTE9UX01BUF9fLCBudW1iZXJGb3JtYXQsICdzaWduRGlzcGxheScpOwogIHZhciBzaWduRGlzcGxheVBhdHRlcm4gPSBwYXR0ZXJuc1tzaWduRGlzcGxheV07CiAgdmFyIHNpZ25QYXR0ZXJuOwoKICBpZiAoIWlzTmFOKHgpICYmIGlzRmluaXRlKHgpKSB7CiAgICBpZiAobm90YXRpb24gPT09ICdzY2llbnRpZmljJyB8fCBub3RhdGlvbiA9PT0gJ2VuZ2luZWVyaW5nJykgewogICAgICBzaWduUGF0dGVybiA9IHNpZ25EaXNwbGF5UGF0dGVybi5zY2llbnRpZmljOwogICAgfSBlbHNlIGlmIChleHBvbmVudCAhPT0gMCkgewogICAgICBpbnRsX3V0aWxzXzEuaW52YXJpYW50KG5vdGF0aW9uID09PSAnY29tcGFjdCcsICdub3RhdGlvbiBtdXN0IGJlIGNvbXBhY3QnKTsKICAgICAgdmFyIGNvbXBhY3REaXNwbGF5ID0gaW50bF91dGlsc18xLmdldEludGVybmFsU2xvdChfX0lOVEVSTkFMX1NMT1RfTUFQX18sIG51bWJlckZvcm1hdCwgJ2NvbXBhY3REaXNwbGF5Jyk7CiAgICAgIHZhciBkZWNpbWFsTnVtID0gU3RyaW5nKE1hdGgucG93KDEwLCBleHBvbmVudCkpOwoKICAgICAgaWYgKGNvbXBhY3REaXNwbGF5ID09PSAnc2hvcnQnICYmIGV4cG9uZW50ID4gMiAmJiBleHBvbmVudCA8IDE1KSB7CiAgICAgICAgc2lnblBhdHRlcm4gPSBzaWduRGlzcGxheVBhdHRlcm4uY29tcGFjdFNob3J0W2RlY2ltYWxOdW1dOwogICAgICB9IGVsc2UgaWYgKGV4cG9uZW50ID4gMiAmJiBleHBvbmVudCA8IDE1KSB7CiAgICAgICAgaW50bF91dGlsc18xLmludmFyaWFudChjb21wYWN0RGlzcGxheSA9PT0gJ2xvbmcnLCAnY29tcGFjdERpc3BsYXkgbXVzdCBiZSBsb25nJyk7CiAgICAgICAgc2lnblBhdHRlcm4gPSBzaWduRGlzcGxheVBhdHRlcm4uY29tcGFjdExvbmdbZGVjaW1hbE51bV07CiAgICAgIH0KICAgIH0KICB9CgogIGlmICghc2lnblBhdHRlcm4pIHsKICAgIHNpZ25QYXR0ZXJuID0gc2lnbkRpc3BsYXlQYXR0ZXJuLnN0YW5kYXJkOwogIH0KCiAgdmFyIHBhdHRlcm47CgogIGlmIChzaWduRGlzcGxheSA9PT0gJ25ldmVyJykgewogICAgcGF0dGVybiA9IHNpZ25QYXR0ZXJuLnplcm9QYXR0ZXJuOwogIH0gZWxzZSBpZiAoc2lnbkRpc3BsYXkgPT09ICdhdXRvJykgewogICAgaWYgKGludGxfdXRpbHNfMS5vYmplY3RJcyh4LCAwKSB8fCB4ID4gMCB8fCBpc05hTih4KSkgewogICAgICBwYXR0ZXJuID0gc2lnblBhdHRlcm4uemVyb1BhdHRlcm47CiAgICB9IGVsc2UgewogICAgICBwYXR0ZXJuID0gc2lnblBhdHRlcm4ubmVnYXRpdmVQYXR0ZXJuOwogICAgfQogIH0gZWxzZSBpZiAoc2lnbkRpc3BsYXkgPT09ICdhbHdheXMnKSB7CiAgICBpZiAoaW50bF91dGlsc18xLm9iamVjdElzKHgsIDApIHx8IHggPiAwIHx8IGlzTmFOKHgpKSB7CiAgICAgIHBhdHRlcm4gPSBzaWduUGF0dGVybi5wb3NpdGl2ZVBhdHRlcm47CiAgICB9IGVsc2UgewogICAgICBwYXR0ZXJuID0gc2lnblBhdHRlcm4ubmVnYXRpdmVQYXR0ZXJuOwogICAgfQogIH0gZWxzZSB7CiAgICBpbnRsX3V0aWxzXzEuaW52YXJpYW50KHNpZ25EaXNwbGF5ID09PSAnZXhjZXB0WmVybycsICdzaWduRGlzcGxheSBtdXN0IGJlIGV4Y2VwdFplcm8nKTsKCiAgICBpZiAoaW50bF91dGlsc18xLm9iamVjdElzKHgsIDApIHx8IGlzTmFOKHgpKSB7CiAgICAgIHBhdHRlcm4gPSBzaWduUGF0dGVybi56ZXJvUGF0dGVybjsKICAgIH0gZWxzZSBpZiAoeCA+IDAgfHwgaW50bF91dGlsc18xLm9iamVjdElzKHgsICswKSkgewogICAgICBwYXR0ZXJuID0gc2lnblBhdHRlcm4ucG9zaXRpdmVQYXR0ZXJuOwogICAgfSBlbHNlIHsKICAgICAgcGF0dGVybiA9IHNpZ25QYXR0ZXJuLm5lZ2F0aXZlUGF0dGVybjsKICAgIH0KICB9CgogIHJldHVybiBwYXR0ZXJuOwp9CgpmdW5jdGlvbiBzZWxlY3RQbHVyYWwocGwsIHgsIHJ1bGVzKSB7CiAgcmV0dXJuIHJ1bGVzW3BsLnNlbGVjdCh4KV0gfHwgcnVsZXMub3RoZXI7Cn0KCmZ1bmN0aW9uIHRvTnVtZXJpYyh2YWwpIHsKICBpZiAodHlwZW9mIHZhbCA9PT0gJ2JpZ2ludCcpIHsKICAgIHJldHVybiB2YWw7CiAgfQoKICByZXR1cm4gdG9OdW1iZXIodmFsKTsKfQoKZnVuY3Rpb24gdG9OdW1iZXIodmFsKSB7CiAgaWYgKHZhbCA9PT0gdW5kZWZpbmVkKSB7CiAgICByZXR1cm4gTmFOOwogIH0KCiAgaWYgKHZhbCA9PT0gbnVsbCkgewogICAgcmV0dXJuICswOwogIH0KCiAgaWYgKHR5cGVvZiB2YWwgPT09ICdib29sZWFuJykgewogICAgcmV0dXJuIHZhbCA/IDEgOiArMDsKICB9CgogIGlmICh0eXBlb2YgdmFsID09PSAnbnVtYmVyJykgewogICAgcmV0dXJuIHZhbDsKICB9CgogIGlmICh0eXBlb2YgdmFsID09PSAnc3ltYm9sJyB8fCB0eXBlb2YgdmFsID09PSAnYmlnaW50JykgewogICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQ2Fubm90IGNvbnZlcnQgc3ltYm9sL2JpZ2ludCB0byBudW1iZXInKTsKICB9CgogIHJldHVybiBOdW1iZXIodmFsKTsKfQoKdHJ5IHsKICAvLyBJRTExIGRvZXMgbm90IGhhdmUgU3ltYm9sCiAgaWYgKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnKSB7CiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cy5VbmlmaWVkTnVtYmVyRm9ybWF0LnByb3RvdHlwZSwgU3ltYm9sLnRvU3RyaW5nVGFnLCB7CiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICAgICAgZW51bWVyYWJsZTogZmFsc2UsCiAgICAgIHdyaXRhYmxlOiBmYWxzZSwKICAgICAgdmFsdWU6ICdPYmplY3QnCiAgICB9KTsKICB9IC8vIGh0dHBzOi8vZ2l0aHViLmNvbS90YzM5L3Rlc3QyNjIvYmxvYi9tYXN0ZXIvdGVzdC9pbnRsNDAyL051bWJlckZvcm1hdC9sZW5ndGguanMKCgogIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLlVuaWZpZWROdW1iZXJGb3JtYXQucHJvdG90eXBlLmNvbnN0cnVjdG9yLCAnbGVuZ3RoJywgewogICAgY29uZmlndXJhYmxlOiB0cnVlLAogICAgZW51bWVyYWJsZTogZmFsc2UsCiAgICB3cml0YWJsZTogZmFsc2UsCiAgICB2YWx1ZTogMAogIH0pOyAvLyBodHRwczovL2dpdGh1Yi5jb20vdGMzOS90ZXN0MjYyL2Jsb2IvbWFzdGVyL3Rlc3QvaW50bDQwMi9OdW1iZXJGb3JtYXQvc3VwcG9ydGVkTG9jYWxlc09mL2xlbmd0aC5qcwoKICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cy5VbmlmaWVkTnVtYmVyRm9ybWF0LnN1cHBvcnRlZExvY2FsZXNPZiwgJ2xlbmd0aCcsIHsKICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICAgIGVudW1lcmFibGU6IGZhbHNlLAogICAgd3JpdGFibGU6IGZhbHNlLAogICAgdmFsdWU6IDEKICB9KTsKICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cy5VbmlmaWVkTnVtYmVyRm9ybWF0LCAncHJvdG90eXBlJywgewogICAgY29uZmlndXJhYmxlOiBmYWxzZSwKICAgIGVudW1lcmFibGU6IGZhbHNlLAogICAgd3JpdGFibGU6IGZhbHNlLAogICAgdmFsdWU6IGV4cG9ydHMuVW5pZmllZE51bWJlckZvcm1hdC5wcm90b3R5cGUKICB9KTsKfSBjYXRjaCAoZSkgey8vIE1ldGEgZml4IHNvIHdlJ3JlIHRlc3QyNjItY29tcGxpYW50LCBub3QgaW1wb3J0YW50Cn0="},{"version":3,"mappings":"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","names":["VALID_NUMBERING_SYSTEM_NAMES","Object","create","_i","nu","RESOLVED_OPTIONS_KEYS","SHORTENED_SACTION_UNITS","intl_utils_1","map","replace","toLowerCase","str","_","c","isWellFormedUnitIdentifier","unit","indexOf","units","split","length","isUnitSupported","Intl","NumberFormat","undefined","style","e","exports","removeUnicodeExtensionFromLocale","canonicalLocale","extensionIndex","slice","__INTERNAL_SLOT_MAP__","WeakMap","currencyDigits","currencyDigitsData","initializeNumberFormat","nf","locales","opts","requestedLocales","options","opt","matcher","localeMatcher","numberingSystem","RangeError","r","getDefaultLocale","availableLocales","localeData","ildData","locale","dataLocale","ild","data_1","currencies","numbers","setNumberFormatUnitOptions","mnfdDefault","mxfdDefault","currency","cDigits","notation","compactDisplay","useGrouping","signDisplay","partitionNumberPattern","numberFormat","x","pl","exponent","n","formattedX","isNaN","symbols","nan","isFinite","infinity","computeExponent","Math","formatNumberResult","formatNumberToString","formattedString","roundedNumber","pattern","getNumberFormatPattern","patternParts","results","unitSymbolChunkIndex","part","type","push","number","value","Infinity","ILND","replacementTable","replacedDigits","_b","digit","decimalSepIndex","integer","fraction","groupSepSymbol","group","groups","i","integerGroup","pop","decimal","plusSign","minusSign","compactSymbol","compactData","compactShort","selectPlural","String","compactName","currencyDisplay","compactLong","scientificSeparator","exponential","scientificExponent","exponentResult","utils_1","percentSign","unitSymbol","unitNarrowSymbol","unitName","unitSymbols","mu","currencyCode","currencySymbol","currencySymbols","currencyNarrowSymbol","currencyName","cd","Error","formatNumericToParts","PluralRules","patterns","defineProperty","target","name","_a","configurable","enumerable","writable","prototype","formatToParts","toNumeric","resolvedOptions","slots","apply","__spreadArrays","ro","key","formatDescriptor","get","TypeError","boundFormat","join","supportedLocalesOf","__addLocaleData","data","datum","keys","aliases","parentLocales","reduce","all","k","__defaultLocale","polyfilled","currencySign","unitDisplay","toUpperCase","isNegative","roundingType","minimumSignificantDigits","maximumSignificantDigits","minimumFractionDigits","maximumFractionDigits","minimumIntegerDigits","result","integerDigitsCount","string","int","minInteger","forwardZeros","magnitude","computeExponentForMagnitude","newMagnitude","floor","thresholdMap","num","thresholds","other","percent","signDisplayPattern","signPattern","scientific","decimalNum","standard","zeroPattern","negativePattern","positivePattern","rules","select","val","toNumber","NaN","Number","Symbol","toStringTag","constructor"],"sourceRoot":"","sources":["../src/core.ts"],"sourcesContent":[null]}]}