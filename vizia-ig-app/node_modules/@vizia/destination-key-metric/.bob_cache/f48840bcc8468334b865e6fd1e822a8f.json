{"remainingRequest":"/Users/pantu/.npm/_npx/5593/lib/node_modules/@vizia/app-emulator/node_modules/babel-loader/lib/index.js??ref--4-1!/Users/pantu/work2/vizia/node_modules/@vizia/destination-key-metric/src/components/key-metric.js","dependencies":[{"path":"/Users/pantu/work2/vizia/node_modules/@vizia/destination-key-metric/src/components/key-metric.js","mtime":1664781785152},{"path":"/Users/pantu/.npm/_npx/5593/lib/node_modules/@vizia/app-emulator/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/pantu/.npm/_npx/5593/lib/node_modules/@vizia/app-emulator/node_modules/babel-loader/lib/index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:J3VzZSBzdHJpY3QnOwoKY29uc3Qgdml6aWFGb3JtYXQgPSByZXF1aXJlKCdAdml6aWEvZm9ybWF0Jyk7Cgpjb25zdCB7CiAgaWNvbnMKfSA9IHJlcXVpcmUoJ0BicmFuZHdhdGNoL2F4aW9tLW1hdGVyaWFscycpOwoKY29uc3QgZ2V0TW9kaWZpZXJzID0gcmVxdWlyZSgnLi4vbGliL2dldC1tb2RpZmllcnMnKTsKCmZ1bmN0aW9uIGdldFByb2dyZXNzVmFsdWUodmFsdWUsIGNvbXBhcmlzb25WYWx1ZSkgewogIHJldHVybiBNYXRoLmFicygodmFsdWUgLSBjb21wYXJpc29uVmFsdWUpIC8gY29tcGFyaXNvblZhbHVlKTsKfQoKZnVuY3Rpb24gZ2V0UHJvZ3Jlc3NTZW50aW1lbnRNb2RpZmllcih2YWx1ZSwgY29tcGFyaXNvblZhbHVlLCBpbnZlcnRTZW50aW1lbnQpIHsKICBjb25zdCBhID0gaW52ZXJ0U2VudGltZW50ID8gY29tcGFyaXNvblZhbHVlIDogdmFsdWU7CiAgY29uc3QgYiA9IGludmVydFNlbnRpbWVudCA/IHZhbHVlIDogY29tcGFyaXNvblZhbHVlOwoKICBpZiAoYSA8IGIpIHsKICAgIHJldHVybiAnbmVnYXRpdmUnOwogIH0gZWxzZSBpZiAoYSA+IGIpIHsKICAgIHJldHVybiAncG9zaXRpdmUnOwogIH0KCiAgcmV0dXJuICdlcXVhbCc7Cn0KCmZ1bmN0aW9uIGdldFByb2dyZXNzQ2hhbmdlSWNvbih2YWx1ZSwgY29tcGFyaXNvblZhbHVlKSB7CiAgY29uc3QgYSA9IHZhbHVlOwogIGNvbnN0IGIgPSBjb21wYXJpc29uVmFsdWU7CgogIGlmIChhIDwgYikgewogICAgcmV0dXJuIGljb25zWydhcnJvdy1kb3duLXJpZ2h0J107CiAgfSBlbHNlIGlmIChhID4gYikgewogICAgcmV0dXJuIGljb25zWydhcnJvdy11cC1yaWdodCddOwogIH0KCiAgcmV0dXJuIGljb25zWydjaGV2cm9uLXJpZ2h0J107Cn0KCmZ1bmN0aW9uIGljb25UZW1wbGF0ZShpY29uKSB7CiAgcmV0dXJuIGA8c3ZnIGNsYXNzPSJpY29uIiB2aWV3Qm94PSIke2ljb24udmlld0JveH0iPiR7aWNvbi5ib2R5fTwvc3ZnPmA7Cn0KCmZ1bmN0aW9uIGtleU1ldHJpY0xhYmVsVGVtcGxhdGUocHJvcHMpIHsKICBjb25zdCB7CiAgICBkYXRhCiAgfSA9IHByb3BzOwogIHJldHVybiBgPGRpdiBjbGFzcz0ia2V5LW1ldHJpY19fbGFiZWwiPiR7ZGF0YS5sYWJlbH08L2Rpdj5gOwp9CgpmdW5jdGlvbiBrZXlNZXRyaWNQcm9ncmVzc1RlbXBsYXRlKHByb3BzKSB7CiAgY29uc3QgewogICAgZGF0YSwKICAgIGNvbmZpZwogIH0gPSBwcm9wczsKICBjb25zdCB7CiAgICBsb2NhbGUKICB9ID0gY29uZmlnOwogIGNvbnN0IHByb2dyZXNzQ2hhbmdlSWNvbiA9IGdldFByb2dyZXNzQ2hhbmdlSWNvbihkYXRhLnZhbHVlLCBkYXRhLmNvbXBhcmlzb25WYWx1ZSk7CiAgY29uc3QgZm9ybWF0dGVkUHJvZ3Jlc3MgPSB2aXppYUZvcm1hdChnZXRQcm9ncmVzc1ZhbHVlKGRhdGEudmFsdWUsIGRhdGEuY29tcGFyaXNvblZhbHVlKSwgewogICAgZm9ybWF0OiAncGVyY2VudCcsCiAgICBtYW50aXNzYTogMCwKICAgIGxvY2FsZSwKICAgIG91dHB1dDogJ2h0bWwnCiAgfSk7CiAgY29uc3QgbW9kaWZpZXJzID0gW2dldFByb2dyZXNzU2VudGltZW50TW9kaWZpZXIoZGF0YS52YWx1ZSwgZGF0YS5jb21wYXJpc29uVmFsdWUsIGRhdGEuaW52ZXJ0U2VudGltZW50KV0uZmlsdGVyKG1vZGlmaWVyID0+IG1vZGlmaWVyKS5tYXAobW9kaWZpZXIgPT4gYHByb2dyZXNzLS0ke21vZGlmaWVyfWApLmpvaW4oJyAnKTsKICByZXR1cm4gYAogICAgICAgIDxkaXYgY2xhc3M9ImtleS1tZXRyaWNfX3Byb2dyZXNzIj4KICAgICAgICAgICAgPHNwYW4gY2xhc3M9InByb2dyZXNzICR7bW9kaWZpZXJzfSI+CiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0icHJvZ3Jlc3NfX2ljb24iPiR7aWNvblRlbXBsYXRlKHByb2dyZXNzQ2hhbmdlSWNvbil9PC9zcGFuPgogICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9InByb2dyZXNzX192YWx1ZSI+JHtmb3JtYXR0ZWRQcm9ncmVzc308L3NwYW4+CiAgICAgICAgICAgIDwvc3Bhbj4KICAgICAgICA8L2Rpdj4KICAgIGAudHJpbSgpOwp9CgpmdW5jdGlvbiBrZXlNZXRyaWNIZWFkZXJUZW1wbGF0ZShwcm9wcykgewogIGNvbnN0IHsKICAgIGRhdGEKICB9ID0gcHJvcHM7CgogIGlmICghZGF0YS5sYWJlbCAmJiBkYXRhLmNvbXBhcmlzb25WYWx1ZSA9PT0gdW5kZWZpbmVkKSB7CiAgICByZXR1cm4gJyc7CiAgfQoKICByZXR1cm4gYAogICAgICAgIDxkaXYgY2xhc3M9ImtleS1tZXRyaWNfX2hlYWRlciI+CiAgICAgICAgICAgICR7ZGF0YS5sYWJlbCA/IGtleU1ldHJpY0xhYmVsVGVtcGxhdGUocHJvcHMpIDogJyd9CiAgICAgICAgICAgICR7ZGF0YS5jb21wYXJpc29uVmFsdWUgIT09IHVuZGVmaW5lZCAmJiBwcm9wcy5mb3JtYXQgIT09ICd0ZXh0JyA/IGtleU1ldHJpY1Byb2dyZXNzVGVtcGxhdGUocHJvcHMpIDogJyd9CiAgICAgICAgPC9kaXY+CiAgICBgLnRyaW0oKTsKfQoKZnVuY3Rpb24ga2V5TWV0cmljVmFsdWVUZW1wbGF0ZShwcm9wcykgewogIGNvbnN0IHsKICAgIGRhdGEsCiAgICBjb25maWcKICB9ID0gcHJvcHM7CiAgY29uc3QgewogICAgbG9jYWxlCiAgfSA9IGNvbmZpZzsKICBjb25zdCBmb3JtYXR0ZWRWYWx1ZSA9IGRhdGEuZm9ybWF0ID09PSAndGV4dCcgPyBkYXRhLnZhbHVlIDogdml6aWFGb3JtYXQoZGF0YS52YWx1ZSwgewogICAgZm9ybWF0OiBkYXRhLmZvcm1hdCwKICAgIGN1cnJlbmN5OiBkYXRhLmN1cnJlbmN5LAogICAgY3VycmVuY3lTeW1ib2w6IGRhdGEuY3VycmVuY3lTeW1ib2wsCiAgICBsb2NhbGUsCiAgICBvdXRwdXQ6ICdodG1sJwogIH0pOwogIGNvbnN0IG1vZGlmaWVycyA9IGdldE1vZGlmaWVycygna2V5LW1ldHJpY19fdmFsdWUnLCB7CiAgICBsb25nOiBkYXRhLmZvcm1hdCA9PT0gJ3RleHQnIHx8IGAke2Zvcm1hdHRlZFZhbHVlfWAucmVwbGFjZSgvPFtePl0rPi9nLCAnJykubGVuZ3RoID49IDEwCiAgfSk7CiAgcmV0dXJuIGA8ZGl2IGNsYXNzPSJrZXktbWV0cmljX192YWx1ZSAke21vZGlmaWVyc30iPiR7Zm9ybWF0dGVkVmFsdWV9PC9kaXY+YDsKfQoKZnVuY3Rpb24gdGVtcGxhdGUocHJvcHMpIHsKICByZXR1cm4gYAogICAgICAgIDxkaXYgY2xhc3M9ImtleS1tZXRyaWMtY29udGFpbmVyIj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0ia2V5LW1ldHJpYyI+CiAgICAgICAgICAgICAgICAke2tleU1ldHJpY0hlYWRlclRlbXBsYXRlKHByb3BzKX0KICAgICAgICAgICAgICAgICR7a2V5TWV0cmljVmFsdWVUZW1wbGF0ZShwcm9wcyl9CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgogICAgYC50cmltKCk7Cn0KCm1vZHVsZS5leHBvcnRzID0gdGVtcGxhdGU7"},{"version":3,"names":["viziaFormat","require","icons","getModifiers","getProgressValue","value","comparisonValue","Math","abs","getProgressSentimentModifier","invertSentiment","a","b","getProgressChangeIcon","iconTemplate","icon","viewBox","body","keyMetricLabelTemplate","props","data","label","keyMetricProgressTemplate","config","locale","progressChangeIcon","formattedProgress","format","mantissa","output","modifiers","filter","modifier","map","join","trim","keyMetricHeaderTemplate","undefined","keyMetricValueTemplate","formattedValue","currency","currencySymbol","long","replace","length","template","module","exports"],"sources":["/Users/pantu/work2/vizia/node_modules/@vizia/destination-key-metric/src/components/key-metric.js"],"sourcesContent":["'use strict';\n\nconst viziaFormat = require('@vizia/format');\nconst {icons} = require('@brandwatch/axiom-materials');\n\nconst getModifiers = require('../lib/get-modifiers');\n\nfunction getProgressValue(value, comparisonValue) {\n    return Math.abs((value - comparisonValue) / comparisonValue);\n}\n\nfunction getProgressSentimentModifier(value, comparisonValue, invertSentiment) {\n    const a = invertSentiment ? comparisonValue : value;\n    const b = invertSentiment ? value : comparisonValue;\n\n    if (a < b) {\n        return 'negative';\n    } else if (a > b) {\n        return 'positive';\n    }\n    return 'equal';\n}\n\nfunction getProgressChangeIcon(value, comparisonValue) {\n    const a = value;\n    const b = comparisonValue;\n\n    if (a < b) {\n        return icons['arrow-down-right'];\n    } else if (a > b) {\n        return icons['arrow-up-right'];\n    }\n    return icons['chevron-right'];\n}\n\nfunction iconTemplate(icon) {\n    return `<svg class=\"icon\" viewBox=\"${icon.viewBox}\">${icon.body}</svg>`;\n}\n\nfunction keyMetricLabelTemplate(props) {\n    const {data} = props;\n\n    return `<div class=\"key-metric__label\">${data.label}</div>`;\n}\n\nfunction keyMetricProgressTemplate(props) {\n    const {data, config} = props;\n    const {locale} = config;\n    const progressChangeIcon = getProgressChangeIcon(data.value, data.comparisonValue);\n    const formattedProgress = viziaFormat(getProgressValue(data.value, data.comparisonValue), {\n        format: 'percent',\n        mantissa: 0,\n        locale,\n        output: 'html'\n    });\n    const modifiers = [\n        getProgressSentimentModifier(data.value, data.comparisonValue, data.invertSentiment)\n    ]\n        .filter((modifier) => modifier)\n        .map((modifier) => `progress--${modifier}`)\n        .join(' ');\n\n    return `\n        <div class=\"key-metric__progress\">\n            <span class=\"progress ${modifiers}\">\n                <span class=\"progress__icon\">${iconTemplate(progressChangeIcon)}</span>\n                <span class=\"progress__value\">${formattedProgress}</span>\n            </span>\n        </div>\n    `.trim();\n}\n\nfunction keyMetricHeaderTemplate(props) {\n    const {data} = props;\n\n    if (!data.label && data.comparisonValue === undefined) {\n        return '';\n    }\n\n    return `\n        <div class=\"key-metric__header\">\n            ${data.label ? keyMetricLabelTemplate(props) : ''}\n            ${data.comparisonValue !== undefined && props.format !== 'text' ? keyMetricProgressTemplate(props) : ''}\n        </div>\n    `.trim();\n}\n\nfunction keyMetricValueTemplate(props) {\n    const {data, config} = props;\n    const {locale} = config;\n    const formattedValue = data.format === 'text' ? data.value : viziaFormat(data.value, {\n        format: data.format,\n        currency: data.currency,\n        currencySymbol: data.currencySymbol,\n        locale,\n        output: 'html'\n    });\n    const modifiers = getModifiers('key-metric__value', {\n        long: data.format === 'text' || `${formattedValue}`.replace(/<[^>]+>/g, '').length >= 10\n    });\n\n    return `<div class=\"key-metric__value ${modifiers}\">${formattedValue}</div>`;\n}\n\nfunction template(props) {\n    return `\n        <div class=\"key-metric-container\">\n            <div class=\"key-metric\">\n                ${keyMetricHeaderTemplate(props)}\n                ${keyMetricValueTemplate(props)}\n            </div>\n        </div>\n    `.trim();\n}\n\nmodule.exports = template;\n"],"mappings":"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"}]}