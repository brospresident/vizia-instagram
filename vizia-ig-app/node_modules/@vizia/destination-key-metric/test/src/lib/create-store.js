'use strict';

const test = require('ava');
const SandboxedModule = require('sandboxed-module');

function requireCreateStore() {
    const mockReducer = (state) => state;

    return SandboxedModule.require('../../../src/lib/create-store', {
        requires: {
            './reducer': mockReducer
        }
    });
}

test('Initial state', (t) => {
    const createStore = requireCreateStore();
    const store = createStore();
    const storeState = store.getState();

    t.deepEqual(storeState, {
        data: null,
        config: {
            destTarget: null
        }
    }, 'creates a store with the correct initial state');
});
