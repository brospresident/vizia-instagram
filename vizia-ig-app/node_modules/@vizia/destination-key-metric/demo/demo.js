'use strict';

// Supplied by Vizia, but include them for demo purposes.
require('@vizia/vizia-css/build/vizia-style.min.css');

const createDestination = require('../src');

const destination = createDestination();

function getRandomValue(minValue, maxValue) {
    return Math.floor(Math.random() * (maxValue - minValue + 1) + minValue);
}

function createInputFixture() {
    return {
        label: 'Total Profit',
        value: getRandomValue(-15000, 15000),
        comparisonValue: getRandomValue(-15000, 15000),
        format: 'currency',
        currency: 'GBP'
    };
}

function start() {
    const inputFixture = createInputFixture();

    destination.destination(inputFixture, {
        config: {
            destTarget: '#bundle-container',
            locale: 'en'
        },
        done() {
            console.log('Pushed', inputFixture);
            setTimeout(start, 100000);
        },
        error: console.error
    });
}

start();
