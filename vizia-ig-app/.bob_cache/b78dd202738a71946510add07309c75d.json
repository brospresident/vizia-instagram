{"remainingRequest":"/Users/pantu/.npm/_npx/12238/lib/node_modules/@vizia/app-emulator/node_modules/babel-loader/lib/index.js??ref--4-1!/Users/pantu/work2/vizia-ig-app/src/lib/create-key-metric-transform.js","dependencies":[{"path":"/Users/pantu/work2/vizia-ig-app/src/lib/create-key-metric-transform.js","mtime":1664894890167},{"path":"/Users/pantu/.npm/_npx/12238/lib/node_modules/@vizia/app-emulator/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/pantu/.npm/_npx/12238/lib/node_modules/@vizia/app-emulator/node_modules/babel-loader/lib/index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:J3VzZSBzdHJpY3QnOyAvLyBsZXQgbGFiZWxzICA9IHsKLy8gICAgICAgICAibmFtZSI6ICJOYW1lIiwKLy8gICAgICAgICAiZm9sbG93ZXJzX3RvZGF5IjogIkZvbGxvd2VycyBUb2RheSIsCi8vICAgICAgICAgImZvbGxvd2VycyI6ICJGb2xsb3dlcnMiLAovLyAgICAgICAgICJmb2xsb3dlcnNfZ3Jvd3RoIjogIkZvbGxvd2VycyBHcm93dGgiLAovLyAgICAgICAgICJmb2xsb3dlcnNfZ3Jvd3RoX3BlcmNlbnQiOiAiRm9sbG93ZXJzIEdyb3d0aCBQZXJjZW50IiwKLy8gICAgICAgICAiZW5nYWdlbWVudF9yYXRlX3Blcl9wb3N0IjogIkVuZ2FnZW1lbnQgUmF0ZSBQZXIgUG9zdCIsCi8vICAgICAgICAgImVuZ2FnZW1lbnRfcmF0ZV9wZXJfcHJvZmlsZSI6ICJFbmdhZ2VtZW50IFJhdGUgUGVyIFByb2ZpbGUiLAovLyAgICAgICAgICJlbmdhZ2VtZW50IjogIkVuZ2FnZW1lbnQiLAovLyAgICAgICAgICJsaWtlcyI6ICJMaWtlcyIsCi8vICAgICAgICAgImNvbW1lbnRzIiwKLy8gICAgICAgICAicG9zdHMiLAovLyAgICAgICAgICJhdmVyYWdlX2VuZ2FnZW1lbnRfcGVyX2RheSIsCi8vICAgICAgICAgImF2ZXJhZ2VfZW5nYWdlbWVudF9wZXJfcG9zdCIsCi8vICAgICAgICAgImF2ZXJhZ2VfbGlrZXNfcGVyX3Bvc3QiLAovLyAgICAgICAgICJhdmVyYWdlX2NvbW1lbnRzX3Blcl9wb3N0IiwKLy8gICAgICAgICAiYXZlcmFnZV9wb3N0c19wZXJfZGF5IiwKLy8gICAgICAgICAiYXZlcmFnZV9oYXNodGFnc19wZXJfcG9zdCIsCi8vICAgICAgICAgInRvdGFsX3JlYWNoIiwKLy8gICAgICAgICAicG9zdHNfcmVhY2hfcGVuZXRyYXRpb24iLAovLyAgICAgICAgICJ0b3RhbF9pbXByZXNzaW9ucyIsCi8vICAgICAgICAgImF2ZXJhZ2VfcmVhY2hfcGVyX3Bvc3QiLAovLyAgICAgICAgICJhdmVyYWdlX2ltcHJlc3Npb25zX3Blcl9wb3N0IiwKLy8gICAgICAgICAidmlkZW9fdmlld3MiLAovLyAgICAgICAgICJzdG9yaWVzIiwKLy8gICAgICAgICAic3Rvcmllc19kYXlzX3dpdGhfc3RvcmllcyIsCi8vICAgICAgICAgInN0b3JpZXNfcGVyX2RheSIsCi8vICAgICAgICAgInN0b3JpZXNfYXZnX3BlYWtfcmVhY2giLAovLyAgICAgICAgICJzdG9yaWVzX21heF9wZWFrX3JlYWNoIiwKLy8gICAgICAgICAic3Rvcmllc19wZWFrX3JlYWNoX3JhdGUiLAovLyAgICAgICAgICJzdG9yaWVzX2F2Z19yZXRlbnRpb25fcmF0ZSIsCi8vICAgICAgICAgInN0b3JpZXNfaW1wcmVzc2lvbnMiLAovLyAgICAgICAgICJzdG9yaWVzX3JlcGxpZXMiLAovLyAgICAgICAgICJzdG9yaWVzX3JlYWNoIiwKLy8gICAgICAgICAic3Rvcmllc19yZWFjaF9wZW5ldHJhdGlvbiIsCi8vICAgICAgICAgImF2ZXJhZ2VfaGFzaHRhZ3NfcGVyX3N0b3J5IiwKLy8gICAgICAgICAicHJvZmlsZV9yZWFjaCIsCi8vICAgICAgICAgInByb2ZpbGVfcmVhY2hfcGVuZXRyYXRpb24iLAovLyAgICAgICAgICJwcm9maWxlX2ltcHJlc3Npb25zIiwKLy8gICAgICAgICAicHJvZmlsZV92aWV3cyIsCi8vICAgICAgICAgInByb2ZpbGVfZW1haWxfY29udGFjdHMiLAovLyAgICAgICAgICJwcm9maWxlX3RleHRfbWVzc2FnZV9jbGlja3MiLAovLyAgICAgICAgICJwcm9maWxlX2dldF9kaXJlY3Rpb25zX2NsaWNrcyIsCi8vICAgICAgICAgInByb2ZpbGVfcGhvbmVfY2FsbF9jbGlja3MiLAovLyAgICAgICAgICJwcm9maWxlX3dlYnNpdGVfY2xpY2tzIgovLyB9CgovKioKICogQnJvc2lkZW46CiAqIHlvdSBjYW4gcGFzcyBhbiBvcHRpb25zIG9iamVjdCBpbnRvIHlvdXIgdHJhbnNmb3JtIHdoZW4gaW5zdGFudGlhdGluZyB0aGUgZmFjdG9yeQogKiB0aGVzZSBjYW4gdGhlbiBiZSB1c2VkIGluIHlvdXIgY29kZSBieSBhY2Nlc3MgYG9wdGlvbnMucHJvcE5hbWVgCiAqLwoKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoKSB7CiAgbGV0IG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9OwogIHJldHVybiB7CiAgICB0cmFuc2Zvcm06IChkYXRhLCBwaXBlbGluZSkgPT4gewogICAgICBjb25zdCBwcm9wcyA9IHBpcGVsaW5lLmNvbmZpZy5zY2VuZS5vcHRpb25zOyAvL2dldCBjb250cm9sIHByb3BlcnRpZXMKCiAgICAgIGNvbnN0IHsKICAgICAgICB5VmFsdWUsCiAgICAgICAgZm9ybWF0LAogICAgICAgIHByb2ZpbGUKICAgICAgfSA9IHByb3BzOyAvLyBnZXQgdGhlIHZhbHVlcyB5b3UgbmVlZCBmcm9tIGNvbnRyb2wgcHJvcHMKCiAgICAgIGNvbnNvbGUubG9nKHsKICAgICAgICBkYXRhLAogICAgICAgIHBpcGVsaW5lCiAgICAgIH0pOwogICAgICBsZXQga2V5TWV0cmljID0ge307CgogICAgICBpZiAoIWRhdGEpIHsKICAgICAgICBrZXlNZXRyaWMgPSB7CiAgICAgICAgICBsYWJlbDogeVZhbHVlLAogICAgICAgICAgdmFsdWU6IDAsCiAgICAgICAgICBmb3JtYXQKICAgICAgICB9OwogICAgICB9IGVsc2UgewogICAgICAgIGNvbnNvbGUubG9nKHlWYWx1ZSk7CgogICAgICAgIGlmICh5VmFsdWUgPT09IHVuZGVmaW5lZCkgewogICAgICAgICAgcGlwZWxpbmUuZG9uZSgpOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAga2V5TWV0cmljID0gewogICAgICAgICAgbGFiZWw6IHlWYWx1ZS5zcGxpdCgnXycpLm1hcCh3b3JkID0+IHdvcmQuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyB3b3JkLnNsaWNlKDEpKS5qb2luKCcgJyksCiAgICAgICAgICB2YWx1ZTogZGF0YVt5VmFsdWVdLAogICAgICAgICAgY29tcGFyaXNvblZhbHVlOiBkYXRhW2Ake3lWYWx1ZX1faGlzdG9yeWBdLAogICAgICAgICAgLy9wcmV2aW91cyBkYXRhIGZvciB0aGUgY29tcGFyaXNvbgogICAgICAgICAgZm9ybWF0OiB5VmFsdWUuaW5jbHVkZXMoJ3BlcmNlbnQnKSA/ICdwZXJjZW50JyA6ICdudW1iZXInCiAgICAgICAgfTsKICAgICAgICBjb25zb2xlLmxvZyhrZXlNZXRyaWMpOwogICAgICB9CgogICAgICBwaXBlbGluZS5wdXNoKGtleU1ldHJpYyk7IC8vcHVzaCB0aGUgZGF0YSBkb3duIHRoZSBwaXBlbGluZQoKICAgICAgcGlwZWxpbmUuZG9uZSgpOyAvL2xldCB0aGUgcGlwZWxpbmUga25vdyB0aGF0IHlvdSBoYXZlIGZpbmlzaGVkIHRyYW5zZm9ybWluZyB0aGUgZGF0YQogICAgfQogIH07Cn07"},{"version":3,"names":["module","exports","options","transform","data","pipeline","props","config","scene","yValue","format","profile","console","log","keyMetric","label","value","undefined","done","split","map","word","charAt","toUpperCase","slice","join","comparisonValue","includes","push"],"sources":["/Users/pantu/work2/vizia-ig-app/src/lib/create-key-metric-transform.js"],"sourcesContent":["'use strict';\n\n// let labels  = {\n//         \"name\": \"Name\",\n//         \"followers_today\": \"Followers Today\",\n//         \"followers\": \"Followers\",\n//         \"followers_growth\": \"Followers Growth\",\n//         \"followers_growth_percent\": \"Followers Growth Percent\",\n//         \"engagement_rate_per_post\": \"Engagement Rate Per Post\",\n//         \"engagement_rate_per_profile\": \"Engagement Rate Per Profile\",\n//         \"engagement\": \"Engagement\",\n//         \"likes\": \"Likes\",\n//         \"comments\",\n//         \"posts\",\n//         \"average_engagement_per_day\",\n//         \"average_engagement_per_post\",\n//         \"average_likes_per_post\",\n//         \"average_comments_per_post\",\n//         \"average_posts_per_day\",\n//         \"average_hashtags_per_post\",\n//         \"total_reach\",\n//         \"posts_reach_penetration\",\n//         \"total_impressions\",\n//         \"average_reach_per_post\",\n//         \"average_impressions_per_post\",\n//         \"video_views\",\n//         \"stories\",\n//         \"stories_days_with_stories\",\n//         \"stories_per_day\",\n//         \"stories_avg_peak_reach\",\n//         \"stories_max_peak_reach\",\n//         \"stories_peak_reach_rate\",\n//         \"stories_avg_retention_rate\",\n//         \"stories_impressions\",\n//         \"stories_replies\",\n//         \"stories_reach\",\n//         \"stories_reach_penetration\",\n//         \"average_hashtags_per_story\",\n//         \"profile_reach\",\n//         \"profile_reach_penetration\",\n//         \"profile_impressions\",\n//         \"profile_views\",\n//         \"profile_email_contacts\",\n//         \"profile_text_message_clicks\",\n//         \"profile_get_directions_clicks\",\n//         \"profile_phone_call_clicks\",\n//         \"profile_website_clicks\"\n// }\n\n/**\n * Brosiden:\n * you can pass an options object into your transform when instantiating the factory\n * these can then be used in your code by access `options.propName`\n */\nmodule.exports = (options = {}) => {\n    return {\n        transform: (data, pipeline) => {\n            const props = pipeline.config.scene.options; //get control properties\n            const {yValue, format, profile} = props; // get the values you need from control props\n            console.log({data, pipeline});\n            let keyMetric = {};\n            if (!data) {\n                keyMetric = {\n                    label: yValue,\n                    value: 0,\n                    format\n                }\n            }\n            else {\n                console.log(yValue);\n                if (yValue === undefined) {\n                    pipeline.done();\n                    return;\n                }\n                keyMetric = {\n                    label: yValue.split('_').map(word => word.charAt(0).toUpperCase() + word.slice(1)).join(' '), \n                    value: data[yValue], \n                    comparisonValue: data[`${yValue}_history`], //previous data for the comparison\n                    format: yValue.includes('percent') ? 'percent' : 'number'\n                };\n                console.log(keyMetric);\n            }\n            pipeline.push(keyMetric); //push the data down the pipeline\n            pipeline.done(); //let the pipeline know that you have finished transforming the data\n        }\n    };\n};\n"],"mappings":"AAAA,a,CAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AACAA,MAAM,CAACC,OAAP,GAAiB,YAAkB;EAAA,IAAjBC,OAAiB,uEAAP,EAAO;EAC/B,OAAO;IACHC,SAAS,EAAE,CAACC,IAAD,EAAOC,QAAP,KAAoB;MAC3B,MAAMC,KAAK,GAAGD,QAAQ,CAACE,MAAT,CAAgBC,KAAhB,CAAsBN,OAApC,CAD2B,CACkB;;MAC7C,MAAM;QAACO,MAAD;QAASC,MAAT;QAAiBC;MAAjB,IAA4BL,KAAlC,CAF2B,CAEc;;MACzCM,OAAO,CAACC,GAAR,CAAY;QAACT,IAAD;QAAOC;MAAP,CAAZ;MACA,IAAIS,SAAS,GAAG,EAAhB;;MACA,IAAI,CAACV,IAAL,EAAW;QACPU,SAAS,GAAG;UACRC,KAAK,EAAEN,MADC;UAERO,KAAK,EAAE,CAFC;UAGRN;QAHQ,CAAZ;MAKH,CAND,MAOK;QACDE,OAAO,CAACC,GAAR,CAAYJ,MAAZ;;QACA,IAAIA,MAAM,KAAKQ,SAAf,EAA0B;UACtBZ,QAAQ,CAACa,IAAT;UACA;QACH;;QACDJ,SAAS,GAAG;UACRC,KAAK,EAAEN,MAAM,CAACU,KAAP,CAAa,GAAb,EAAkBC,GAAlB,CAAsBC,IAAI,IAAIA,IAAI,CAACC,MAAL,CAAY,CAAZ,EAAeC,WAAf,KAA+BF,IAAI,CAACG,KAAL,CAAW,CAAX,CAA7D,EAA4EC,IAA5E,CAAiF,GAAjF,CADC;UAERT,KAAK,EAAEZ,IAAI,CAACK,MAAD,CAFH;UAGRiB,eAAe,EAAEtB,IAAI,CAAE,GAAEK,MAAO,UAAX,CAHb;UAGoC;UAC5CC,MAAM,EAAED,MAAM,CAACkB,QAAP,CAAgB,SAAhB,IAA6B,SAA7B,GAAyC;QAJzC,CAAZ;QAMAf,OAAO,CAACC,GAAR,CAAYC,SAAZ;MACH;;MACDT,QAAQ,CAACuB,IAAT,CAAcd,SAAd,EA1B2B,CA0BD;;MAC1BT,QAAQ,CAACa,IAAT,GA3B2B,CA2BV;IACpB;EA7BE,CAAP;AA+BH,CAhCD"}]}