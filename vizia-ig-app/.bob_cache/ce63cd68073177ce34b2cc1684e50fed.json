{"remainingRequest":"/Users/pantu/.npm/_npx/56985/lib/node_modules/@vizia/app-emulator/node_modules/babel-loader/lib/index.js??ref--4-1!/Users/pantu/Desktop/vizia/src/lib/create-source.js","dependencies":[{"path":"/Users/pantu/Desktop/vizia/src/lib/create-source.js","mtime":1664548297723},{"path":"/Users/pantu/.npm/_npx/56985/lib/node_modules/@vizia/app-emulator/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/pantu/.npm/_npx/56985/lib/node_modules/@vizia/app-emulator/node_modules/babel-loader/lib/index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:J3VzZSBzdHJpY3QnOwoKY29uc3QgYXhpb3MgPSByZXF1aXJlKCdheGlvcycpOwovKioKICogeW91IGNhbiBwYXNzIGFuIG9wdGlvbnMgb2JqZWN0IGludG8geW91ciBzb3VyY2Ugd2hlbiBpbnN0YW50aWF0aW5nIHRoZSBmYWN0b3J5CiAqIHRoZXNlIGNhbiB0aGVuIGJlIHVzZWQgaW4geW91ciBjb2RlIGJ5IGFjY2VzcyBgb3B0aW9ucy5wcm9wTmFtZWAKICovCgoKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoKSB7CiAgbGV0IG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9OwogIHJldHVybiB7CiAgICBzb3VyY2UocGlwZWxpbmUpIHsKICAgICAgLy9zb3VyY2UgZmFjdG9yaWVzIG11c3QgcmV0dXJuIGFuIG9iamVjdCB3aXRoIGEgZnVuY3Rpb24gY2FsbGVkICdzb3VyY2UnCiAgICAgIGNvbnN0IHByb3BzID0gcGlwZWxpbmUuY29uZmlnLnNjZW5lLm9wdGlvbnM7IC8vZ2V0IGNvbnRyb2wgcHJvcGVydGllcwoKICAgICAgY29uc3QgewogICAgICAgIHlWYWx1ZSwKICAgICAgICBzdG9jaywKICAgICAgICBhcGlrZXkKICAgICAgfSA9IHByb3BzOyAvLyBnZXQgdGhlIHZhbHVlcyB5b3UgbmVlZCBmcm9tIGNvbnRyb2wgcHJvcHMKICAgICAgLy9wdWxsIHlvdXIgc291cmNlIGRhdGEgZnJvbSBhIFVSTAoKICAgICAgYXhpb3MoYGh0dHBzOi8vd3d3LmFscGhhdmFudGFnZS5jby9xdWVyeT9mdW5jdGlvbj1USU1FX1NFUklFU19JTlRSQURBWSZzeW1ib2w9JHtzdG9ja30maW50ZXJ2YWw9NW1pbiZhcGlrZXk9JHthcGlrZXl9YCkudGhlbihyZXNwb25zZSA9PiByZXNwb25zZS5kYXRhKSAvL2dldCB0aGUganNvbiBkYXRhIGZyb20gdGhlIGFwaSBlbmRwb2ludAogICAgICAudGhlbihqc29uRGF0YSA9PiB7CiAgICAgICAgaWYgKGpzb25EYXRhLkluZm9ybWF0aW9uKSB7CiAgICAgICAgICByZXR1cm4gcGlwZWxpbmUuZXJyb3IoanNvbkRhdGEuSW5mb3JtYXRpb24pOwogICAgICAgIH0KCiAgICAgICAgY29uc3QgdGFidWxhciA9IE9iamVjdC5lbnRyaWVzKGpzb25EYXRhWydUaW1lIFNlcmllcyAoNW1pbiknXSkucmVkdWNlKChhY2MsIF9yZWYpID0+IHsKICAgICAgICAgIGxldCBbZGF0ZSwgaXRlbV0gPSBfcmVmOwogICAgICAgICAgY29uc3Qga2V5ID0gT2JqZWN0LmtleXMoaXRlbSkuZmluZChrZXkgPT4ga2V5LmluY2x1ZGVzKHlWYWx1ZSkpOyAvL2ZvciB0aW1lIGRhdGEgdGhlIGtleSBzaG91bGQgYmUgYW4gSVNPIDg2MDEgU3RyaW5nCgogICAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oYWNjLCB7CiAgICAgICAgICAgIFtuZXcgRGF0ZShkYXRlKS50b0lTT1N0cmluZygpXTogcGFyc2VGbG9hdChpdGVtW2tleV0pCiAgICAgICAgICB9KTsKICAgICAgICB9LCB7fSk7IC8vc2ltcGxpZnkgdGhlIGRhdGEgc28gdGhhdCBpdHMgZWFzaWVyIHRvIGhhbmRsZQoKICAgICAgICBwaXBlbGluZS5wdXNoKHRhYnVsYXIpOyAvL3NlbmQgdGhlIGRhdGEgZG93biB0aGUgcGlwZWxpbmUKCiAgICAgICAgcGlwZWxpbmUuZG9uZSgpOyAvL3RlbGwgdGhlIHBpcGVsaW5lIHRoYXQgeW91IGhhdmUgbm8gZnVydGhlciBkYXRhIHRvIHNlbmQKICAgICAgfSk7CiAgICB9CgogIH07Cn07"},{"version":3,"names":["axios","require","module","exports","options","source","pipeline","props","config","scene","yValue","stock","apikey","then","response","data","jsonData","Information","error","tabular","Object","entries","reduce","acc","date","item","key","keys","find","includes","assign","Date","toISOString","parseFloat","push","done"],"sources":["/Users/pantu/Desktop/vizia/src/lib/create-source.js"],"sourcesContent":["'use strict';\nconst axios = require('axios');\n/**\n * you can pass an options object into your source when instantiating the factory\n * these can then be used in your code by access `options.propName`\n */\nmodule.exports = (options = {}) => {\n    return {\n        source(pipeline) { //source factories must return an object with a function called 'source'\n            const props = pipeline.config.scene.options; //get control properties\n            const {yValue, stock, apikey} = props; // get the values you need from control props\n            //pull your source data from a URL\n            axios(`https://www.alphavantage.co/query?function=TIME_SERIES_INTRADAY&symbol=${stock}&interval=5min&apikey=${apikey}`)\n                .then(response => response.data) //get the json data from the api endpoint\n                .then(jsonData => {\n                    if (jsonData.Information) {\n                        return pipeline.error(jsonData.Information);\n                    }\n\n                    const tabular = Object.entries(jsonData['Time Series (5min)']).reduce((acc, [date, item]) => {\n                        const key = Object.keys(item).find(key => key.includes(yValue));\n\n                        //for time data the key should be an ISO 8601 String\n                        return Object.assign(acc, {[new Date(date).toISOString()]: parseFloat(item[key])});\n                    }, {}); //simplify the data so that its easier to handle\n\n                    pipeline.push(tabular); //send the data down the pipeline\n                    pipeline.done(); //tell the pipeline that you have no further data to send\n                });\n        }\n    };\n};\n"],"mappings":"AAAA;;AACA,MAAMA,KAAK,GAAGC,OAAO,CAAC,OAAD,CAArB;AACA;AACA;AACA;AACA;;;AACAC,MAAM,CAACC,OAAP,GAAiB,YAAkB;EAAA,IAAjBC,OAAiB,uEAAP,EAAO;EAC/B,OAAO;IACHC,MAAM,CAACC,QAAD,EAAW;MAAE;MACf,MAAMC,KAAK,GAAGD,QAAQ,CAACE,MAAT,CAAgBC,KAAhB,CAAsBL,OAApC,CADa,CACgC;;MAC7C,MAAM;QAACM,MAAD;QAASC,KAAT;QAAgBC;MAAhB,IAA0BL,KAAhC,CAFa,CAE0B;MACvC;;MACAP,KAAK,CAAE,0EAAyEW,KAAM,yBAAwBC,MAAO,EAAhH,CAAL,CACKC,IADL,CACUC,QAAQ,IAAIA,QAAQ,CAACC,IAD/B,EACqC;MADrC,CAEKF,IAFL,CAEUG,QAAQ,IAAI;QACd,IAAIA,QAAQ,CAACC,WAAb,EAA0B;UACtB,OAAOX,QAAQ,CAACY,KAAT,CAAeF,QAAQ,CAACC,WAAxB,CAAP;QACH;;QAED,MAAME,OAAO,GAAGC,MAAM,CAACC,OAAP,CAAeL,QAAQ,CAAC,oBAAD,CAAvB,EAA+CM,MAA/C,CAAsD,CAACC,GAAD,WAAuB;UAAA,IAAjB,CAACC,IAAD,EAAOC,IAAP,CAAiB;UACzF,MAAMC,GAAG,GAAGN,MAAM,CAACO,IAAP,CAAYF,IAAZ,EAAkBG,IAAlB,CAAuBF,GAAG,IAAIA,GAAG,CAACG,QAAJ,CAAanB,MAAb,CAA9B,CAAZ,CADyF,CAGzF;;UACA,OAAOU,MAAM,CAACU,MAAP,CAAcP,GAAd,EAAmB;YAAC,CAAC,IAAIQ,IAAJ,CAASP,IAAT,EAAeQ,WAAf,EAAD,GAAgCC,UAAU,CAACR,IAAI,CAACC,GAAD,CAAL;UAA3C,CAAnB,CAAP;QACH,CALe,EAKb,EALa,CAAhB,CALc,CAUN;;QAERpB,QAAQ,CAAC4B,IAAT,CAAcf,OAAd,EAZc,CAYU;;QACxBb,QAAQ,CAAC6B,IAAT,GAbc,CAaG;MACpB,CAhBL;IAiBH;;EAtBE,CAAP;AAwBH,CAzBD"}]}