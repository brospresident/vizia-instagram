{"remainingRequest":"/Users/pantu/.npm/_npx/64608/lib/node_modules/@vizia/app-emulator/node_modules/babel-loader/lib/index.js??ref--4-1!/Users/pantu/work2/vizia-ig-app/node_modules/duplexify/index.js","dependencies":[{"path":"/Users/pantu/work2/vizia-ig-app/node_modules/duplexify/index.js","mtime":1664781785225},{"path":"/Users/pantu/.npm/_npx/64608/lib/node_modules/@vizia/app-emulator/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/pantu/.npm/_npx/64608/lib/node_modules/@vizia/app-emulator/node_modules/babel-loader/lib/index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:dmFyIHN0cmVhbSA9IHJlcXVpcmUoJ3JlYWRhYmxlLXN0cmVhbScpOwp2YXIgZW9zID0gcmVxdWlyZSgnZW5kLW9mLXN0cmVhbScpOwp2YXIgaW5oZXJpdHMgPSByZXF1aXJlKCdpbmhlcml0cycpOwp2YXIgc2hpZnQgPSByZXF1aXJlKCdzdHJlYW0tc2hpZnQnKTsKdmFyIFNJR05BTF9GTFVTSCA9IEJ1ZmZlci5mcm9tICYmIEJ1ZmZlci5mcm9tICE9PSBVaW50OEFycmF5LmZyb20gPyBCdWZmZXIuZnJvbShbMF0pIDogbmV3IEJ1ZmZlcihbMF0pOwp2YXIgb251bmNvcmsgPSBmdW5jdGlvbiAoc2VsZiwgZm4pIHsKICBpZiAoc2VsZi5fY29ya2VkKSBzZWxmLm9uY2UoJ3VuY29yaycsIGZuKTtlbHNlIGZuKCk7Cn07CnZhciBhdXRvRGVzdHJveSA9IGZ1bmN0aW9uIChzZWxmLCBlcnIpIHsKICBpZiAoc2VsZi5fYXV0b0Rlc3Ryb3kpIHNlbGYuZGVzdHJveShlcnIpOwp9Owp2YXIgZGVzdHJveWVyID0gZnVuY3Rpb24gKHNlbGYsIGVuZCkgewogIHJldHVybiBmdW5jdGlvbiAoZXJyKSB7CiAgICBpZiAoZXJyKSBhdXRvRGVzdHJveShzZWxmLCBlcnIubWVzc2FnZSA9PT0gJ3ByZW1hdHVyZSBjbG9zZScgPyBudWxsIDogZXJyKTtlbHNlIGlmIChlbmQgJiYgIXNlbGYuX2VuZGVkKSBzZWxmLmVuZCgpOwogIH07Cn07CnZhciBlbmQgPSBmdW5jdGlvbiAod3MsIGZuKSB7CiAgaWYgKCF3cykgcmV0dXJuIGZuKCk7CiAgaWYgKHdzLl93cml0YWJsZVN0YXRlICYmIHdzLl93cml0YWJsZVN0YXRlLmZpbmlzaGVkKSByZXR1cm4gZm4oKTsKICBpZiAod3MuX3dyaXRhYmxlU3RhdGUpIHJldHVybiB3cy5lbmQoZm4pOwogIHdzLmVuZCgpOwogIGZuKCk7Cn07CnZhciB0b1N0cmVhbXMyID0gZnVuY3Rpb24gKHJzKSB7CiAgcmV0dXJuIG5ldyBzdHJlYW0uUmVhZGFibGUoewogICAgb2JqZWN0TW9kZTogdHJ1ZSwKICAgIGhpZ2hXYXRlck1hcms6IDE2CiAgfSkud3JhcChycyk7Cn07CnZhciBEdXBsZXhpZnkgPSBmdW5jdGlvbiAod3JpdGFibGUsIHJlYWRhYmxlLCBvcHRzKSB7CiAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIER1cGxleGlmeSkpIHJldHVybiBuZXcgRHVwbGV4aWZ5KHdyaXRhYmxlLCByZWFkYWJsZSwgb3B0cyk7CiAgc3RyZWFtLkR1cGxleC5jYWxsKHRoaXMsIG9wdHMpOwogIHRoaXMuX3dyaXRhYmxlID0gbnVsbDsKICB0aGlzLl9yZWFkYWJsZSA9IG51bGw7CiAgdGhpcy5fcmVhZGFibGUyID0gbnVsbDsKICB0aGlzLl9hdXRvRGVzdHJveSA9ICFvcHRzIHx8IG9wdHMuYXV0b0Rlc3Ryb3kgIT09IGZhbHNlOwogIHRoaXMuX2ZvcndhcmREZXN0cm95ID0gIW9wdHMgfHwgb3B0cy5kZXN0cm95ICE9PSBmYWxzZTsKICB0aGlzLl9mb3J3YXJkRW5kID0gIW9wdHMgfHwgb3B0cy5lbmQgIT09IGZhbHNlOwogIHRoaXMuX2NvcmtlZCA9IDE7IC8vIHN0YXJ0IGNvcmtlZAogIHRoaXMuX29uZHJhaW4gPSBudWxsOwogIHRoaXMuX2RyYWluZWQgPSBmYWxzZTsKICB0aGlzLl9mb3J3YXJkaW5nID0gZmFsc2U7CiAgdGhpcy5fdW53cml0ZSA9IG51bGw7CiAgdGhpcy5fdW5yZWFkID0gbnVsbDsKICB0aGlzLl9lbmRlZCA9IGZhbHNlOwogIHRoaXMuZGVzdHJveWVkID0gZmFsc2U7CiAgaWYgKHdyaXRhYmxlKSB0aGlzLnNldFdyaXRhYmxlKHdyaXRhYmxlKTsKICBpZiAocmVhZGFibGUpIHRoaXMuc2V0UmVhZGFibGUocmVhZGFibGUpOwp9Owppbmhlcml0cyhEdXBsZXhpZnksIHN0cmVhbS5EdXBsZXgpOwpEdXBsZXhpZnkub2JqID0gZnVuY3Rpb24gKHdyaXRhYmxlLCByZWFkYWJsZSwgb3B0cykgewogIGlmICghb3B0cykgb3B0cyA9IHt9OwogIG9wdHMub2JqZWN0TW9kZSA9IHRydWU7CiAgb3B0cy5oaWdoV2F0ZXJNYXJrID0gMTY7CiAgcmV0dXJuIG5ldyBEdXBsZXhpZnkod3JpdGFibGUsIHJlYWRhYmxlLCBvcHRzKTsKfTsKRHVwbGV4aWZ5LnByb3RvdHlwZS5jb3JrID0gZnVuY3Rpb24gKCkgewogIGlmICgrK3RoaXMuX2NvcmtlZCA9PT0gMSkgdGhpcy5lbWl0KCdjb3JrJyk7Cn07CkR1cGxleGlmeS5wcm90b3R5cGUudW5jb3JrID0gZnVuY3Rpb24gKCkgewogIGlmICh0aGlzLl9jb3JrZWQgJiYgLS10aGlzLl9jb3JrZWQgPT09IDApIHRoaXMuZW1pdCgndW5jb3JrJyk7Cn07CkR1cGxleGlmeS5wcm90b3R5cGUuc2V0V3JpdGFibGUgPSBmdW5jdGlvbiAod3JpdGFibGUpIHsKICBpZiAodGhpcy5fdW53cml0ZSkgdGhpcy5fdW53cml0ZSgpOwogIGlmICh0aGlzLmRlc3Ryb3llZCkgewogICAgaWYgKHdyaXRhYmxlICYmIHdyaXRhYmxlLmRlc3Ryb3kpIHdyaXRhYmxlLmRlc3Ryb3koKTsKICAgIHJldHVybjsKICB9CiAgaWYgKHdyaXRhYmxlID09PSBudWxsIHx8IHdyaXRhYmxlID09PSBmYWxzZSkgewogICAgdGhpcy5lbmQoKTsKICAgIHJldHVybjsKICB9CiAgdmFyIHNlbGYgPSB0aGlzOwogIHZhciB1bmVuZCA9IGVvcyh3cml0YWJsZSwgewogICAgd3JpdGFibGU6IHRydWUsCiAgICByZWFkYWJsZTogZmFsc2UKICB9LCBkZXN0cm95ZXIodGhpcywgdGhpcy5fZm9yd2FyZEVuZCkpOwogIHZhciBvbmRyYWluID0gZnVuY3Rpb24gKCkgewogICAgdmFyIG9uZHJhaW4gPSBzZWxmLl9vbmRyYWluOwogICAgc2VsZi5fb25kcmFpbiA9IG51bGw7CiAgICBpZiAob25kcmFpbikgb25kcmFpbigpOwogIH07CiAgdmFyIGNsZWFyID0gZnVuY3Rpb24gKCkgewogICAgc2VsZi5fd3JpdGFibGUucmVtb3ZlTGlzdGVuZXIoJ2RyYWluJywgb25kcmFpbik7CiAgICB1bmVuZCgpOwogIH07CiAgaWYgKHRoaXMuX3Vud3JpdGUpIHByb2Nlc3MubmV4dFRpY2sob25kcmFpbik7IC8vIGZvcmNlIGEgZHJhaW4gb24gc3RyZWFtIHJlc2V0IHRvIGF2b2lkIGxpdmVsb2NrcwoKICB0aGlzLl93cml0YWJsZSA9IHdyaXRhYmxlOwogIHRoaXMuX3dyaXRhYmxlLm9uKCdkcmFpbicsIG9uZHJhaW4pOwogIHRoaXMuX3Vud3JpdGUgPSBjbGVhcjsKICB0aGlzLnVuY29yaygpOyAvLyBhbHdheXMgdW5jb3JrIHNldFdyaXRhYmxlCn07CgpEdXBsZXhpZnkucHJvdG90eXBlLnNldFJlYWRhYmxlID0gZnVuY3Rpb24gKHJlYWRhYmxlKSB7CiAgaWYgKHRoaXMuX3VucmVhZCkgdGhpcy5fdW5yZWFkKCk7CiAgaWYgKHRoaXMuZGVzdHJveWVkKSB7CiAgICBpZiAocmVhZGFibGUgJiYgcmVhZGFibGUuZGVzdHJveSkgcmVhZGFibGUuZGVzdHJveSgpOwogICAgcmV0dXJuOwogIH0KICBpZiAocmVhZGFibGUgPT09IG51bGwgfHwgcmVhZGFibGUgPT09IGZhbHNlKSB7CiAgICB0aGlzLnB1c2gobnVsbCk7CiAgICB0aGlzLnJlc3VtZSgpOwogICAgcmV0dXJuOwogIH0KICB2YXIgc2VsZiA9IHRoaXM7CiAgdmFyIHVuZW5kID0gZW9zKHJlYWRhYmxlLCB7CiAgICB3cml0YWJsZTogZmFsc2UsCiAgICByZWFkYWJsZTogdHJ1ZQogIH0sIGRlc3Ryb3llcih0aGlzKSk7CiAgdmFyIG9ucmVhZGFibGUgPSBmdW5jdGlvbiAoKSB7CiAgICBzZWxmLl9mb3J3YXJkKCk7CiAgfTsKICB2YXIgb25lbmQgPSBmdW5jdGlvbiAoKSB7CiAgICBzZWxmLnB1c2gobnVsbCk7CiAgfTsKICB2YXIgY2xlYXIgPSBmdW5jdGlvbiAoKSB7CiAgICBzZWxmLl9yZWFkYWJsZTIucmVtb3ZlTGlzdGVuZXIoJ3JlYWRhYmxlJywgb25yZWFkYWJsZSk7CiAgICBzZWxmLl9yZWFkYWJsZTIucmVtb3ZlTGlzdGVuZXIoJ2VuZCcsIG9uZW5kKTsKICAgIHVuZW5kKCk7CiAgfTsKICB0aGlzLl9kcmFpbmVkID0gdHJ1ZTsKICB0aGlzLl9yZWFkYWJsZSA9IHJlYWRhYmxlOwogIHRoaXMuX3JlYWRhYmxlMiA9IHJlYWRhYmxlLl9yZWFkYWJsZVN0YXRlID8gcmVhZGFibGUgOiB0b1N0cmVhbXMyKHJlYWRhYmxlKTsKICB0aGlzLl9yZWFkYWJsZTIub24oJ3JlYWRhYmxlJywgb25yZWFkYWJsZSk7CiAgdGhpcy5fcmVhZGFibGUyLm9uKCdlbmQnLCBvbmVuZCk7CiAgdGhpcy5fdW5yZWFkID0gY2xlYXI7CiAgdGhpcy5fZm9yd2FyZCgpOwp9OwpEdXBsZXhpZnkucHJvdG90eXBlLl9yZWFkID0gZnVuY3Rpb24gKCkgewogIHRoaXMuX2RyYWluZWQgPSB0cnVlOwogIHRoaXMuX2ZvcndhcmQoKTsKfTsKRHVwbGV4aWZ5LnByb3RvdHlwZS5fZm9yd2FyZCA9IGZ1bmN0aW9uICgpIHsKICBpZiAodGhpcy5fZm9yd2FyZGluZyB8fCAhdGhpcy5fcmVhZGFibGUyIHx8ICF0aGlzLl9kcmFpbmVkKSByZXR1cm47CiAgdGhpcy5fZm9yd2FyZGluZyA9IHRydWU7CiAgdmFyIGRhdGE7CiAgd2hpbGUgKHRoaXMuX2RyYWluZWQgJiYgKGRhdGEgPSBzaGlmdCh0aGlzLl9yZWFkYWJsZTIpKSAhPT0gbnVsbCkgewogICAgaWYgKHRoaXMuZGVzdHJveWVkKSBjb250aW51ZTsKICAgIHRoaXMuX2RyYWluZWQgPSB0aGlzLnB1c2goZGF0YSk7CiAgfQogIHRoaXMuX2ZvcndhcmRpbmcgPSBmYWxzZTsKfTsKRHVwbGV4aWZ5LnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKGVycikgewogIGlmICh0aGlzLmRlc3Ryb3llZCkgcmV0dXJuOwogIHRoaXMuZGVzdHJveWVkID0gdHJ1ZTsKICB2YXIgc2VsZiA9IHRoaXM7CiAgcHJvY2Vzcy5uZXh0VGljayhmdW5jdGlvbiAoKSB7CiAgICBzZWxmLl9kZXN0cm95KGVycik7CiAgfSk7Cn07CkR1cGxleGlmeS5wcm90b3R5cGUuX2Rlc3Ryb3kgPSBmdW5jdGlvbiAoZXJyKSB7CiAgaWYgKGVycikgewogICAgdmFyIG9uZHJhaW4gPSB0aGlzLl9vbmRyYWluOwogICAgdGhpcy5fb25kcmFpbiA9IG51bGw7CiAgICBpZiAob25kcmFpbikgb25kcmFpbihlcnIpO2Vsc2UgdGhpcy5lbWl0KCdlcnJvcicsIGVycik7CiAgfQogIGlmICh0aGlzLl9mb3J3YXJkRGVzdHJveSkgewogICAgaWYgKHRoaXMuX3JlYWRhYmxlICYmIHRoaXMuX3JlYWRhYmxlLmRlc3Ryb3kpIHRoaXMuX3JlYWRhYmxlLmRlc3Ryb3koKTsKICAgIGlmICh0aGlzLl93cml0YWJsZSAmJiB0aGlzLl93cml0YWJsZS5kZXN0cm95KSB0aGlzLl93cml0YWJsZS5kZXN0cm95KCk7CiAgfQogIHRoaXMuZW1pdCgnY2xvc2UnKTsKfTsKRHVwbGV4aWZ5LnByb3RvdHlwZS5fd3JpdGUgPSBmdW5jdGlvbiAoZGF0YSwgZW5jLCBjYikgewogIGlmICh0aGlzLmRlc3Ryb3llZCkgcmV0dXJuIGNiKCk7CiAgaWYgKHRoaXMuX2NvcmtlZCkgcmV0dXJuIG9udW5jb3JrKHRoaXMsIHRoaXMuX3dyaXRlLmJpbmQodGhpcywgZGF0YSwgZW5jLCBjYikpOwogIGlmIChkYXRhID09PSBTSUdOQUxfRkxVU0gpIHJldHVybiB0aGlzLl9maW5pc2goY2IpOwogIGlmICghdGhpcy5fd3JpdGFibGUpIHJldHVybiBjYigpOwogIGlmICh0aGlzLl93cml0YWJsZS53cml0ZShkYXRhKSA9PT0gZmFsc2UpIHRoaXMuX29uZHJhaW4gPSBjYjtlbHNlIGNiKCk7Cn07CkR1cGxleGlmeS5wcm90b3R5cGUuX2ZpbmlzaCA9IGZ1bmN0aW9uIChjYikgewogIHZhciBzZWxmID0gdGhpczsKICB0aGlzLmVtaXQoJ3ByZWVuZCcpOwogIG9udW5jb3JrKHRoaXMsIGZ1bmN0aW9uICgpIHsKICAgIGVuZChzZWxmLl9mb3J3YXJkRW5kICYmIHNlbGYuX3dyaXRhYmxlLCBmdW5jdGlvbiAoKSB7CiAgICAgIC8vIGhheHggdG8gbm90IGVtaXQgcHJlZmluaXNoIHR3aWNlCiAgICAgIGlmIChzZWxmLl93cml0YWJsZVN0YXRlLnByZWZpbmlzaGVkID09PSBmYWxzZSkgc2VsZi5fd3JpdGFibGVTdGF0ZS5wcmVmaW5pc2hlZCA9IHRydWU7CiAgICAgIHNlbGYuZW1pdCgncHJlZmluaXNoJyk7CiAgICAgIG9udW5jb3JrKHNlbGYsIGNiKTsKICAgIH0pOwogIH0pOwp9OwpEdXBsZXhpZnkucHJvdG90eXBlLmVuZCA9IGZ1bmN0aW9uIChkYXRhLCBlbmMsIGNiKSB7CiAgaWYgKHR5cGVvZiBkYXRhID09PSAnZnVuY3Rpb24nKSByZXR1cm4gdGhpcy5lbmQobnVsbCwgbnVsbCwgZGF0YSk7CiAgaWYgKHR5cGVvZiBlbmMgPT09ICdmdW5jdGlvbicpIHJldHVybiB0aGlzLmVuZChkYXRhLCBudWxsLCBlbmMpOwogIHRoaXMuX2VuZGVkID0gdHJ1ZTsKICBpZiAoZGF0YSkgdGhpcy53cml0ZShkYXRhKTsKICBpZiAoIXRoaXMuX3dyaXRhYmxlU3RhdGUuZW5kaW5nKSB0aGlzLndyaXRlKFNJR05BTF9GTFVTSCk7CiAgcmV0dXJuIHN0cmVhbS5Xcml0YWJsZS5wcm90b3R5cGUuZW5kLmNhbGwodGhpcywgY2IpOwp9Owptb2R1bGUuZXhwb3J0cyA9IER1cGxleGlmeTs="},{"version":3,"names":["stream","require","eos","inherits","shift","SIGNAL_FLUSH","Buffer","from","Uint8Array","onuncork","self","fn","_corked","once","autoDestroy","err","_autoDestroy","destroy","destroyer","end","message","_ended","ws","_writableState","finished","toStreams2","rs","Readable","objectMode","highWaterMark","wrap","Duplexify","writable","readable","opts","Duplex","call","_writable","_readable","_readable2","_forwardDestroy","_forwardEnd","_ondrain","_drained","_forwarding","_unwrite","_unread","destroyed","setWritable","setReadable","obj","prototype","cork","emit","uncork","unend","ondrain","clear","removeListener","process","nextTick","on","push","resume","onreadable","_forward","onend","_readableState","_read","data","_destroy","_write","enc","cb","bind","_finish","write","prefinished","ending","Writable","module","exports"],"sources":["/Users/pantu/work2/vizia-ig-app/node_modules/duplexify/index.js"],"sourcesContent":["var stream = require('readable-stream')\nvar eos = require('end-of-stream')\nvar inherits = require('inherits')\nvar shift = require('stream-shift')\n\nvar SIGNAL_FLUSH = (Buffer.from && Buffer.from !== Uint8Array.from)\n  ? Buffer.from([0])\n  : new Buffer([0])\n\nvar onuncork = function(self, fn) {\n  if (self._corked) self.once('uncork', fn)\n  else fn()\n}\n\nvar autoDestroy = function (self, err) {\n  if (self._autoDestroy) self.destroy(err)\n}\n\nvar destroyer = function(self, end) {\n  return function(err) {\n    if (err) autoDestroy(self, err.message === 'premature close' ? null : err)\n    else if (end && !self._ended) self.end()\n  }\n}\n\nvar end = function(ws, fn) {\n  if (!ws) return fn()\n  if (ws._writableState && ws._writableState.finished) return fn()\n  if (ws._writableState) return ws.end(fn)\n  ws.end()\n  fn()\n}\n\nvar toStreams2 = function(rs) {\n  return new (stream.Readable)({objectMode:true, highWaterMark:16}).wrap(rs)\n}\n\nvar Duplexify = function(writable, readable, opts) {\n  if (!(this instanceof Duplexify)) return new Duplexify(writable, readable, opts)\n  stream.Duplex.call(this, opts)\n\n  this._writable = null\n  this._readable = null\n  this._readable2 = null\n\n  this._autoDestroy = !opts || opts.autoDestroy !== false\n  this._forwardDestroy = !opts || opts.destroy !== false\n  this._forwardEnd = !opts || opts.end !== false\n  this._corked = 1 // start corked\n  this._ondrain = null\n  this._drained = false\n  this._forwarding = false\n  this._unwrite = null\n  this._unread = null\n  this._ended = false\n\n  this.destroyed = false\n\n  if (writable) this.setWritable(writable)\n  if (readable) this.setReadable(readable)\n}\n\ninherits(Duplexify, stream.Duplex)\n\nDuplexify.obj = function(writable, readable, opts) {\n  if (!opts) opts = {}\n  opts.objectMode = true\n  opts.highWaterMark = 16\n  return new Duplexify(writable, readable, opts)\n}\n\nDuplexify.prototype.cork = function() {\n  if (++this._corked === 1) this.emit('cork')\n}\n\nDuplexify.prototype.uncork = function() {\n  if (this._corked && --this._corked === 0) this.emit('uncork')\n}\n\nDuplexify.prototype.setWritable = function(writable) {\n  if (this._unwrite) this._unwrite()\n\n  if (this.destroyed) {\n    if (writable && writable.destroy) writable.destroy()\n    return\n  }\n\n  if (writable === null || writable === false) {\n    this.end()\n    return\n  }\n\n  var self = this\n  var unend = eos(writable, {writable:true, readable:false}, destroyer(this, this._forwardEnd))\n\n  var ondrain = function() {\n    var ondrain = self._ondrain\n    self._ondrain = null\n    if (ondrain) ondrain()\n  }\n\n  var clear = function() {\n    self._writable.removeListener('drain', ondrain)\n    unend()\n  }\n\n  if (this._unwrite) process.nextTick(ondrain) // force a drain on stream reset to avoid livelocks\n\n  this._writable = writable\n  this._writable.on('drain', ondrain)\n  this._unwrite = clear\n\n  this.uncork() // always uncork setWritable\n}\n\nDuplexify.prototype.setReadable = function(readable) {\n  if (this._unread) this._unread()\n\n  if (this.destroyed) {\n    if (readable && readable.destroy) readable.destroy()\n    return\n  }\n\n  if (readable === null || readable === false) {\n    this.push(null)\n    this.resume()\n    return\n  }\n\n  var self = this\n  var unend = eos(readable, {writable:false, readable:true}, destroyer(this))\n\n  var onreadable = function() {\n    self._forward()\n  }\n\n  var onend = function() {\n    self.push(null)\n  }\n\n  var clear = function() {\n    self._readable2.removeListener('readable', onreadable)\n    self._readable2.removeListener('end', onend)\n    unend()\n  }\n\n  this._drained = true\n  this._readable = readable\n  this._readable2 = readable._readableState ? readable : toStreams2(readable)\n  this._readable2.on('readable', onreadable)\n  this._readable2.on('end', onend)\n  this._unread = clear\n\n  this._forward()\n}\n\nDuplexify.prototype._read = function() {\n  this._drained = true\n  this._forward()\n}\n\nDuplexify.prototype._forward = function() {\n  if (this._forwarding || !this._readable2 || !this._drained) return\n  this._forwarding = true\n\n  var data\n\n  while (this._drained && (data = shift(this._readable2)) !== null) {\n    if (this.destroyed) continue\n    this._drained = this.push(data)\n  }\n\n  this._forwarding = false\n}\n\nDuplexify.prototype.destroy = function(err) {\n  if (this.destroyed) return\n  this.destroyed = true\n\n  var self = this\n  process.nextTick(function() {\n    self._destroy(err)\n  })\n}\n\nDuplexify.prototype._destroy = function(err) {\n  if (err) {\n    var ondrain = this._ondrain\n    this._ondrain = null\n    if (ondrain) ondrain(err)\n    else this.emit('error', err)\n  }\n\n  if (this._forwardDestroy) {\n    if (this._readable && this._readable.destroy) this._readable.destroy()\n    if (this._writable && this._writable.destroy) this._writable.destroy()\n  }\n\n  this.emit('close')\n}\n\nDuplexify.prototype._write = function(data, enc, cb) {\n  if (this.destroyed) return cb()\n  if (this._corked) return onuncork(this, this._write.bind(this, data, enc, cb))\n  if (data === SIGNAL_FLUSH) return this._finish(cb)\n  if (!this._writable) return cb()\n\n  if (this._writable.write(data) === false) this._ondrain = cb\n  else cb()\n}\n\nDuplexify.prototype._finish = function(cb) {\n  var self = this\n  this.emit('preend')\n  onuncork(this, function() {\n    end(self._forwardEnd && self._writable, function() {\n      // haxx to not emit prefinish twice\n      if (self._writableState.prefinished === false) self._writableState.prefinished = true\n      self.emit('prefinish')\n      onuncork(self, cb)\n    })\n  })\n}\n\nDuplexify.prototype.end = function(data, enc, cb) {\n  if (typeof data === 'function') return this.end(null, null, data)\n  if (typeof enc === 'function') return this.end(data, null, enc)\n  this._ended = true\n  if (data) this.write(data)\n  if (!this._writableState.ending) this.write(SIGNAL_FLUSH)\n  return stream.Writable.prototype.end.call(this, cb)\n}\n\nmodule.exports = Duplexify\n"],"mappings":"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"}]}