{"remainingRequest":"/Users/pantu/.npm/_npx/5593/lib/node_modules/@vizia/app-emulator/node_modules/babel-loader/lib/index.js??ref--4-1!/Users/pantu/work2/vizia/src/lib/create-key-metric-transform.js","dependencies":[{"path":"/Users/pantu/work2/vizia/src/lib/create-key-metric-transform.js","mtime":1664794945848},{"path":"/Users/pantu/.npm/_npx/5593/lib/node_modules/@vizia/app-emulator/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/pantu/.npm/_npx/5593/lib/node_modules/@vizia/app-emulator/node_modules/babel-loader/lib/index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:J3VzZSBzdHJpY3QnOwovKioKICogeW91IGNhbiBwYXNzIGFuIG9wdGlvbnMgb2JqZWN0IGludG8geW91ciB0cmFuc2Zvcm0gd2hlbiBpbnN0YW50aWF0aW5nIHRoZSBmYWN0b3J5CiAqIHRoZXNlIGNhbiB0aGVuIGJlIHVzZWQgaW4geW91ciBjb2RlIGJ5IGFjY2VzcyBgb3B0aW9ucy5wcm9wTmFtZWAKICovCgptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHsKICBsZXQgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge307CiAgcmV0dXJuIHsKICAgIHRyYW5zZm9ybTogKGRhdGEsIHBpcGVsaW5lKSA9PiB7CiAgICAgIGNvbnN0IHByb3BzID0gcGlwZWxpbmUuY29uZmlnLnNjZW5lLm9wdGlvbnM7IC8vZ2V0IGNvbnRyb2wgcHJvcGVydGllcwoKICAgICAgY29uc3QgewogICAgICAgIHlWYWx1ZSwKICAgICAgICBmb3JtYXQsCiAgICAgICAgcHJvZmlsZQogICAgICB9ID0gcHJvcHM7IC8vIGdldCB0aGUgdmFsdWVzIHlvdSBuZWVkIGZyb20gY29udHJvbCBwcm9wcwoKICAgICAgY29uc29sZS5sb2coewogICAgICAgIGRhdGEsCiAgICAgICAgcGlwZWxpbmUKICAgICAgfSk7CiAgICAgIGxldCBrZXlNZXRyaWMgPSB7fTsKCiAgICAgIGlmICghZGF0YSkgewogICAgICAgIGtleU1ldHJpYyA9IHsKICAgICAgICAgIGxhYmVsOiB5VmFsdWUsCiAgICAgICAgICB2YWx1ZTogMCwKICAgICAgICAgIGZvcm1hdAogICAgICAgIH07CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY29uc29sZS5sb2coeVZhbHVlKTsKICAgICAgICBrZXlNZXRyaWMgPSB7CiAgICAgICAgICBsYWJlbDogeVZhbHVlLAogICAgICAgICAgdmFsdWU6IGRhdGFbeVZhbHVlXSwKICAgICAgICAgIGNvbXBhcmlzb25WYWx1ZTogZGF0YVtgJHt5VmFsdWV9X2hpc3RvcnlgXSwKICAgICAgICAgIC8vcHJldmlvdXMgZGF0YSBmb3IgdGhlIGNvbXBhcmlzb24KICAgICAgICAgIGZvcm1hdCAvL3NlbmQgdGhlIHdheSB0aGUgdXNlciB3YW50cyB0byBmb3JtYXQgdGhlIG51bWJlcgoKICAgICAgICB9OwogICAgICAgIGNvbnNvbGUubG9nKGtleU1ldHJpYyk7CiAgICAgIH0KCiAgICAgIHBpcGVsaW5lLnB1c2goa2V5TWV0cmljKTsgLy9wdXNoIHRoZSBkYXRhIGRvd24gdGhlIHBpcGVsaW5lCgogICAgICBwaXBlbGluZS5kb25lKCk7IC8vbGV0IHRoZSBwaXBlbGluZSBrbm93IHRoYXQgeW91IGhhdmUgZmluaXNoZWQgdHJhbnNmb3JtaW5nIHRoZSBkYXRhCiAgICB9CiAgfTsKfTs="},{"version":3,"names":["module","exports","options","transform","data","pipeline","props","config","scene","yValue","format","profile","console","log","keyMetric","label","value","comparisonValue","push","done"],"sources":["/Users/pantu/work2/vizia/src/lib/create-key-metric-transform.js"],"sourcesContent":["'use strict';\n/**\n * you can pass an options object into your transform when instantiating the factory\n * these can then be used in your code by access `options.propName`\n */\nmodule.exports = (options = {}) => {\n    return {\n        transform: (data, pipeline) => {\n            const props = pipeline.config.scene.options; //get control properties\n            const {yValue, format, profile} = props; // get the values you need from control props\n            console.log({data, pipeline});\n            let keyMetric = {};\n            if (!data) {\n                keyMetric = {\n                    label: yValue,\n                    value: 0,\n                    format\n                }\n            }\n            else {\n                console.log(yValue);\n                keyMetric = {\n                    label: yValue, \n                    value: data[yValue], \n                    comparisonValue: data[`${yValue}_history`], //previous data for the comparison\n                    format //send the way the user wants to format the number\n                };\n                console.log(keyMetric);\n            }\n            pipeline.push(keyMetric); //push the data down the pipeline\n            pipeline.done(); //let the pipeline know that you have finished transforming the data\n        }\n    };\n};\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;;AACAA,MAAM,CAACC,OAAP,GAAiB,YAAkB;EAAA,IAAjBC,OAAiB,uEAAP,EAAO;EAC/B,OAAO;IACHC,SAAS,EAAE,CAACC,IAAD,EAAOC,QAAP,KAAoB;MAC3B,MAAMC,KAAK,GAAGD,QAAQ,CAACE,MAAT,CAAgBC,KAAhB,CAAsBN,OAApC,CAD2B,CACkB;;MAC7C,MAAM;QAACO,MAAD;QAASC,MAAT;QAAiBC;MAAjB,IAA4BL,KAAlC,CAF2B,CAEc;;MACzCM,OAAO,CAACC,GAAR,CAAY;QAACT,IAAD;QAAOC;MAAP,CAAZ;MACA,IAAIS,SAAS,GAAG,EAAhB;;MACA,IAAI,CAACV,IAAL,EAAW;QACPU,SAAS,GAAG;UACRC,KAAK,EAAEN,MADC;UAERO,KAAK,EAAE,CAFC;UAGRN;QAHQ,CAAZ;MAKH,CAND,MAOK;QACDE,OAAO,CAACC,GAAR,CAAYJ,MAAZ;QACAK,SAAS,GAAG;UACRC,KAAK,EAAEN,MADC;UAERO,KAAK,EAAEZ,IAAI,CAACK,MAAD,CAFH;UAGRQ,eAAe,EAAEb,IAAI,CAAE,GAAEK,MAAO,UAAX,CAHb;UAGoC;UAC5CC,MAJQ,CAID;;QAJC,CAAZ;QAMAE,OAAO,CAACC,GAAR,CAAYC,SAAZ;MACH;;MACDT,QAAQ,CAACa,IAAT,CAAcJ,SAAd,EAtB2B,CAsBD;;MAC1BT,QAAQ,CAACc,IAAT,GAvB2B,CAuBV;IACpB;EAzBE,CAAP;AA2BH,CA5BD"}]}