{"remainingRequest":"/Users/pantu/.npm/_npx/64608/lib/node_modules/@vizia/app-emulator/node_modules/babel-loader/lib/index.js??ref--4-1!/Users/pantu/work2/vizia-ig-app/node_modules/@vizia/bundle/lib/Bundle.js","dependencies":[{"path":"/Users/pantu/work2/vizia-ig-app/node_modules/@vizia/bundle/lib/Bundle.js","mtime":1664781785120},{"path":"/Users/pantu/.npm/_npx/64608/lib/node_modules/@vizia/app-emulator/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/pantu/.npm/_npx/64608/lib/node_modules/@vizia/app-emulator/node_modules/babel-loader/lib/index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:J3VzZSBzdHJpY3QnOwoKY29uc3QgRXZlbnRFbWl0dGVyID0gcmVxdWlyZSgnZXZlbnRzJyk7CmNvbnN0IGZyb20gPSByZXF1aXJlKCdmcm9tMicpOwpjb25zdCB0aHJvdWdoID0gcmVxdWlyZSgndGhyb3VnaDInKTsKY29uc3Qgd3JpdGVyID0gcmVxdWlyZSgndG8yJyk7CmNvbnN0IHB1bXBpZnkgPSByZXF1aXJlKCdwdW1waWZ5Jyk7CmNvbnN0IGNvbmNhdCA9IHJlcXVpcmUoJ2NvbmNhdC1zdHJlYW0nKTsKY29uc3Qgc3B5ID0gcmVxdWlyZSgndGhyb3VnaDItc3B5Jyk7CmNvbnN0IGVvcyA9IHJlcXVpcmUoJ2VuZC1vZi1zdHJlYW0nKTsKZnVuY3Rpb24gZW5zdXJlRXJyb3IoZXJyKSB7CiAgcmV0dXJuIGVyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyIDogbmV3IEVycm9yKGVyci5tZXNzYWdlIHx8IGVycik7Cn0KbW9kdWxlLmV4cG9ydHMgPSBjbGFzcyBCdW5kbGUgZXh0ZW5kcyBFdmVudEVtaXR0ZXIgewogIGNvbnN0cnVjdG9yKCkgewogICAgc3VwZXIoKTsKICAgIHRoaXMuaW5pdGlhbENvbmZpZyA9IHt9OwogICAgdGhpcy5mblNwZWNzID0gW107CiAgICB0aGlzLmxpbWl0ID0gLTE7CiAgICB0aGlzLl9od20gPSAxOyAvLyBoaWdoV2F0ZXJNYXJrIGZvciBzdHJlYW1zLiBEb24ndCBtZXNzIHdpdGggaXQgdW5sZXNzIHlvdSBrbm93IHdoYXQgeW91J3JlIGRvaW5nLgogIH0KCiAgc2V0VGhyb3R0bGUobXMpIHsKICAgIHRoaXMuZ2V0VGhyb3R0bGUgPSAoKSA9PiBtczsKICB9CiAgZ2V0VGhyb3R0bGUoKSB7CiAgICByZXR1cm4gLTE7CiAgfQogIHVzZShvYmopIHsKICAgIGlmIChvYmouc291cmNlKSB7CiAgICAgIHRoaXMuc291cmNlU3BlYyA9IG9iajsKICAgIH0gZWxzZSBpZiAob2JqLnRyYW5zZm9ybSB8fCBvYmoudGFwKSB7CiAgICAgIHRoaXMuZm5TcGVjcy5wdXNoKG9iaik7CiAgICB9IGVsc2UgaWYgKG9iai5kZXN0aW5hdGlvbikgewogICAgICB0aGlzLmRlc3RpbmF0aW9uU3BlYyA9IG9iajsKICAgIH0KICB9CiAgYXN5bmMgcHJlY29uZmlnKGNvbmZpZykgewogICAgcmV0dXJuIGNvbmZpZzsKICB9CiAgYXN5bmMgY29tcHV0ZUNvbmZpZyhpbml0aWFsQ29uZmlnLCBjdXJyZW50Q29uZmlnKSB7CiAgICByZXR1cm4gY3VycmVudENvbmZpZzsKICB9CiAgYXN5bmMgbG9hZChjb25maWcpIHsKICAgIGxldCBwcm9jZXNzZWRDb25maWc7CiAgICB0cnkgewogICAgICBwcm9jZXNzZWRDb25maWcgPSBhd2FpdCB0aGlzLnByZWNvbmZpZyhjb25maWcpOwogICAgfSBjYXRjaCAoZSkgewogICAgICByZXR1cm4gdGhpcy5lbWl0KCdlcnJvcicsIGUpOwogICAgfQogICAgdGhpcy5pbml0aWFsQ29uZmlnID0gT2JqZWN0LmZyZWV6ZShPYmplY3QuYXNzaWduKHt9LCBjb25maWcsIHByb2Nlc3NlZENvbmZpZykpOwogICAgdGhpcy5lbWl0KCdsb2FkJywgewogICAgICBjb25maWc6IHRoaXMuaW5pdGlhbENvbmZpZwogICAgfSk7CiAgfQogIHN0YXJ0KCkgewogICAgdGhpcy5zdG9wUmVxdWVzdGVkID0gZmFsc2U7CiAgICB0aGlzLmVtaXQoJ3N0YXJ0JywgewogICAgICBjb25maWc6IHRoaXMuaW5pdGlhbENvbmZpZwogICAgfSk7CiAgICB0aGlzLmV4ZWN1dGVQaXBlbGluZSh0aGlzLmluaXRpYWxDb25maWcpOwogIH0KICB0YWtlKG4pIHsKICAgIHRoaXMubGltaXQgPSBuOwogIH0KICBzdG9wKCkgewogICAgdGhpcy5lbWl0KCdzdG9wUmVxdWVzdGVkJywgdGhpcyk7CiAgICB0aGlzLnN0b3BSZXF1ZXN0ZWQgPSB0cnVlOwogICAgaWYgKHRoaXMucGlwZWxpbmUpIHsKICAgICAgdGhpcy5waXBlbGluZS5kZXN0cm95KCk7CiAgICB9CiAgfQogIGxvb3AoY3VycmVudENvbmZpZykgewogICAgY29uc3Qgc2xlZXBJbnRlcnZhbCA9IHRoaXMuZ2V0VGhyb3R0bGUoY3VycmVudENvbmZpZyk7CiAgICBpZiAoTnVtYmVyLmlzRmluaXRlKHNsZWVwSW50ZXJ2YWwpICYmIHNsZWVwSW50ZXJ2YWwgPj0gMCAmJiAhdGhpcy5zdG9wUmVxdWVzdGVkKSB7CiAgICAgIGNvbnNvbGUubG9nKCdxdWV1aW5nIG5leHQgcGlwZWxpbmUgZXhlY3V0aW9uJywgbmV3IERhdGUoKSk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tY29uc29sZQogICAgICBzZXRUaW1lb3V0KHRoaXMuZXhlY3V0ZVBpcGVsaW5lLmJpbmQodGhpcywgY3VycmVudENvbmZpZyksIHNsZWVwSW50ZXJ2YWwpOwogICAgfQogIH0KICBnZXRQaXBlbGluZUFycmF5KGNvbmZpZykgewogICAgY29uc3QgdHJhbnNmb3JtcyA9IHRoaXMuZm5TcGVjcy5tYXAob2JqID0+IHsKICAgICAgaWYgKG9iai50cmFuc2Zvcm0pIHsKICAgICAgICByZXR1cm4gdGhpcy5fbWFrZVRyYW5zZm9ybVN0cmVhbShvYmosIGNvbmZpZyk7CiAgICAgIH0KICAgICAgcmV0dXJuIHRoaXMuX21ha2VUYXBTdHJlYW0ob2JqLCBjb25maWcpOwogICAgfSwgdGhpcyk7CiAgICByZXR1cm4gW3RoaXMuX21ha2VTb3VyY2VTdHJlYW0odGhpcy5zb3VyY2VTcGVjLCBjb25maWcpLCAuLi50cmFuc2Zvcm1zXTsKICB9CiAgZ2V0RGVzdGluYXRpb24oY29uZmlnKSB7CiAgICBpZiAodGhpcy5kZXN0aW5hdGlvblNwZWMuYnVmZmVyZWQpIHsKICAgICAgcmV0dXJuIHRoaXMuX21ha2VCdWZmZXJlZERlc3RpbmF0aW9uU3RyZWFtKHRoaXMuZGVzdGluYXRpb25TcGVjLCBjb25maWcpOwogICAgfQogICAgcmV0dXJuIHRoaXMuX21ha2VEZXN0aW5hdGlvblN0cmVhbSh0aGlzLmRlc3RpbmF0aW9uU3BlYywgY29uZmlnLCB0aGlzLmxpbWl0KTsKICB9CiAgYXN5bmMgZXhlY3V0ZVBpcGVsaW5lKGN1cnJlbnRDb25maWcpIHsKICAgIGlmICh0aGlzLnBpcGVsaW5lKSB7CiAgICAgIHRoaXMucGlwZWxpbmUuZGVzdHJveSgpOwogICAgfQogICAgdGhpcy5fYWxsb3dQdXNoID0gdHJ1ZTsKICAgIGlmICh0aGlzLnN0b3BSZXF1ZXN0ZWQpIHsKICAgICAgY29uc29sZS53YXJuKCdub3QgZXhlY3V0aW5nIGR1ZSB0byBgc3RvcGAgcmVxdWVzdCcpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWNvbnNvbGUKICAgICAgcmV0dXJuOwogICAgfQogICAgbGV0IHByb2Nlc3NlZENvbmZpZzsKICAgIHRyeSB7CiAgICAgIHByb2Nlc3NlZENvbmZpZyA9IGF3YWl0IHRoaXMuY29tcHV0ZUNvbmZpZyh0aGlzLmluaXRpYWxDb25maWcsIGN1cnJlbnRDb25maWcpOwogICAgfSBjYXRjaCAoZSkgewogICAgICByZXR1cm4gdGhpcy5lbWl0KCdlcnJvcicsIGUpOwogICAgfQogICAgdGhpcy5lbWl0KCdjb25maWdDb21wdXRlZCcsIHByb2Nlc3NlZENvbmZpZyk7CiAgICB0aGlzLl9zdGFydFBpcGVsaW5lKHByb2Nlc3NlZENvbmZpZyk7CiAgfQogIF9zdGFydFBpcGVsaW5lKGN1cnJlbnRDb25maWcpIHsKICAgIHRoaXMucGlwZWxpbmUgPSBwdW1waWZ5Lm9iaigpOwogICAgZW9zKHRoaXMucGlwZWxpbmUsIGVyciA9PiB7CiAgICAgIHRoaXMuX2FsbG93UHVzaCA9IGZhbHNlOwogICAgICBpZiAoZXJyKSB7CiAgICAgICAgdGhpcy5lbWl0KCdlcnJvcicsIGVyciwgY3VycmVudENvbmZpZyk7CiAgICAgIH0KICAgICAgdGhpcy5lbWl0KCdlbmQnLCBlcnIpOwogICAgICB0aGlzLmxvb3AoY3VycmVudENvbmZpZyk7CiAgICB9KTsKICAgIHRoaXMucGlwZWxpbmUuc2V0UGlwZWxpbmUoLi4udGhpcy5nZXRQaXBlbGluZUFycmF5KGN1cnJlbnRDb25maWcpLCB0aGlzLmdldERlc3RpbmF0aW9uKGN1cnJlbnRDb25maWcpKTsKICB9CiAgX21ha2VTb3VyY2VTdHJlYW0oc3BlYywgY29uZmlnKSB7CiAgICBjb25zdCBzdHJlYW0gPSBmcm9tLm9iaih7CiAgICAgIGhpZ2hXYXRlck1hcms6IHRoaXMuX2h3bQogICAgfSwgKHNpemUsIG5leHQpID0+IHsKICAgICAgY29uc3QgZG9uZSA9IGVyciA9PiBzZXRUaW1lb3V0KCgpID0+IG5leHQoZXJyID8gZW5zdXJlRXJyb3IoZXJyKSA6IG51bGwsIG51bGwpLCAwKTsKICAgICAgdHJ5IHsKICAgICAgICBzcGVjLnNvdXJjZSh7CiAgICAgICAgICBjb25maWcsCiAgICAgICAgICBwdXNoOiBkYXRhID0+IHRoaXMuX3NhZmVQdXNoKHN0cmVhbSwgZGF0YSksCiAgICAgICAgICBlcnJvcjogZG9uZSwKICAgICAgICAgIGRvbmUKICAgICAgICB9KTsKICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgbmV4dChlcnIpOwogICAgICB9CiAgICB9KTsKICAgIHJldHVybiBzdHJlYW07CiAgfQogIF9tYWtlVHJhbnNmb3JtU3RyZWFtKHNwZWMsIGNvbmZpZykgewogICAgY29uc3Qgc3RyZWFtID0gdGhyb3VnaC5vYmooewogICAgICBoaWdoV2F0ZXJNYXJrOiB0aGlzLl9od20KICAgIH0sIChjaHVuaywgZW5jLCBjYWxsYmFjaykgPT4gewogICAgICB0cnkgewogICAgICAgIHNwZWMudHJhbnNmb3JtKGNodW5rLCB7CiAgICAgICAgICBjb25maWcsCiAgICAgICAgICBwdXNoOiBkYXRhID0+IHRoaXMuX3NhZmVQdXNoKHN0cmVhbSwgZGF0YSksCiAgICAgICAgICBlcnJvcjogZXJyID0+IHNldFRpbWVvdXQoKCkgPT4gY2FsbGJhY2soZW5zdXJlRXJyb3IoZXJyKSksIDApLAogICAgICAgICAgZG9uZTogKCkgPT4gc2V0VGltZW91dCgoKSA9PiBjYWxsYmFjaygpLCAwKQogICAgICAgIH0pOwogICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICBjYWxsYmFjayhlcnIpOwogICAgICB9CiAgICB9KTsKICAgIHJldHVybiBzdHJlYW07CiAgfQogIF9tYWtlVGFwU3RyZWFtKHNwZWMsIGNvbmZpZykgewogICAgcmV0dXJuIHNweS5vYmooZGF0YSA9PiB7CiAgICAgIHNwZWMudGFwKGRhdGEsIHsKICAgICAgICBjb25maWcKICAgICAgfSk7CiAgICB9KTsKICB9CiAgX21ha2VCdWZmZXJlZERlc3RpbmF0aW9uU3RyZWFtKHNwZWMsIGNvbmZpZykgewogICAgcmV0dXJuIGNvbmNhdChkYXRhID0+IHsKICAgICAgc3BlYy5kZXN0aW5hdGlvbihkYXRhLCB7CiAgICAgICAgY29uZmlnLAogICAgICAgIGRvbmU6ICgpID0+IHt9CiAgICAgIH0pOwogICAgfSk7CiAgfQogIF9tYWtlRGVzdGluYXRpb25TdHJlYW0oc3BlYywgY29uZmlnLCBsaW1pdCkgewogICAgbGV0IGNhbGxzID0gMDsKICAgIGNvbnN0IHdzID0gd3JpdGVyLm9iaih7CiAgICAgIGhpZ2hXYXRlck1hcms6IHRoaXMuX2h3bQogICAgfSwgKGRhdGEsIGVuYywgZG9uZSkgPT4gewogICAgICBjYWxscyArPSAxOwogICAgICBpZiAobGltaXQgPiAwICYmIGNhbGxzID4gbGltaXQpIHsKICAgICAgICB0aGlzLl9hbGxvd1B1c2ggPSBmYWxzZTsKICAgICAgICB3cy5lbmQoKTsKICAgICAgICBkb25lKG51bGwpOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICB0aGlzLmVtaXQoJ2RhdGEnLCBkYXRhKTsKICAgICAgc3BlYy5kZXN0aW5hdGlvbihkYXRhLCB7CiAgICAgICAgY29uZmlnLAogICAgICAgIGRvbmUsCiAgICAgICAgZXJyb3I6IGRvbmUKICAgICAgfSk7CiAgICB9KTsKICAgIHJldHVybiB3czsKICB9CgogIC8vIGZvcmNlIHRoZSBjb25zdW1lcidzIHVzYWdlIG9mIHBpcGVsaW5lLnB1c2ggdG8gYmUgYXN5bmMsCiAgLy8gYW5kIGFsc28gY2hlY2sgd2UgaGF2ZSBub3QgaGl0IHRoZSBsaW1pdCBpbXBvc2VkIGJ5IHRoaXMudGFrZShuKQogIC8vIHNvIHdlIGF2b2lkIHdyaXRpbmcgdG8gYSBzdHJlYW0gdGhhdCBpcyBjbG9zZWQvY2xvc2luZwogIF9zYWZlUHVzaChzdHJlYW0sIGRhdGEpIHsKICAgIHNldFRpbWVvdXQoKCkgPT4gdGhpcy5fYWxsb3dQdXNoICYmIHN0cmVhbS5wdXNoKGRhdGEpLCAwKTsKICB9Cn07"},{"version":3,"names":["EventEmitter","require","from","through","writer","pumpify","concat","spy","eos","ensureError","err","Error","message","module","exports","Bundle","constructor","initialConfig","fnSpecs","limit","_hwm","setThrottle","ms","getThrottle","use","obj","source","sourceSpec","transform","tap","push","destination","destinationSpec","preconfig","config","computeConfig","currentConfig","load","processedConfig","e","emit","Object","freeze","assign","start","stopRequested","executePipeline","take","n","stop","pipeline","destroy","loop","sleepInterval","Number","isFinite","console","log","Date","setTimeout","bind","getPipelineArray","transforms","map","_makeTransformStream","_makeTapStream","_makeSourceStream","getDestination","buffered","_makeBufferedDestinationStream","_makeDestinationStream","_allowPush","warn","_startPipeline","setPipeline","spec","stream","highWaterMark","size","next","done","data","_safePush","error","chunk","enc","callback","calls","ws","end"],"sources":["/Users/pantu/work2/vizia-ig-app/node_modules/@vizia/bundle/lib/Bundle.js"],"sourcesContent":["'use strict';\n\nconst EventEmitter = require('events');\nconst from = require('from2');\nconst through = require('through2');\nconst writer = require('to2');\nconst pumpify = require('pumpify');\nconst concat = require('concat-stream');\nconst spy = require('through2-spy');\nconst eos = require('end-of-stream');\n\nfunction ensureError(err) {\n    return err instanceof Error ? err : new Error(err.message || err);\n}\n\nmodule.exports = class Bundle extends EventEmitter {\n    constructor() {\n        super();\n        this.initialConfig = {};\n        this.fnSpecs = [];\n        this.limit = -1;\n        this._hwm = 1; // highWaterMark for streams. Don't mess with it unless you know what you're doing.\n    }\n\n    setThrottle(ms) {\n        this.getThrottle = () => ms;\n    }\n\n    getThrottle() {\n        return -1;\n    }\n\n    use(obj) {\n        if (obj.source) {\n            this.sourceSpec = obj;\n        } else if (obj.transform || obj.tap) {\n            this.fnSpecs.push(obj);\n        } else if (obj.destination) {\n            this.destinationSpec = obj;\n        }\n    }\n\n    async preconfig(config) {\n        return config;\n    }\n\n    async computeConfig(initialConfig, currentConfig) {\n        return currentConfig;\n    }\n\n    async load(config) {\n        let processedConfig;\n        try {\n            processedConfig = await this.preconfig(config);\n        } catch (e) {\n            return this.emit('error', e);\n        }\n\n        this.initialConfig = Object.freeze(Object.assign({}, config, processedConfig));\n        this.emit('load', {config: this.initialConfig});\n    }\n\n    start() {\n        this.stopRequested = false;\n        this.emit('start', {config: this.initialConfig});\n        this.executePipeline(this.initialConfig);\n    }\n\n    take(n) {\n        this.limit = n;\n    }\n\n    stop() {\n        this.emit('stopRequested', this);\n        this.stopRequested = true;\n\n        if (this.pipeline) {\n            this.pipeline.destroy();\n        }\n    }\n\n    loop(currentConfig) {\n        const sleepInterval = this.getThrottle(currentConfig);\n        if (Number.isFinite(sleepInterval) && sleepInterval >= 0 && !this.stopRequested) {\n            console.log('queuing next pipeline execution', new Date()); // eslint-disable-line no-console\n            setTimeout(this.executePipeline.bind(this, currentConfig), sleepInterval);\n        }\n    }\n\n    getPipelineArray(config) {\n        const transforms = this.fnSpecs.map((obj) => {\n            if (obj.transform) {\n                return this._makeTransformStream(obj, config);\n            }\n            return this._makeTapStream(obj, config);\n        }, this);\n\n        return [\n            this._makeSourceStream(this.sourceSpec, config),\n            ...transforms\n        ];\n    }\n\n    getDestination(config) {\n        if (this.destinationSpec.buffered) {\n            return this._makeBufferedDestinationStream(this.destinationSpec, config);\n        }\n        return this._makeDestinationStream(this.destinationSpec, config, this.limit);\n    }\n\n    async executePipeline(currentConfig) {\n        if (this.pipeline) {\n            this.pipeline.destroy();\n        }\n\n        this._allowPush = true;\n\n        if (this.stopRequested) {\n            console.warn('not executing due to `stop` request'); // eslint-disable-line no-console\n            return;\n        }\n\n        let processedConfig;\n        try {\n            processedConfig = await this.computeConfig(this.initialConfig, currentConfig);\n        } catch (e) {\n            return this.emit('error', e);\n        }\n\n        this.emit('configComputed', processedConfig);\n        this._startPipeline(processedConfig);\n    }\n\n    _startPipeline(currentConfig) {\n        this.pipeline = pumpify.obj();\n\n        eos(this.pipeline, (err) => {\n            this._allowPush = false;\n            if (err) {\n                this.emit('error', err, currentConfig);\n            }\n            this.emit('end', err);\n            this.loop(currentConfig);\n        });\n\n        this.pipeline.setPipeline(...this.getPipelineArray(currentConfig), this.getDestination(currentConfig));\n    }\n\n    _makeSourceStream(spec, config) {\n        const stream = from.obj({highWaterMark: this._hwm}, (size, next) => {\n            const done = err => setTimeout(() => next(err ? ensureError(err) : null, null), 0)\n            try {\n                spec.source({\n                    config,\n                    push: data => this._safePush(stream, data),\n                    error: done,\n                    done\n                });\n            } catch (err) {\n                next(err);\n            }\n        });\n\n        return stream;\n    }\n\n    _makeTransformStream(spec, config) {\n        const stream = through.obj({highWaterMark: this._hwm}, (chunk, enc, callback) => {\n            try {\n                spec.transform(chunk, {\n                    config,\n                    push: data => this._safePush(stream, data),\n                    error: err => setTimeout(() => callback(ensureError(err)), 0),\n                    done: () => setTimeout(() => callback(), 0)\n                });\n            } catch (err) {\n                callback(err);\n            }\n        });\n\n        return stream;\n    }\n\n    _makeTapStream(spec, config) {\n        return spy.obj((data) => {\n            spec.tap(data, {config});\n        });\n    }\n\n    _makeBufferedDestinationStream(spec, config) {\n        return concat((data) => {\n            spec.destination(data, {\n                config,\n                done: () => {}\n            });\n        });\n    }\n\n    _makeDestinationStream(spec, config, limit) {\n        let calls = 0;\n\n        const ws = writer.obj({highWaterMark: this._hwm}, (data, enc, done) => {\n            calls += 1;\n\n            if (limit > 0 && calls > limit) {\n                this._allowPush = false;\n                ws.end();\n                done(null);\n                return;\n            }\n\n            this.emit('data', data);\n\n            spec.destination(data, {\n                config,\n                done,\n                error: done\n            });\n        });\n\n        return ws;\n    }\n\n    // force the consumer's usage of pipeline.push to be async,\n    // and also check we have not hit the limit imposed by this.take(n)\n    // so we avoid writing to a stream that is closed/closing\n    _safePush(stream, data) {\n        setTimeout(() => this._allowPush && stream.push(data), 0);\n    }\n};\n"],"mappings":"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"}]}